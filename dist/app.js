!function(){"use strict";const e={accessibilityContainer:document.querySelector("#accessibility-container"),animationSwitch:document.querySelector("#animation-switch"),githubLogo:document.querySelector("#lower-nav img"),themeSwitch:document.querySelector("#theme-switch")},t=()=>{localStorage.setItem("theme",document.documentElement.getAttribute("theme")),localStorage.setItem("animations-enabled",e.animationSwitch.getAttribute("aria-checked"))},n=((()=>{const n=e=>{"light"===document.documentElement.getAttribute("theme")?a():o(),t()},a=()=>{e.themeSwitch.setAttribute("aria-checked","false"),document.documentElement.setAttribute("theme","dark"),e.themeSwitch.style.backgroundPosition="center bottom -0.8rem",e.githubLogo.setAttribute("src","assets/images/logos/GitHub-Mark-Light-32px.png")},o=()=>{e.themeSwitch.setAttribute("aria-checked","true"),document.documentElement.setAttribute("theme","light"),e.themeSwitch.style.backgroundPosition="center top 2px",e.githubLogo.setAttribute("src","assets/images/logos/GitHub-Mark-32px.png")};e.themeSwitch.addEventListener("click",n),e.themeSwitch.addEventListener("keydown",(e=>{" "===e.key&&(e.preventDefault(),n())})),window.addEventListener("load",(()=>{"light"===localStorage.getItem("theme")?o():a()}))})(),(()=>{const n=()=>{"true"===e.animationSwitch.getAttribute("aria-checked")?o():a(),t()},a=()=>{e.animationSwitch.setAttribute("aria-checked","true"),document.documentElement.style.scrollBehavior="smooth",e.accessibilityContainer.style.transition="top 0.75s ease-in-out",e.animationSwitch.textContent="Animations Enabled",e.themeSwitch.style.transition="background-position 0.3s ease-in",document.querySelector("#main-nav").style.transition="left 0.5s",Array.from(document.querySelectorAll(".label-arrow")).forEach((e=>{e.style.transition="transform 0.75s"})),Array.from(document.querySelectorAll(".task-details")).forEach((e=>{e.style.transition="height 0.5s"}))},o=()=>{e.animationSwitch.setAttribute("aria-checked","false"),document.documentElement.style.scrollBehavior="auto",e.animationSwitch.setAttribute("aria-checked","false"),e.animationSwitch.textContent="Animations Disabled",Array.from(document.querySelectorAll(".animated")).forEach((e=>{e.style.transition="none"}))};return e.animationSwitch.addEventListener("click",n),e.animationSwitch.addEventListener("keydown",(e=>{" "===e.key&&(e.preventDefault(),n())})),window.addEventListener("load",(()=>{"false"===localStorage.getItem("animations-enabled")?o():a()})),{animationsEnabled:a,animationsDisabled:o}})()),a={addGroupBtn:document.querySelector(".add-group-btn"),addTaskBtn:document.querySelector(".add-task-btn"),defaultGroups:["Important","Next 7 Days","Later","Eventually"],groupButtons:document.getElementsByClassName("group-btn"),groupOptionBtn:document.querySelector(".group-option-btn"),modalBox:document.querySelector(".modal-box"),modalContainer:document.querySelector(".modal-container"),selectedGroup:document.querySelector(".selected-group")},o=(()=>{const e=()=>{for(;a.modalBox.firstChild;)a.modalBox.removeChild(a.modalBox.firstChild);a.modalContainer.style.display="none"};return window.addEventListener("keydown",(t=>{"Escape"===t.key&&e()})),{createCloseBtn:()=>{const e=document.createElement("button");e.setAttribute("type","button"),e.setAttribute("aria-label","Close modal"),e.classList.add("modal-close-button","close-btn","focusable"),e.addEventListener("click",o.onClose),a.modalBox.appendChild(e)},onClose:e,onOpen:()=>{a.modalContainer.style.display="flex",document.querySelector(".modal-close-button").focus()}}})(),i=((()=>{const e=e=>{e.target.classList.contains("disable-button")?n.animationsDisabled():e.target.classList.contains("enable-button")&&n.animationsEnabled(),t(),o.onClose()};window.addEventListener("load",(()=>{0===localStorage.length&&(()=>{const t=document.createElement("h1"),n=document.createElement("p"),o=document.createElement("p"),i=document.createElement("button"),s=document.createElement("button");t.textContent="This site uses minimal animation effects.",n.textContent="Effects include moving menus and smooth scrolling. If you suffer from a vestibular disorder or otherwise prefer no animations, you can turn them off by clicking the first button below.",o.textContent="You can later change this setting in the Display & Accessibility tab at the top of the page.",i.setAttribute("type","button"),i.classList.add("disable-button","focusable","primary-btn"),i.textContent="DISABLE ANIMATIONS",i.addEventListener("click",e),s.setAttribute("type","button"),s.classList.add("enable-button","focusable","secondary-btn"),s.textContent="ENABLE ANIMATIONS",s.addEventListener("click",e),a.modalBox.appendChild(t),a.modalBox.appendChild(n),a.modalBox.appendChild(o),a.modalBox.appendChild(i),a.modalBox.appendChild(s),a.modalContainer.style.display="flex"})()}))})(),(()=>{const e=e=>{const t=document.createElement("form"),n=document.createElement("fieldset"),i=document.createElement("legend"),s=document.createElement("div"),l=document.createElement("label"),d=document.createElement("input"),r=document.createElement("input");if(o.createCloseBtn(),l.setAttribute("for","name-input"),l.textContent="Group Name",d.setAttribute("type","text"),d.setAttribute("required","true"),d.setAttribute("id","name-input"),d.classList.add("focusable"),e.target.classList.contains("add-group-btn"))i.textContent="Add a Group",r.setAttribute("type","submit"),r.setAttribute("value","ADD GROUP"),r.classList.add("submit-group-btn","primary-btn","focusable","submit"),s.appendChild(r);else if(e.target.classList.contains("group-option-btn")){const e=document.createElement("button"),t=document.createElement("button");i.textContent="Group Options",r.setAttribute("type","submit"),r.setAttribute("value","UPDATE"),r.classList.add("update-group-btn","secondary-btn","focusable","submit"),e.setAttribute("type","button"),e.classList.add("delete-group-btn","delete-btn","focusable"),e.textContent="DELETE GROUP",t.setAttribute("type","button"),t.classList.add("delete-completed-btn","delete-btn","focusable"),t.textContent="DELETE COMPLETED TASKS",a.defaultGroups.indexOf(a.selectedGroup.textContent)>=0&&(l.style.opacity="0.38",d.setAttribute("disabled","true"),d.style.opacity="0.38",r.setAttribute("disabled","true"),r.style.opacity="0.38",e.setAttribute("disabled","true"),e.style.opacity="0.38"),s.appendChild(r),s.appendChild(e),s.appendChild(t)}n.appendChild(i),n.appendChild(l),n.appendChild(d),n.appendChild(s),t.appendChild(n),a.modalBox.appendChild(t)};a.groupOptionBtn.addEventListener("click",(t=>{e(t),o.onOpen()})),a.addGroupBtn.addEventListener("click",(t=>{e(t),o.onOpen()}))})(),a.addTaskBtn.addEventListener("click",(e=>{(e=>{const t=document.createElement("form"),n=document.createElement("fieldset"),i=document.createElement("legend"),s=document.createElement("div"),l=document.createElement("label"),d=document.createElement("input"),r=document.createElement("label"),c=document.createElement("select"),u=document.createElement("label"),m=document.createElement("select"),p=document.createElement("option"),b=document.createElement("option"),h=document.createElement("label"),y=document.createElement("input"),E=document.createElement("label"),C=document.createElement("textarea");if(o.createCloseBtn(),l.setAttribute("for","name-input"),l.textContent="Task Name (required)",d.setAttribute("type","text"),d.setAttribute("id","name-input"),d.setAttribute("placeholder","Enter a task name"),d.setAttribute("required","true"),d.className="focusable",r.setAttribute("for","group-select"),r.textContent="Group",c.setAttribute("id","group-select"),c.className="focusable",u.setAttribute("for","priority-select"),u.textContent="Priority",m.setAttribute("id","priority-select"),m.className="focusable",p.textContent="Normal",b.textContent="Important",m.appendChild(p),m.appendChild(b),h.setAttribute("for","date-select"),h.textContent="Due Date (optional)",y.setAttribute("type","date"),y.setAttribute("id","date-select"),y.className="focusable",E.setAttribute("for","notes-input"),E.textContent="Additional Notes",C.setAttribute("id","notes-input"),C.setAttribute("placeholder","Enter any additional notes for the task"),C.className="focusable",e.target.textContent.includes("ADD TASK")){const e=document.createElement("input"),t=document.createElement("input");i.textContent="Add a Task",e.setAttribute("type","submit"),e.setAttribute("value","ADD ONE"),e.setAttribute("aria-label","Add task and close modal"),e.classList.add("add-single-btn","primary-btn","submit","focusable"),t.setAttribute("type","submit"),t.setAttribute("value","ADD MANY"),t.setAttribute("aria-label","Add task and keep modal open"),t.classList.add("add-many-btn","secondary-btn","submit","focusable"),s.appendChild(e),s.appendChild(t)}else if("EDIT"===e.target.textContent){const e=document.createElement("input");i.textContent="Edit Task",e.setAttribute("type","submit"),e.setAttribute("value","UPDATE"),e.setAttribute("aria-label","Update task and close modal"),e.classList.add("update-task-btn","primary-btn","focusable"),s.appendChild(e)}n.appendChild(i),n.appendChild(l),n.appendChild(d),n.appendChild(r),n.appendChild(document.createElement("br")),n.appendChild(c),n.appendChild(document.createElement("br")),n.appendChild(u),n.appendChild(document.createElement("br")),n.appendChild(m),n.appendChild(document.createElement("br")),n.appendChild(h),n.appendChild(document.createElement("br")),n.appendChild(y),n.appendChild(document.createElement("br")),n.appendChild(E),n.appendChild(C),n.appendChild(s),t.appendChild(n),a.modalBox.appendChild(t)})(e),o.onOpen()})),{defaultGroups:["Important","Next 7 Days","Later","Eventually"],groupButtons:document.getElementsByClassName("group-btn"),modalBox:document.querySelector(".modal-box")}),s=(()=>{const e=JSON.parse(localStorage.getItem("toDo-list"))||{Example:[{taskName:"Do the dishes",priority:"Normal",due:"",notes:"Let the pans soak, put the plates in the dishwasher, wash the mugs by hand.\n\nWash pans after 30 minutes soaking."},{taskName:"Bring Muffin to vet",priority:"Important",due:"2021-03-05",notes:"Pack her favorite toy so she stays calm."}]};return{list:e,saveToLocal:()=>{localStorage.setItem("toDo-list",JSON.stringify(e))}}})();Array.from(i.groupButtons).forEach((e=>{e.addEventListener("click",(()=>{Array.from(i.groupButtons).forEach((e=>{e.classList.remove("active")})),e.classList.add("active")}))})),i.modalBox.addEventListener("click",(e=>{switch(e.target){case document.querySelector(".submit-group-btn"):if(e.preventDefault(),t=document.querySelector("#name-input").value,i.defaultGroups.indexOf(t)>=0||Object.keys(s.list).indexOf(t)>=0||""===t)return void alert("Please  a new name.");(e=>{s.list[e]=[],s.saveToLocal(),console.log(s.list)})(document.querySelector("#name-input").value),s.saveToLocal(),o.onClose();break;default:return}var t})),console.log(s.list);const l={menuContainer:document.querySelector("#main-nav"),menuOpenButton:document.querySelector(".menu-button"),menuCloseButton:document.querySelector(".menu-close-button")};(()=>{const e=()=>{document.documentElement.scrollWidth>763?(l.menuContainer.style.visibility="visible",l.menuContainer.style.left="0"):(l.menuContainer.style.visibility="hidden",l.menuContainer.style.left="-800px")};window.addEventListener("resize",e),window.addEventListener("load",e);const t=()=>{"hidden"===l.menuContainer.style.visibility?(l.menuContainer.style.visibility="visible",l.menuContainer.style.left="0",l.menuCloseButton.focus()):(l.menuContainer.style.left="-800px",setTimeout((()=>{l.menuContainer.style.visibility="hidden"}),600),l.menuOpenButton.focus())};l.menuOpenButton.addEventListener("click",t),l.menuCloseButton.addEventListener("click",t)})()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc2l0ZS1zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kYWxzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9sb2dpYy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsiRE9NIiwiYWNjZXNzaWJpbGl0eUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFuaW1hdGlvblN3aXRjaCIsImdpdGh1YkxvZ28iLCJ0aGVtZVN3aXRjaCIsInNldHRpbmdzIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImRvY3VtZW50RWxlbWVudCIsImdldEF0dHJpYnV0ZSIsImFjY2Vzc2liaWxpdHlPcHRpb25zIiwiX3RvZ2dsZVRoZW1lIiwiZSIsIl9kYXJrVGhlbWUiLCJfbGlnaHRUaGVtZSIsInNldEF0dHJpYnV0ZSIsInN0eWxlIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImtleSIsInByZXZlbnREZWZhdWx0Iiwid2luZG93IiwiZ2V0SXRlbSIsIl90b2dnbGVBbmltYXRpb25zIiwiYW5pbWF0aW9uc0Rpc2FibGVkIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJzY3JvbGxCZWhhdmlvciIsInRyYW5zaXRpb24iLCJ0ZXh0Q29udGVudCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaXRlbSIsImFkZEdyb3VwQnRuIiwiYWRkVGFza0J0biIsImRlZmF1bHRHcm91cHMiLCJncm91cEJ1dHRvbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ3JvdXBPcHRpb25CdG4iLCJtb2RhbEJveCIsIm1vZGFsQ29udGFpbmVyIiwic2VsZWN0ZWRHcm91cCIsImdlbmVyYWxNb2RhbCIsIm9uQ2xvc2UiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJkaXNwbGF5IiwiY3JlYXRlQ2xvc2VCdG4iLCJjbG9zZUJ0biIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsIm9uT3BlbiIsImZvY3VzIiwiX3NlbGVjdE9wdGlvbiIsInRhcmdldCIsImNvbnRhaW5zIiwibGVuZ3RoIiwiaGVhZGluZyIsInBhcmExIiwicGFyYTIiLCJkaXNhYmxlQnV0dG9uIiwiZW5hYmxlQnV0dG9uIiwiX3JlbmRlciIsImZvcm0iLCJmaWVsZHNldCIsImxlZ2VuZCIsImRpdiIsIm5hbWVMYWJlbCIsIm5hbWVJbnB1dCIsIm1haW5CdG4iLCJkZWxldGVHcm91cCIsImRlbGV0ZUNvbXBsZXRlZCIsImluZGV4T2YiLCJvcGFjaXR5IiwiZ3JvdXBMYWJlbCIsImdyb3VwU2VsZWN0IiwicHJpb3JpdHlMYWJlbCIsInByaW9yaXR5U2VsZWN0IiwicHJpb3JpdHlPcHRpb24xIiwicHJpb3JpdHlPcHRpb24yIiwiZGF0ZUxhYmVsIiwiZGF0ZUlucHV0Iiwibm90ZXNMYWJlbCIsIm5vdGVzSW5wdXQiLCJjbGFzc05hbWUiLCJpbmNsdWRlcyIsImFkZE9uZUJ0biIsImFkZE1hbnlCdG4iLCJlZGl0QnRuIiwidG9EbyIsImxpc3QiLCJKU09OIiwicGFyc2UiLCJFeGFtcGxlIiwidGFza05hbWUiLCJwcmlvcml0eSIsImR1ZSIsIm5vdGVzIiwic2F2ZVRvTG9jYWwiLCJzdHJpbmdpZnkiLCJidXR0b24iLCJyZW1vdmUiLCJuYW1lIiwidmFsdWUiLCJPYmplY3QiLCJrZXlzIiwiYWxlcnQiLCJjb25zb2xlIiwibG9nIiwiY3JlYXRlIiwibWVudUNvbnRhaW5lciIsIm1lbnVPcGVuQnV0dG9uIiwibWVudUNsb3NlQnV0dG9uIiwiX29uU2NyZWVuU2l6ZSIsInNjcm9sbFdpZHRoIiwidmlzaWJpbGl0eSIsImxlZnQiLCJfdG9nZ2xlTWVudSIsInNldFRpbWVvdXQiXSwibWFwcGluZ3MiOiJ5QkFFQSxNQUFNQSxFQVFHLENBQ0xDLHVCQVBJQyxTQUFTQyxjQUFjLDRCQVEzQkMs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UCxjQUFjakcsTUFBTXNHLFlBQzFCLEVBQUlMLGNBQWNqRyxNQUFNc0csV0FBYSxVQUNyQyxFQUFJTCxjQUFjakcsTUFBTXVHLEtBQU8sSUFDL0IsRUFBSUosZ0JBQWdCNUQsVUFFcEIsRUFBSTBELGNBQWNqRyxNQUFNdUcsS0FBTyxTQUMvQkUsWUFBVyxLQUNULEVBQUlSLGNBQWNqRyxNQUFNc0csV0FBYSxXQUNwQyxLQUNILEVBQUlKLGVBQWUzRCxVQUl2QixFQUFJMkQsZUFBZWhHLGlCQUFpQixRQUFTc0csR0FDN0MsRUFBSUwsZ0JBQWdCakcsaUJBQWlCLFFBQVNzRyxJQTdCekIsRyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgRE9NID0gKCgpID0+IHtcbiAgY29uc3QgYWNjZXNzaWJpbGl0eUNvbnRhaW5lciA9IFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FjY2Vzc2liaWxpdHktY29udGFpbmVyXCIpO1xuICBjb25zdCBhbmltYXRpb25Td2l0Y2ggPSBcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhbmltYXRpb24tc3dpdGNoXCIpO1xuICBjb25zdCBnaXRodWJMb2dvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNsb3dlci1uYXYgaW1nXCIpO1xuICBjb25zdCB0aGVtZVN3aXRjaCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGhlbWUtc3dpdGNoXCIpO1xuXG4gIHJldHVybiB7XG4gICAgYWNjZXNzaWJpbGl0eUNvbnRhaW5lcixcbiAgICBhbmltYXRpb25Td2l0Y2gsXG4gICAgZ2l0aHViTG9nbyxcbiAgICB0aGVtZVN3aXRjaFxuICB9XG59KSgpO1xuXG5jb25zdCBzZXR0aW5ncyA9ICgoKSA9PiB7XG4gIGNvbnN0IHNhdmVUb0xvY2FsID0gKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFxuICAgICAgXCJ0aGVtZVwiLCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGhlbWVcIikpO1xuXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJhbmltYXRpb25zLWVuYWJsZWRcIiwgXG4gICAgICAgIERPTS5hbmltYXRpb25Td2l0Y2guZ2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIpKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHNhdmVUb0xvY2FsXG4gIH07XG59KSgpO1xuXG5jb25zdCBkaXNwbGF5T3B0aW9ucyA9ICgoKSA9PiB7XG4gIGNvbnN0IF9vbkxvYWQgPSAoKSA9PiB7XG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidGhlbWVcIikgPT09IFwibGlnaHRcIikge1xuICAgICAgX2xpZ2h0VGhlbWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX2RhcmtUaGVtZSgpO1xuICAgIH07XG4gIH07XG5cbiAgY29uc3QgX3RvZ2dsZVRoZW1lID0gKGUpID0+IHtcbiAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZShcInRoZW1lXCIpID09PSBcImxpZ2h0XCIpIHtcbiAgICAgIF9kYXJrVGhlbWUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX2xpZ2h0VGhlbWUoKTtcbiAgICB9O1xuICAgIHNldHRpbmdzLnNhdmVUb0xvY2FsKCk7XG4gIH07XG5cbiAgY29uc3QgX2RhcmtUaGVtZSA9ICgpID0+IHtcbiAgICBET00udGhlbWVTd2l0Y2guc2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIsIFwiZmFsc2VcIik7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcInRoZW1lXCIsIFwiZGFya1wiKTtcbiAgICBET00udGhlbWVTd2l0Y2guc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gXCJjZW50ZXIgYm90dG9tIC0wLjhyZW1cIjtcbiAgICBET00uZ2l0aHViTG9nby5zZXRBdHRyaWJ1dGUoXCJzcmNcIixcbiAgICAgICAgXCJhc3NldHMvaW1hZ2VzL2xvZ29zL0dpdEh1Yi1NYXJrLUxpZ2h0LTMycHgucG5nXCIpO1xuICB9O1xuXG4gIGNvbnN0IF9saWdodFRoZW1lID0gKCkgPT4ge1xuICAgIERPTS50aGVtZVN3aXRjaC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNoZWNrZWRcIiwgXCJ0cnVlXCIpO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0aGVtZVwiLCBcImxpZ2h0XCIpO1xuICAgIERPTS50aGVtZVN3aXRjaC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcImNlbnRlciB0b3AgMnB4XCI7XG4gICAgRE9NLmdpdGh1YkxvZ28uc2V0QXR0cmlidXRlKFwic3JjXCIsXG4gICAgXCJhc3NldHMvaW1hZ2VzL2xvZ29zL0dpdEh1Yi1NYXJrLTMycHgucG5nXCIpO1xuICB9O1xuXG4gIERPTS50aGVtZVN3aXRjaC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX3RvZ2dsZVRoZW1lKTtcbiAgRE9NLnRoZW1lU3dpdGNoLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIiBcIikge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgX3RvZ2dsZVRoZW1lKCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIF9vbkxvYWQpO1xufSkoKTtcblxuY29uc3QgYWNjZXNzaWJpbGl0eU9wdGlvbnMgPSAoKCkgPT4ge1xuICBjb25zdCBfb25Mb2FkID0gKCkgPT4ge1xuICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImFuaW1hdGlvbnMtZW5hYmxlZFwiKSA9PT0gXCJmYWxzZVwiKSB7XG4gICAgICBhbmltYXRpb25zRGlzYWJsZWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYW5pbWF0aW9uc0VuYWJsZWQoKTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IF90b2dnbGVBbmltYXRpb25zID0gKCkgPT4ge1xuICAgIGlmIChET00uYW5pbWF0aW9uU3dpdGNoLmdldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiKSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgIGFuaW1hdGlvbnNEaXNhYmxlZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbmltYXRpb25zRW5hYmxlZCgpO1xuICAgIH07XG4gICAgc2V0dGluZ3Muc2F2ZVRvTG9jYWwoKTtcbiAgfTtcblxuICBjb25zdCBhbmltYXRpb25zRW5hYmxlZCA9ICgpID0+IHtcbiAgICBET00uYW5pbWF0aW9uU3dpdGNoLnNldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiLCBcInRydWVcIik7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNjcm9sbEJlaGF2aW9yID0gXCJzbW9vdGhcIjtcbiAgICBET00uYWNjZXNzaWJpbGl0eUNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gXCJ0b3AgMC43NXMgZWFzZS1pbi1vdXRcIjtcbiAgICBET00uYW5pbWF0aW9uU3dpdGNoLnRleHRDb250ZW50ID0gXCJBbmltYXRpb25zIEVuYWJsZWRcIjtcbiAgICBET00udGhlbWVTd2l0Y2guc3R5bGUudHJhbnNpdGlvbiA9IFwiYmFja2dyb3VuZC1wb3NpdGlvbiAwLjNzIGVhc2UtaW5cIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21haW4tbmF2XCIpLnN0eWxlLnRyYW5zaXRpb24gPSBcImxlZnQgMC41c1wiO1xuICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5sYWJlbC1hcnJvd1wiKSkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uc3R5bGUudHJhbnNpdGlvbiA9IFwidHJhbnNmb3JtIDAuNzVzXCI7XG4gICAgfSk7XG4gICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhc2stZGV0YWlsc1wiKSkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uc3R5bGUudHJhbnNpdGlvbiA9IFwiaGVpZ2h0IDAuNXNcIjtcbiAgICB9KTtcbiAgfTtcbiAgICAgICAgXG4gIGNvbnN0IGFuaW1hdGlvbnNEaXNhYmxlZCA9ICgpID0+IHtcbiAgICBET00uYW5pbWF0aW9uU3dpdGNoLnNldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zY3JvbGxCZWhhdmlvciA9IFwiYXV0b1wiO1xuICAgIERPTS5hbmltYXRpb25Td2l0Y2guc2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIsIFwiZmFsc2VcIik7XG4gICAgRE9NLmFuaW1hdGlvblN3aXRjaC50ZXh0Q29udGVudCA9IFwiQW5pbWF0aW9ucyBEaXNhYmxlZFwiO1xuICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbmltYXRlZFwiKSkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uc3R5bGUudHJhbnNpdGlvbiA9IFwibm9uZVwiO1xuICAgIH0pO1xuICB9O1xuXG4gIERPTS5hbmltYXRpb25Td2l0Y2guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF90b2dnbGVBbmltYXRpb25zKTtcbiAgRE9NLmFuaW1hdGlvblN3aXRjaC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCIgXCIpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIF90b2dnbGVBbmltYXRpb25zKCk7XG4gICAgfTtcbiAgfSk7XG4gIFxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgX29uTG9hZCk7XG5cbiAgcmV0dXJuIHtcbiAgICBhbmltYXRpb25zRW5hYmxlZCxcbiAgICBhbmltYXRpb25zRGlzYWJsZWRcbiAgfVxufSkoKTtcblxuZXhwb3J0IHthY2Nlc3NpYmlsaXR5T3B0aW9ucywgZGlzcGxheU9wdGlvbnMsIHNldHRpbmdzfSIsImltcG9ydCB7YWNjZXNzaWJpbGl0eU9wdGlvbnMsIHNldHRpbmdzfSBmcm9tIFwiLi9zaXRlLXNldHRpbmdzXCI7XG5cbmNvbnN0IERPTSA9ICgoKSA9PiB7XG4gIGNvbnN0IGFkZEdyb3VwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtZ3JvdXAtYnRuXCIpO1xuICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFzay1idG5cIik7XG4gIGNvbnN0IGRlZmF1bHRHcm91cHMgPSBbXCJJbXBvcnRhbnRcIiwgXCJOZXh0IDcgRGF5c1wiLCBcIkxhdGVyXCIsIFwiRXZlbnR1YWxseVwiXTtcbiAgY29uc3QgZ3JvdXBCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyb3VwLWJ0blwiKTtcbiAgY29uc3QgZ3JvdXBPcHRpb25CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyb3VwLW9wdGlvbi1idG5cIik7XG4gIGNvbnN0IG1vZGFsQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1ib3hcIik7XG4gIGNvbnN0IG1vZGFsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1jb250YWluZXJcIik7XG4gIGNvbnN0IHNlbGVjdGVkR3JvdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkLWdyb3VwXCIpO1xuICByZXR1cm4ge1xuICAgIGFkZEdyb3VwQnRuLFxuICAgIGFkZFRhc2tCdG4sXG4gICAgZGVmYXVsdEdyb3VwcyxcbiAgICBncm91cEJ1dHRvbnMsXG4gICAgZ3JvdXBPcHRpb25CdG4sXG4gICAgbW9kYWxCb3gsXG4gICAgbW9kYWxDb250YWluZXIsXG4gICAgc2VsZWN0ZWRHcm91cFxuICB9XG59KSgpO1xuXG5jb25zdCBnZW5lcmFsTW9kYWwgPSAoKCkgPT4ge1xuICBjb25zdCBvbkNsb3NlID0gKCkgPT4ge1xuICAgIHdoaWxlIChET00ubW9kYWxCb3guZmlyc3RDaGlsZCkge1xuICAgICAgRE9NLm1vZGFsQm94LnJlbW92ZUNoaWxkKERPTS5tb2RhbEJveC5maXJzdENoaWxkKVxuICAgIH07XG4gICAgRE9NLm1vZGFsQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfTtcblxuICBjb25zdCBvbk9wZW4gPSAoKSA9PiB7XG4gICAgRE9NLm1vZGFsQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWNsb3NlLWJ1dHRvblwiKS5mb2N1cygpO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZUNsb3NlQnRuID0gKCkgPT4ge1xuICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjbG9zZUJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgIGNsb3NlQnRuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgXCJDbG9zZSBtb2RhbFwiKTtcbiAgICBjbG9zZUJ0bi5jbGFzc0xpc3QuYWRkKFwibW9kYWwtY2xvc2UtYnV0dG9uXCIsIFwiY2xvc2UtYnRuXCIsIFwiZm9jdXNhYmxlXCIpO1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZW5lcmFsTW9kYWwub25DbG9zZSk7XG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKGNsb3NlQnRuKTtcbiAgfTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIG9uQ2xvc2UoKTtcbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGNyZWF0ZUNsb3NlQnRuLFxuICAgIG9uQ2xvc2UsXG4gICAgb25PcGVuXG4gIH1cbn0pKCk7XG5cbmNvbnN0IHdhcm5pbmdNb2RhbCA9ICgoKSA9PiB7XG4gIGNvbnN0IF9zZWxlY3RPcHRpb24gPSAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlLWJ1dHRvblwiKSkge1xuICAgICAgYWNjZXNzaWJpbGl0eU9wdGlvbnMuYW5pbWF0aW9uc0Rpc2FibGVkKCk7XG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJlbmFibGUtYnV0dG9uXCIpKSB7XG4gICAgICBhY2Nlc3NpYmlsaXR5T3B0aW9ucy5hbmltYXRpb25zRW5hYmxlZCgpO1xuICAgIH07XG4gICAgc2V0dGluZ3Muc2F2ZVRvTG9jYWwoKTtcbiAgICBnZW5lcmFsTW9kYWwub25DbG9zZSgpO1xuICB9O1xuXG4gIGNvbnN0IF9yZW5kZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICBjb25zdCBwYXJhMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGNvbnN0IHBhcmEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY29uc3QgZW5hYmxlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblxuICAgIGhlYWRpbmcudGV4dENvbnRlbnQgPSBcIlRoaXMgc2l0ZSB1c2VzIG1pbmltYWwgYW5pbWF0aW9uIGVmZmVjdHMuXCI7XG5cbiAgICBwYXJhMS50ZXh0Q29udGVudCA9IFwiRWZmZWN0cyBpbmNsdWRlIG1vdmluZyBtZW51cyBhbmQgc21vb3RoIHNjcm9sbGluZy4gSWYgeW91IHN1ZmZlciBmcm9tIGEgdmVzdGlidWxhciBkaXNvcmRlciBvciBvdGhlcndpc2UgcHJlZmVyIG5vIGFuaW1hdGlvbnMsIHlvdSBjYW4gdHVybiB0aGVtIG9mZiBieSBjbGlja2luZyB0aGUgZmlyc3QgYnV0dG9uIGJlbG93LlwiO1xuICBcbiAgICBwYXJhMi50ZXh0Q29udGVudD0gXCJZb3UgY2FuIGxhdGVyIGNoYW5nZSB0aGlzIHNldHRpbmcgaW4gdGhlIERpc3BsYXkgJiBBY2Nlc3NpYmlsaXR5IHRhYiBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlLlwiO1xuICBcbiAgICBkaXNhYmxlQnV0dG9uLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XG4gICAgZGlzYWJsZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZS1idXR0b25cIiwgXCJmb2N1c2FibGVcIiwgXCJwcmltYXJ5LWJ0blwiKTtcbiAgICBkaXNhYmxlQnV0dG9uLnRleHRDb250ZW50ID0gXCJESVNBQkxFIEFOSU1BVElPTlNcIjtcbiAgICBkaXNhYmxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfc2VsZWN0T3B0aW9uKTtcbiAgICBcbiAgICBlbmFibGVCdXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICBlbmFibGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImVuYWJsZS1idXR0b25cIiwgXCJmb2N1c2FibGVcIiwgXCJzZWNvbmRhcnktYnRuXCIpO1xuICAgIGVuYWJsZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRU5BQkxFIEFOSU1BVElPTlNcIjtcbiAgICBlbmFibGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF9zZWxlY3RPcHRpb24pO1xuXG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKGhlYWRpbmcpO1xuICAgIERPTS5tb2RhbEJveC5hcHBlbmRDaGlsZChwYXJhMSk7XG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKHBhcmEyKTtcbiAgICBET00ubW9kYWxCb3guYXBwZW5kQ2hpbGQoZGlzYWJsZUJ1dHRvbik7XG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKGVuYWJsZUJ1dHRvbik7XG5cbiAgICBET00ubW9kYWxDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICB9O1xuXG4gIGNvbnN0IF9vbkxvYWQgPSAoKSA9PiB7XG4gICAgaWYgKGxvY2FsU3RvcmFnZS5sZW5ndGggPT09IDApIHtcbiAgICAgIF9yZW5kZXIoKTtcbiAgICB9O1xuICB9O1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBfb25Mb2FkKTtcbn0pKCk7XG5cbmNvbnN0IGdyb3VwTW9kYWwgPSAoKCkgPT4ge1xuICBjb25zdCBfcmVuZGVyID0gKGUpID0+IHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgY29uc3QgZmllbGRzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIik7XG4gICAgY29uc3QgbGVnZW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxlZ2VuZFwiKTtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgY29uc3QgbmFtZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBjb25zdCBtYWluQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXG4gICAgZ2VuZXJhbE1vZGFsLmNyZWF0ZUNsb3NlQnRuKCk7XG5cbiAgICBuYW1lTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibmFtZS1pbnB1dFwiKTtcbiAgICBuYW1lTGFiZWwudGV4dENvbnRlbnQgPSBcIkdyb3VwIE5hbWVcIjtcbiAgICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsIFwidHJ1ZVwiKTtcbiAgICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJuYW1lLWlucHV0XCIpO1xuICAgIG5hbWVJbnB1dC5jbGFzc0xpc3QuYWRkKFwiZm9jdXNhYmxlXCIpO1xuXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFkZC1ncm91cC1idG5cIikpIHtcbiAgICAgIGxlZ2VuZC50ZXh0Q29udGVudCA9IFwiQWRkIGEgR3JvdXBcIjtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJBREQgR1JPVVBcIik7XG4gICAgICBtYWluQnRuLmNsYXNzTGlzdC5hZGQoXCJzdWJtaXQtZ3JvdXAtYnRuXCIsIFwicHJpbWFyeS1idG5cIiwgXCJmb2N1c2FibGVcIiwgXCJzdWJtaXRcIik7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQobWFpbkJ0bik7XG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJncm91cC1vcHRpb24tYnRuXCIpKSB7XG4gICAgICBjb25zdCBkZWxldGVHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBjb25zdCBkZWxldGVDb21wbGV0ZWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG4gICAgICBsZWdlbmQudGV4dENvbnRlbnQgPSBcIkdyb3VwIE9wdGlvbnNcIjtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJVUERBVEVcIik7XG4gICAgICBtYWluQnRuLmNsYXNzTGlzdC5hZGQoXCJ1cGRhdGUtZ3JvdXAtYnRuXCIsIFwic2Vjb25kYXJ5LWJ0blwiLCBcImZvY3VzYWJsZVwiLCBcInN1Ym1pdFwiKTtcblxuICAgICAgZGVsZXRlR3JvdXAuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgIGRlbGV0ZUdyb3VwLmNsYXNzTGlzdC5hZGQoXCJkZWxldGUtZ3JvdXAtYnRuXCIsIFwiZGVsZXRlLWJ0blwiLCBcImZvY3VzYWJsZVwiKTtcbiAgICAgIGRlbGV0ZUdyb3VwLnRleHRDb250ZW50ID0gXCJERUxFVEUgR1JPVVBcIjtcbiAgICAgIGRlbGV0ZUNvbXBsZXRlZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgICAgZGVsZXRlQ29tcGxldGVkLmNsYXNzTGlzdC5hZGQoXCJkZWxldGUtY29tcGxldGVkLWJ0blwiLCBcImRlbGV0ZS1idG5cIiwgXCJmb2N1c2FibGVcIik7XG4gICAgICBkZWxldGVDb21wbGV0ZWQudGV4dENvbnRlbnQgPSBcIkRFTEVURSBDT01QTEVURUQgVEFTS1NcIjtcblxuICAgICAgaWYgKERPTS5kZWZhdWx0R3JvdXBzLmluZGV4T2YoRE9NLnNlbGVjdGVkR3JvdXAudGV4dENvbnRlbnQpID49IDApIHtcbiAgICAgICAgbmFtZUxhYmVsLnN0eWxlLm9wYWNpdHkgPSBcIjAuMzhcIjtcbiAgICAgICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgbmFtZUlucHV0LnN0eWxlLm9wYWNpdHkgPSBcIjAuMzhcIjtcbiAgICAgICAgbWFpbkJ0bi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICAgIG1haW5CdG4uc3R5bGUub3BhY2l0eSA9IFwiMC4zOFwiO1xuICAgICAgICBkZWxldGVHcm91cC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICAgIGRlbGV0ZUdyb3VwLnN0eWxlLm9wYWNpdHkgPSBcIjAuMzhcIjtcbiAgICAgIH07XG5cbiAgICAgIGRpdi5hcHBlbmRDaGlsZChtYWluQnRuKTtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChkZWxldGVHcm91cCk7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZGVsZXRlQ29tcGxldGVkKTtcbiAgICB9O1xuXG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobGVnZW5kKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChuYW1lTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKG5hbWVJbnB1dCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICBmb3JtLmFwcGVuZENoaWxkKGZpZWxkc2V0KTtcbiAgICBET00ubW9kYWxCb3guYXBwZW5kQ2hpbGQoZm9ybSk7XG4gIH07XG5cbiAgRE9NLmdyb3VwT3B0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIF9yZW5kZXIoZSk7XG4gICAgZ2VuZXJhbE1vZGFsLm9uT3BlbigpO1xuICB9KTtcblxuICBET00uYWRkR3JvdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgX3JlbmRlcihlKTtcbiAgICBnZW5lcmFsTW9kYWwub25PcGVuKCk7XG4gIH0pO1xufSkoKTtcblxuY29uc3QgdGFza01vZGFsID0gKCgpID0+IHtcbiAgY29uc3QgX3JlbmRlciA9IChlKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICAgIGNvbnN0IGZpZWxkc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpO1xuICAgIGNvbnN0IGxlZ2VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsZWdlbmRcIik7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGNvbnN0IG5hbWVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cbiAgICBjb25zdCBncm91cExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGNvbnN0IGdyb3VwU2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcblxuICAgIGNvbnN0IHByaW9yaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgY29uc3QgcHJpb3JpdHlTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICAgIGNvbnN0IHByaW9yaXR5T3B0aW9uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgY29uc3QgcHJpb3JpdHlPcHRpb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcblxuICAgIGNvbnN0IGRhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBjb25zdCBkYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgY29uc3Qgbm90ZXNMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBjb25zdCBub3Rlc0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuXG4gICAgZ2VuZXJhbE1vZGFsLmNyZWF0ZUNsb3NlQnRuKCk7XG5cbiAgICBuYW1lTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibmFtZS1pbnB1dFwiKTtcbiAgICBuYW1lTGFiZWwudGV4dENvbnRlbnQgPSBcIlRhc2sgTmFtZSAocmVxdWlyZWQpXCI7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIG5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm5hbWUtaW5wdXRcIik7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiRW50ZXIgYSB0YXNrIG5hbWVcIik7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsIFwidHJ1ZVwiKTtcbiAgICBuYW1lSW5wdXQuY2xhc3NOYW1lID0gXCJmb2N1c2FibGVcIjtcblxuICAgIGdyb3VwTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZ3JvdXAtc2VsZWN0XCIpO1xuICAgIGdyb3VwTGFiZWwudGV4dENvbnRlbnQgPSBcIkdyb3VwXCI7XG4gICAgZ3JvdXBTZWxlY3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJncm91cC1zZWxlY3RcIik7XG4gICAgZ3JvdXBTZWxlY3QuY2xhc3NOYW1lID0gXCJmb2N1c2FibGVcIjtcbiAgICBcbiAgICBwcmlvcml0eUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInByaW9yaXR5LXNlbGVjdFwiKTtcbiAgICBwcmlvcml0eUxhYmVsLnRleHRDb250ZW50ID0gXCJQcmlvcml0eVwiO1xuICAgIHByaW9yaXR5U2VsZWN0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJpb3JpdHktc2VsZWN0XCIpO1xuICAgIHByaW9yaXR5U2VsZWN0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG4gICAgcHJpb3JpdHlPcHRpb24xLnRleHRDb250ZW50ID0gXCJOb3JtYWxcIjtcbiAgICBwcmlvcml0eU9wdGlvbjIudGV4dENvbnRlbnQgPSBcIkltcG9ydGFudFwiO1xuICAgIHByaW9yaXR5U2VsZWN0LmFwcGVuZENoaWxkKHByaW9yaXR5T3B0aW9uMSk7XG4gICAgcHJpb3JpdHlTZWxlY3QuYXBwZW5kQ2hpbGQocHJpb3JpdHlPcHRpb24yKTtcblxuICAgIGRhdGVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkYXRlLXNlbGVjdFwiKTtcbiAgICBkYXRlTGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZSBEYXRlIChvcHRpb25hbClcIjtcbiAgICBkYXRlSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgZGF0ZUlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGF0ZS1zZWxlY3RcIik7XG4gICAgZGF0ZUlucHV0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG5cbiAgICBub3Rlc0xhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcIm5vdGVzLWlucHV0XCIpO1xuICAgIG5vdGVzTGFiZWwudGV4dENvbnRlbnQgPSBcIkFkZGl0aW9uYWwgTm90ZXNcIjtcbiAgICBub3Rlc0lucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwibm90ZXMtaW5wdXRcIik7XG4gICAgbm90ZXNJbnB1dC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcIkVudGVyIGFueSBhZGRpdGlvbmFsIG5vdGVzIGZvciB0aGUgdGFza1wiKTtcbiAgICBub3Rlc0lucHV0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG5cbiAgICBpZiAoZS50YXJnZXQudGV4dENvbnRlbnQuaW5jbHVkZXMoXCJBREQgVEFTS1wiKSkge1xuICAgICAgY29uc3QgYWRkT25lQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgY29uc3QgYWRkTWFueUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgbGVnZW5kLnRleHRDb250ZW50ID0gXCJBZGQgYSBUYXNrXCI7XG5cbiAgICAgIGFkZE9uZUJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICAgICAgYWRkT25lQnRuLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiQUREIE9ORVwiKTtcbiAgICAgIGFkZE9uZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiQWRkIHRhc2sgYW5kIGNsb3NlIG1vZGFsXCIpO1xuICAgICAgYWRkT25lQnRuLmNsYXNzTGlzdC5hZGQoXCJhZGQtc2luZ2xlLWJ0blwiLCBcInByaW1hcnktYnRuXCIsXCJzdWJtaXRcIiwgXCJmb2N1c2FibGVcIik7XG5cbiAgICAgIGFkZE1hbnlCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIGFkZE1hbnlCdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJBREQgTUFOWVwiKTtcbiAgICAgIGFkZE1hbnlCdG4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIkFkZCB0YXNrIGFuZCBrZWVwIG1vZGFsIG9wZW5cIik7XG4gICAgICBhZGRNYW55QnRuLmNsYXNzTGlzdC5hZGQoXCJhZGQtbWFueS1idG5cIiwgXCJzZWNvbmRhcnktYnRuXCIsIFwic3VibWl0XCIsIFwiZm9jdXNhYmxlXCIpO1xuXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoYWRkT25lQnRuKTtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChhZGRNYW55QnRuKTtcbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LnRleHRDb250ZW50ID09PSAoXCJFRElUXCIpKSB7XG4gICAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXG4gICAgICBsZWdlbmQudGV4dENvbnRlbnQgPSBcIkVkaXQgVGFza1wiO1xuXG4gICAgICBlZGl0QnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJzdWJtaXRcIik7XG4gICAgICBlZGl0QnRuLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiVVBEQVRFXCIpO1xuICAgICAgZWRpdEJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiVXBkYXRlIHRhc2sgYW5kIGNsb3NlIG1vZGFsXCIpO1xuICAgICAgZWRpdEJ0bi5jbGFzc0xpc3QuYWRkKFwidXBkYXRlLXRhc2stYnRuXCIsIFwicHJpbWFyeS1idG5cIiwgXCJmb2N1c2FibGVcIik7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZWRpdEJ0bik7XG4gICAgfTtcblxuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGxlZ2VuZCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobmFtZUxhYmVsKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChuYW1lSW5wdXQpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGdyb3VwTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZ3JvdXBTZWxlY3QpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQocHJpb3JpdHlMYWJlbCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChwcmlvcml0eVNlbGVjdCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChkYXRlTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZGF0ZUlucHV0KTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKG5vdGVzTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKG5vdGVzSW5wdXQpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRpdik7XG4gICAgZm9ybS5hcHBlbmRDaGlsZChmaWVsZHNldCk7XG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKGZvcm0pO1xuICB9O1xuXG4gIERPTS5hZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIF9yZW5kZXIoZSk7XG4gICAgZ2VuZXJhbE1vZGFsLm9uT3BlbigpO1xuICB9KTtcbn0pKCk7XG5cbmV4cG9ydCB7Z2VuZXJhbE1vZGFsLCB3YXJuaW5nTW9kYWwsIGdyb3VwTW9kYWwsIHRhc2tNb2RhbH0iLCJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCBmb3JtYXREaXN0YW5jZVRvTm93U3RyaWN0IGZyb20gXCJkYXRlLWZucy9mb3JtYXREaXN0YW5jZVRvTm93U3RyaWN0XCI7XG5pbXBvcnQgZGlmZmVyZW5jZUluRGF5cyBmcm9tIFwiZGF0ZS1mbnMvZGlmZmVyZW5jZUluRGF5c1wiO1xuaW1wb3J0IGlzVG9kYXkgZnJvbSBcImRhdGUtZm5zL2lzVG9kYXlcIjtcbmltcG9ydCB7Z2VuZXJhbE1vZGFsfSBmcm9tIFwiLi9tb2RhbHNcIjtcblxuY29uc3QgRE9NID0gKCgpID0+IHtcbiAgY29uc3QgZGVmYXVsdEdyb3VwcyA9IFtcIkltcG9ydGFudFwiLCBcIk5leHQgNyBEYXlzXCIsIFwiTGF0ZXJcIiwgXCJFdmVudHVhbGx5XCJdO1xuICBjb25zdCBncm91cEJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JvdXAtYnRuXCIpO1xuICBjb25zdCBtb2RhbEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYm94XCIpO1xuICByZXR1cm4ge1xuICAgIGRlZmF1bHRHcm91cHMsXG4gICAgZ3JvdXBCdXR0b25zLFxuICAgIG1vZGFsQm94XG4gIH1cbn0pKCk7XG5cbmNvbnN0IHRvRG8gPSAoKCkgPT4ge1xuICBjb25zdCBsaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvRG8tbGlzdFwiKSkgfHwgXG4gICAge1xuICAgICAgRXhhbXBsZTogW1xuICAgICAgICB7XG4gICAgICAgICAgdGFza05hbWU6IFwiRG8gdGhlIGRpc2hlc1wiLFxuICAgICAgICAgIHByaW9yaXR5OiBcIk5vcm1hbFwiLFxuICAgICAgICAgIGR1ZTogXCJcIixcbiAgICAgICAgICBub3RlczpcbiAgICAgICAgICAgIFwiTGV0IHRoZSBwYW5zIHNvYWssIHB1dCB0aGUgcGxhdGVzIGluIHRoZSBkaXNod2FzaGVyLCB3YXNoIHRoZSBtdWdzIGJ5IGhhbmQuXFxuXFxuV2FzaCBwYW5zIGFmdGVyIDMwIG1pbnV0ZXMgc29ha2luZy5cIixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRhc2tOYW1lOiBcIkJyaW5nIE11ZmZpbiB0byB2ZXRcIixcbiAgICAgICAgICBwcmlvcml0eTogXCJJbXBvcnRhbnRcIixcbiAgICAgICAgICBkdWU6IFwiMjAyMS0wMy0wNVwiLFxuICAgICAgICAgIG5vdGVzOiBcIlBhY2sgaGVyIGZhdm9yaXRlIHRveSBzbyBzaGUgc3RheXMgY2FsbS5cIixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfTtcblxuICBjb25zdCBzYXZlVG9Mb2NhbCA9ICgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG8tbGlzdFwiLCBKU09OLnN0cmluZ2lmeShsaXN0KSk7XG4gIH07XG5cbiAgLy8gY29uc3QgX2xvYWRMaXN0ID0gKCkgPT4ge1xuICAvLyAgIGxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9Eby1saXN0XCIpKTtcbiAgLy8gfTtcblxuICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgX2xvYWRMaXN0KTtcblxuICByZXR1cm4geyBcbiAgICBsaXN0LFxuICAgIHNhdmVUb0xvY2FsXG4gIH1cbn0pKCk7XG5cbmNvbnN0IHRhc2tzID0gKCgpID0+IHtcbiAgY29uc3QgY3JlYXRlID0gKCkgPT4ge1xuICAgIGFsZXJ0KFwib2tcIik7XG4gIH07XG59KSgpO1xuXG5jb25zdCBncm91cHMgPSAoKCkgPT4ge1xuICBjb25zdCBjcmVhdGUgPSAobmFtZSkgPT4ge1xuICAgIHRvRG8ubGlzdFtuYW1lXSA9IFtdO1xuICAgIHRvRG8uc2F2ZVRvTG9jYWwoKTtcbiAgICBjb25zb2xlLmxvZyh0b0RvLmxpc3QpO1xuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZSA9IChuYW1lLCBuZXdOYW1lKSA9PiB7XG4gICAgZGVsZXRlIE9iamVjdC5hc3NpZ24odG9Eby5saXN0LCB7IFtuZXdOYW1lXTogdG9Eby5saXN0W25hbWVdIH0pW25hbWVdO1xuICAgIGNvbnNvbGUubG9nKHRvRG8ubGlzdCk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlID0gKG5hbWUpID0+IHtcbiAgICBkZWxldGUgdG9Eby5saXN0W25hbWVdO1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrTmFtZSA9IChuYW1lKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIERPTS5kZWZhdWx0R3JvdXBzLmluZGV4T2YobmFtZSkgPj0gMCB8fFxuICAgICAgT2JqZWN0LmtleXModG9Eby5saXN0KS5pbmRleE9mKG5hbWUpID49IDAgfHxcbiAgICAgIG5hbWUgPT09IFwiXCJcbiAgICApO1xuICB9O1xuXG4gIGNvbnN0IHNldEluYWN0aXZlID0gKCkgPT4ge1xuICAgIEFycmF5LmZyb20oRE9NLmdyb3VwQnV0dG9ucykuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3Qgc2V0QWN0aXZlID0gKHRhcmdldCkgPT4ge1xuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICB9O1xuXG4gIEFycmF5LmZyb20oRE9NLmdyb3VwQnV0dG9ucykuZm9yRWFjaChidXR0b24gPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgc2V0SW5hY3RpdmUoKTtcbiAgICAgIHNldEFjdGl2ZShidXR0b24pO1xuICAgIH0pO1xuICB9KTtcblxuICBET00ubW9kYWxCb3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgc3dpdGNoIChlLnRhcmdldCkge1xuICAgICAgY2FzZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdC1ncm91cC1idG5cIik6XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGNoZWNrTmFtZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtaW5wdXRcIikudmFsdWUpKSB7XG4gICAgICAgICAgYWxlcnQoXCJQbGVhc2UgIGEgbmV3IG5hbWUuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjcmVhdGUoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lLWlucHV0XCIpLnZhbHVlKTtcbiAgICAgICAgICB0b0RvLnNhdmVUb0xvY2FsKCk7XG4gICAgICAgICAgZ2VuZXJhbE1vZGFsLm9uQ2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm47XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gcmV0dXJuIHtcbiAgLy8gICBjaGVja05hbWUsXG4gIC8vICAgY3JlYXRlLFxuICAvLyAgIHJlbW92ZSxcbiAgLy8gICB1cGRhdGUsXG4gIC8vICAgc2V0QWN0aXZlLFxuICAvLyAgIHNldEluYWN0aXZlXG4gIC8vIH1cbn0pKCk7XG5cbi8vIGNvbnN0IGJ1dHRvbkxpc3RlbmVycyA9ICgoKSA9PiB7XG5cbi8vIH0pKCk7XG5cbi8vIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xuXG4vLyBsZXQgZHVlRGF0ZSA9IG5ldyBEYXRlKChcIjIwMjEtMDItMDFcIikuc3BsaXQoXCItXCIpLmpvaW4oXCIsIFwiKSk7XG5cbi8vIGlmIChpc1RvZGF5KGR1ZURhdGUpKSB7XG4vLyAgIGNvbnNvbGUubG9nKFwiVG9kYXlcIilcbi8vIH0gZWxzZSBpZiAoZGlmZmVyZW5jZUluRGF5cyhkdWVEYXRlLCBub3cpIDw9IDcpIHtcbi8vICAgY29uc29sZS5sb2coXCJ0aGlzIHdlZWtcIik7XG4vLyAgIGNvbnNvbGUubG9nKGRpZmZlcmVuY2VJbkRheXMoZHVlRGF0ZSwgbm93KSk7XG4vLyB9IGVsc2UgaWYgKGRpZmZlcmVuY2VJbkRheXMoZHVlRGF0ZSwgbm93KSA+IDcpIHtcbi8vICAgY29uc29sZS5sb2coZm9ybWF0RGlzdGFuY2VUb05vd1N0cmljdChkdWVEYXRlKSk7XG4vLyB9IGVsc2UgaWYgKGR1ZURhdGUgPT09IFwiXCIpIHtcbi8vICAgY29uc29sZS5sb2coXCJObyBkdWUgZGF0ZVwiKVxuLy8gfVxuXG5leHBvcnQgeyBncm91cHMsIHRhc2tzLCB0b0RvIH07XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0ICcuL3N0eWxlLmNzcyc7XG5pbXBvcnQge2Rpc3BsYXlPcHRpb25zLCBhY2Nlc3NpYmlsaXR5T3B0aW9uc30gZnJvbSBcIi4vc2l0ZS1zZXR0aW5nc1wiO1xuaW1wb3J0IHtncm91cE1vZGFsLCB0YXNrTW9kYWwsIHdhcm5pbmdNb2RhbH0gZnJvbSBcIi4vbW9kYWxzXCI7XG5pbXBvcnQge2dyb3VwcywgdG9Eb30gZnJvbSBcIi4vbG9naWNcIjtcbmltcG9ydCBmb3JtYXQgZnJvbSAnZGF0ZS1mbnMvZm9ybWF0JztcblxuY29uc29sZS5sb2codG9Eby5saXN0KTtcblxuY29uc3QgRE9NID0gKCgpID0+IHtcbiAgY29uc3QgbWVudUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpbi1uYXZcIik7XG4gIGNvbnN0IG1lbnVPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51LWJ1dHRvblwiKTtcbiAgY29uc3QgbWVudUNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tZW51LWNsb3NlLWJ1dHRvblwiKTtcbiAgXG4gIHJldHVybiB7XG4gICAgbWVudUNvbnRhaW5lcixcbiAgICBtZW51T3BlbkJ1dHRvbixcbiAgICBtZW51Q2xvc2VCdXR0b25cbiAgfVxufSkoKTtcblxuY29uc3QgbWVudVZpc2liaWxpdHkgPSAoKCkgPT4ge1xuICBjb25zdCBfb25TY3JlZW5TaXplID0gKCkgPT4ge1xuICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsV2lkdGggPiA3NjMpIHtcbiAgICAgIERPTS5tZW51Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgICAgIERPTS5tZW51Q29udGFpbmVyLnN0eWxlLmxlZnQgPSBcIjBcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgRE9NLm1lbnVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XG4gICAgICBET00ubWVudUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gXCItODAwcHhcIjtcbiAgICB9O1xuICB9O1xuICBcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgX29uU2NyZWVuU2l6ZSk7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBfb25TY3JlZW5TaXplKTtcblxuICBjb25zdCBfdG9nZ2xlTWVudSA9ICgpID0+IHtcbiAgICBpZiAoRE9NLm1lbnVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9PT0gXCJoaWRkZW5cIikge1xuICAgICAgRE9NLm1lbnVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgRE9NLm1lbnVDb250YWluZXIuc3R5bGUubGVmdCA9IFwiMFwiO1xuICAgICAgRE9NLm1lbnVDbG9zZUJ1dHRvbi5mb2N1cygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBET00ubWVudUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gXCItODAwcHhcIjtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBET00ubWVudUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIlxuICAgICAgfSwgNjAwKTtcbiAgICAgIERPTS5tZW51T3BlbkJ1dHRvbi5mb2N1cygpO1xuICAgIH07XG4gIH07XG5cbiAgRE9NLm1lbnVPcGVuQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfdG9nZ2xlTWVudSk7XG4gIERPTS5tZW51Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF90b2dnbGVNZW51KTtcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIifQ==