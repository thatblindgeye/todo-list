!function(){"use strict";const e={accessibilityContainer:document.querySelector("#accessibility-container"),animationSwitch:document.querySelector("#animation-switch"),githubLogo:document.querySelector("#lower-nav img"),themeSwitch:document.querySelector("#theme-switch")},t=()=>{localStorage.setItem("theme",document.documentElement.getAttribute("theme")),localStorage.setItem("animations-enabled",e.animationSwitch.getAttribute("aria-checked"))},n=((()=>{const n=e=>{"light"===document.documentElement.getAttribute("theme")?o():a(),t()},o=()=>{e.themeSwitch.setAttribute("aria-checked","false"),document.documentElement.setAttribute("theme","dark"),e.themeSwitch.style.backgroundPosition="center bottom -0.8rem",e.githubLogo.setAttribute("src","assets/images/logos/GitHub-Mark-Light-32px.png")},a=()=>{e.themeSwitch.setAttribute("aria-checked","true"),document.documentElement.setAttribute("theme","light"),e.themeSwitch.style.backgroundPosition="center top 2px",e.githubLogo.setAttribute("src","assets/images/logos/GitHub-Mark-32px.png")};e.themeSwitch.addEventListener("click",n),e.themeSwitch.addEventListener("keydown",(e=>{" "===e.key&&(e.preventDefault(),n())})),window.addEventListener("load",(()=>{"light"===localStorage.getItem("theme")?a():o()}))})(),(()=>{const n=()=>{"true"===e.animationSwitch.getAttribute("aria-checked")?a():o(),t()},o=()=>{e.animationSwitch.setAttribute("aria-checked","true"),document.documentElement.style.scrollBehavior="smooth",e.accessibilityContainer.style.transition="top 0.75s ease-in-out",e.animationSwitch.textContent="Animations Enabled",e.themeSwitch.style.transition="background-position 0.3s ease-in",document.querySelector("#main-nav").style.transition="left 0.5s",Array.from(document.querySelectorAll(".label-arrow")).forEach((e=>{e.style.transition="transform 0.75s"}))},a=()=>{e.animationSwitch.setAttribute("aria-checked","false"),document.documentElement.style.scrollBehavior="auto",e.animationSwitch.setAttribute("aria-checked","false"),e.animationSwitch.textContent="Animations Disabled",Array.from(document.querySelectorAll(".animated")).forEach((e=>{e.style.transition="none"}))};return e.animationSwitch.addEventListener("click",n),e.animationSwitch.addEventListener("keydown",(e=>{" "===e.key&&(e.preventDefault(),n())})),window.addEventListener("load",(()=>{"false"===localStorage.getItem("animations-enabled")?a():o()})),{animationsEnabled:o,animationsDisabled:a}})()),o={addGroupBtn:document.querySelector(".add-group-btn"),defaultGroups:["Important","Next 7 Days","Later","Eventually"],groupButtons:document.getElementsByClassName("group-btn"),groupOptionBtn:document.querySelector(".group-option-btn"),modalBox:document.querySelector(".modal-box"),modalContainer:document.querySelector(".modal-container"),selectedGroup:document.querySelector(".selected-group")},a=(()=>{const e=()=>{for(;o.modalBox.firstChild;)o.modalBox.removeChild(o.modalBox.firstChild);o.modalContainer.style.display="none",o.modalBox.dataset.indexRef="",o.modalBox.dataset.groupRef=""};return window.addEventListener("keydown",(t=>{"Escape"===t.key&&e()})),{createCloseBtn:()=>{const e=document.createElement("button");e.setAttribute("type","button"),e.setAttribute("aria-label","Close modal"),e.classList.add("modal-close-button","close-btn","focusable"),e.addEventListener("click",a.onClose),o.modalBox.appendChild(e)},onClose:e,onOpen:()=>{o.modalContainer.style.display="flex",document.querySelector(".modal-close-button").focus()}}})(),l=((()=>{const e=e=>{e.target.classList.contains("disable-button")?n.animationsDisabled():e.target.classList.contains("enable-button")&&n.animationsEnabled(),t(),a.onClose()};window.addEventListener("load",(()=>{0===localStorage.length&&(()=>{const t=document.createElement("h1"),n=document.createElement("p"),a=document.createElement("p"),l=document.createElement("button"),r=document.createElement("button");t.textContent="This site uses minimal animation effects.",n.textContent="Effects include moving menus and smooth scrolling. If you suffer from a vestibular disorder or otherwise prefer no animations, you can turn them off by clicking the first button below.",a.textContent="You can later change this setting in the Display & Accessibility tab at the top of the page.",l.setAttribute("type","button"),l.classList.add("disable-button","focusable","primary-btn"),l.textContent="DISABLE ANIMATIONS",l.addEventListener("click",e),r.setAttribute("type","button"),r.classList.add("enable-button","focusable","secondary-btn"),r.textContent="ENABLE ANIMATIONS",r.addEventListener("click",e),o.modalBox.appendChild(t),o.modalBox.appendChild(n),o.modalBox.appendChild(a),o.modalBox.appendChild(l),o.modalBox.appendChild(r),o.modalContainer.style.display="flex"})()}))})(),(()=>{const e=e=>{const t=document.createElement("form"),n=document.createElement("fieldset"),l=document.createElement("legend"),r=document.createElement("div"),s=document.createElement("label"),i=document.createElement("input"),c=document.createElement("input");if(a.createCloseBtn(),s.setAttribute("for","name-input"),s.textContent="Group Name",i.setAttribute("type","text"),i.setAttribute("required","true"),i.setAttribute("id","name-input"),i.setAttribute("autocomplete","off"),i.classList.add("focusable"),e.target.classList.contains("add-group-btn"))l.textContent="Add a Group",c.setAttribute("type","submit"),c.setAttribute("value","ADD GROUP"),c.classList.add("submit-group-btn","primary-btn","focusable","submit"),r.appendChild(c);else if(e.target.classList.contains("group-option-btn")){const e=document.createElement("button"),t=document.createElement("button");l.textContent="Group Options",c.setAttribute("type","submit"),c.setAttribute("value","UPDATE"),c.classList.add("update-group-btn","secondary-btn","focusable","submit"),e.setAttribute("type","button"),e.classList.add("delete-group-btn","delete-btn","focusable"),e.textContent="DELETE GROUP",t.setAttribute("type","button"),t.classList.add("delete-completed-btn","delete-btn","focusable"),t.textContent="DELETE COMPLETED TASKS",o.defaultGroups.indexOf(o.selectedGroup.textContent)>=0&&(s.style.opacity="0.38",i.setAttribute("disabled","true"),i.style.opacity="0.38",c.setAttribute("disabled","true"),c.style.opacity="0.38",e.setAttribute("disabled","true"),e.style.opacity="0.38"),r.appendChild(c),r.appendChild(e),r.appendChild(t)}n.appendChild(l),n.appendChild(s),n.appendChild(i),n.appendChild(r),t.appendChild(n),o.modalBox.appendChild(t)};o.groupOptionBtn.addEventListener("click",(t=>{e(t),a.onOpen()})),o.addGroupBtn.addEventListener("click",(t=>{e(t),a.onOpen()}))})(),{render:(e,t)=>{const n=document.createElement("form"),l=document.createElement("fieldset"),r=document.createElement("legend"),s=document.createElement("div"),i=document.createElement("label"),c=document.createElement("input"),d=document.createElement("label"),u=document.createElement("select"),m=document.createElement("label"),p=document.createElement("select"),b=document.createElement("option"),h=document.createElement("option"),y=document.createElement("label"),g=document.createElement("input"),f=document.createElement("label"),C=document.createElement("textarea");a.createCloseBtn(),i.setAttribute("for","name-input"),i.textContent="Task Name (required)",c.setAttribute("type","text"),c.setAttribute("id","name-input"),c.setAttribute("placeholder","Enter a task name"),c.setAttribute("required","true"),c.setAttribute("autocomplete","off"),c.className="focusable",d.setAttribute("for","group-select"),d.textContent="Group",u.setAttribute("id","group-select"),u.className="focusable";for(let e=0;e<t.length;e++){const n=document.createElement("option");n.setAttribute("value",t[e]),n.textContent=t[e],u.appendChild(n)}if(m.setAttribute("for","priority-select"),m.textContent="Priority",p.setAttribute("id","priority-select"),p.className="focusable",b.textContent="Normal",h.textContent="Important",p.appendChild(b),p.appendChild(h),y.setAttribute("for","date-select"),y.textContent="Due Date (optional)",g.setAttribute("type","date"),g.setAttribute("id","date-select"),g.className="focusable",f.setAttribute("for","notes-input"),f.textContent="Additional Notes",C.setAttribute("id","notes-input"),C.setAttribute("placeholder","Enter any additional notes for the task"),C.className="focusable",e.target.textContent.includes("ADD TASK")){const e=document.createElement("input"),t=document.createElement("input");r.textContent="Add a Task",e.setAttribute("type","submit"),e.setAttribute("value","ADD ONE"),e.setAttribute("aria-label","Add task and close modal"),e.classList.add("add-single-btn","primary-btn","submit","focusable"),t.setAttribute("type","submit"),t.setAttribute("value","ADD MANY"),t.setAttribute("aria-label","Add task and keep modal open"),t.classList.add("add-many-btn","secondary-btn","submit","focusable"),s.appendChild(e),s.appendChild(t)}else if("EDIT"===e.target.textContent){const e=document.createElement("input");r.textContent="Edit Task",u.setAttribute("disabled","true"),d.style.opacity="0.38",u.style.opacity="0.38",e.setAttribute("type","submit"),e.setAttribute("value","UPDATE"),e.setAttribute("aria-label","Update task and close modal"),e.classList.add("update-task-btn","primary-btn","focusable"),s.appendChild(e)}l.appendChild(r),l.appendChild(i),l.appendChild(c),l.appendChild(d),l.appendChild(document.createElement("br")),l.appendChild(u),l.appendChild(document.createElement("br")),l.appendChild(m),l.appendChild(document.createElement("br")),l.appendChild(p),l.appendChild(document.createElement("br")),l.appendChild(y),l.appendChild(document.createElement("br")),l.appendChild(g),l.appendChild(document.createElement("br")),l.appendChild(f),l.appendChild(C),l.appendChild(s),n.appendChild(l),o.modalBox.appendChild(n)}}),r=(()=>{const e=document.querySelector(".groups-container");return{customGroups:document.querySelector(".custom-groups-container"),menu:e,tasksList:document.querySelector(".task-container")}})(),s={render:e=>{(()=>{for(;r.customGroups.firstChild;)r.customGroups.removeChild(r.customGroups.firstChild)})(),Object.keys(e).forEach((e=>{const t=document.createElement("button");t.setAttribute("type","button"),t.setAttribute("aria-label",`Group name: ${e}`),t.classList.add("custom-group","focusable","group-btn"),t.textContent=e,r.customGroups.appendChild(t)}))}},i=(()=>{const e=document.getElementById("main-nav");return{defaultGroups:["Important","Next 7 Days","Later","Eventually"],groupButtons:document.getElementsByClassName("group-btn"),nav:e,modalBox:document.querySelector(".modal-box"),selectedGroup:document.querySelector(".selected-group"),taskItems:document.getElementsByClassName("task-item")}})(),c=(()=>{const e=JSON.parse(localStorage.getItem("toDo-list"))||{Example:[{taskName:"Do the dishes",completed:!1,priority:"Normal",dueDate:"",notes:"Let the pans soak, put the plates in the dishwasher, wash the mugs by hand.\n\nWash pans after 30 minutes soaking."},{taskName:"Bring Muffin to vet",completed:!1,priority:"Important",dueDate:"2021-03-05",notes:"Pack her favorite toy so she stays calm."}]};return window.addEventListener("load",(t=>{s.render(e)})),{list:e,saveToLocal:()=>{localStorage.setItem("toDo-list",JSON.stringify(e))}}})(),d=(()=>{const e=e=>{c.list[e.dataset.group].splice(e.dataset.index,1),e.remove(),console.log(c.list)},t=e=>{const t=e.dataset.group,n=e.dataset.index;null===e.children[1].getAttribute("style")?(c.list[t][n].completed=!0,e.children[1].style.backgroundImage="url(assets/images/icons/done-black-24dp.svg)"):(c.list[t][n].completed=!1,e.children[1].removeAttribute("style")),console.log(c.list)};return document.querySelector(".add-task-btn").addEventListener("click",(e=>{0!==Object.keys(c.list).length?(l.render(e,Object.keys(c.list)),a.onOpen()):alert("No group exists to add tasks to.\n\nPlease create a group before adding a task.")})),Array.from(i.taskItems).forEach((n=>{n.addEventListener("click",(n=>{switch(n.target){case n.currentTarget.children[1]:t(n.currentTarget);break;case n.currentTarget.children[2]:n.currentTarget.children[4].classList.toggle("expanded");break;case n.currentTarget.children[4].children[1]:l.render(n,Object.keys(c.list)),(e=>{const t=e.dataset.group,n=e.dataset.index;i.modalBox.dataset.indexRef=n,i.modalBox.dataset.groupRef=t,document.querySelector("#name-input").value=c.list[t][n].taskName,document.querySelector("#group-select").value=t,document.querySelector("#priority-select").value=c.list[t][n].priority,document.querySelector("#date-select").value=c.list[t][n].dueDate,document.querySelector("#notes-input").value=c.list[t][n].notes})(n.currentTarget),a.onOpen();break;case n.currentTarget.children[4].children[2]:confirm(`Please click "OK" to confirm deletion of task "${n.currentTarget.children[2].textContent}".`)&&e(n.currentTarget);break;default:return}}))})),Array.from(i.taskItems).forEach((e=>{e.addEventListener("keydown",(e=>{" "===e.key&&(e.preventDefault(),e.target===e.currentTarget.children[1]?t(e.currentTarget):e.target===e.currentTarget.children[2]&&e.currentTarget.children[4].classList.toggle("expanded"))}))})),{confirmMassRemove:()=>i.defaultGroups.indexOf(i.selectedGroup.textContent)>=0?confirm('This will delete all completed tasks in every group.\n\nPlease click "OK" to confirm deletion.'):confirm(`This will delete all completed tasks in the ${i.selectedGroup.textContent} group.\n\nPlease click "OK" to confirm deletion.`),create:(e,t,n,o,a)=>({taskName:e,priority:t,dueDate:n,notes:o,completed:a}),update:()=>{const e=i.modalBox.getAttribute("data-group-ref"),t=i.modalBox.getAttribute("data-index-ref");c.list[e][t].taskName=document.querySelector("#name-input").value,c.list[e][t].priority=document.querySelector("#priority-select").value,c.list[e][t].dueDate=document.querySelector("#date-select").value,c.list[e][t].notes=document.querySelector("#notes-input").value},removeCompleted:e=>{if(i.defaultGroups.indexOf(e)>=0){const e=Object.keys(c.list);Object.values(c.list).forEach(((t,n)=>{for(let o=t.length-1;o>=0;o--)!0===t[o].completed&&c.list[e[n]].splice(o,1)}))}else c.list[e].forEach((t=>{for(let n=c.list[e].length-1;n>=0;n--)!0===t.completed&&c.list[e].splice(n,1)}))},removeSingle:e,checkName:e=>e.match(/^\s{1,}$/)||""===e}})(),u=(i.nav.addEventListener("click",(e=>{e.target.classList.contains("group-btn")&&(Array.from(i.groupButtons).forEach((e=>{e.classList.remove("active")})),e.target.classList.add("active"))})),{create:e=>{c.list[e]=[],console.log(c.list)},update:(e,t)=>{delete Object.assign(c.list,{[t]:c.list[e]})[e],console.log(c.list)},remove:e=>{delete c.list[e],console.log(c.list)},checkName:e=>i.defaultGroups.indexOf(e)>=0||Object.keys(c.list).indexOf(e)>=0||e.match(/^\s{1,}$/)||""===e});i.modalBox.addEventListener("click",(e=>{const t=document.querySelector("#name-input");switch(e.target){case document.querySelector(".submit-group-btn"):case document.querySelector(".update-group-btn"):if(e.preventDefault(),u.checkName(t.value))return void alert("Group name cannot be blank and cannot already be taken.\n\nPlease enter a new name.");e.target.classList.contains("submit-group-btn")?u.create(t.value):u.update(i.selectedGroup.textContent,t.value),a.onClose(),s.render(c.list);break;case document.querySelector(".delete-group-btn"):confirm(`This will delete the ${i.selectedGroup.textContent} group, along with any tasks within it.\n\nPlease click "OK" to confirm deletion.`)&&(u.remove(i.selectedGroup.textContent),a.onClose(),s.render(c.list));break;case document.querySelector(".delete-completed-btn"):d.confirmMassRemove()&&(d.removeCompleted(i.selectedGroup.textContent),a.onClose(),console.log(c.list));break;case document.querySelector(".add-single-btn"):case document.querySelector(".add-many-btn"):const n=document.querySelector("#group-select");if(e.preventDefault(),d.checkName(t.value))return void alert("Task name cannot be blank.\n\nPlease enter a new name.");{const o=d.create(t.value,document.querySelector("#priority-select").value,document.querySelector("#date-select").value,document.querySelector("#notes-input").value,!1);c.list[n.value].push(o),e.target.classList.contains("add-many-btn")?(t.focus(),t.value="",n.selectedIndex=0,document.querySelector("#priority-select").value="Normal",document.querySelector("#date-select").value="",document.querySelector("#notes-input").value=""):a.onClose(),console.log(c.list)}break;case document.querySelector(".update-task-btn"):if(e.preventDefault(),d.checkName(t.value))return void alert("Task name cannot be blank.\n\nPlease enter a new name.");d.update(),a.onClose(),console.log(c.list);break;default:return}})),console.log(c.list);const m={menuContainer:document.querySelector("#main-nav"),menuOpenButton:document.querySelector(".menu-button"),menuCloseButton:document.querySelector(".menu-close-button")};(()=>{const e=()=>{document.documentElement.scrollWidth>763?(m.menuContainer.style.visibility="visible",m.menuContainer.style.left="0"):(m.menuContainer.style.visibility="hidden",m.menuContainer.style.left="-800px")};window.addEventListener("resize",e),window.addEventListener("load",e);const t=()=>{"hidden"===m.menuContainer.style.visibility?(m.menuContainer.style.visibility="visible",m.menuContainer.style.left="0",m.menuCloseButton.focus()):(m.menuContainer.style.left="-800px",setTimeout((()=>{m.menuContainer.style.visibility="hidden"}),600),m.menuOpenButton.focus())};m.menuOpenButton.addEventListener("click",t),m.menuCloseButton.addEventListener("click",t)})()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc2l0ZS1zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kYWxzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9yZW5kZXItY29udGFpbmVycy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbG9naWMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbIkRPTSIsImFjY2Vzc2liaWxpdHlDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhbmltYXRpb25Td2l0Y2giLCJnaXRodWJMb2dvIiwidGhlbWVTd2l0Y2giLCJzZXR0aW5ncyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJkb2N1bWVudEVsZW1lbnQiLCJnZXRBdHRyaWJ1dGUiLCJhY2Nlc3NpYmlsaXR5T3B0aW9ucyIsIl90b2dnbGVUaGVtZSIsImUiLCJfZGFya1RoZW1lIiwiX2xpZ2h0VGhlbWUiLCJzZXRBdHRyaWJ1dGUiLCJzdHlsZSIsImJhY2tncm91bmRQb3NpdGlvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsIndpbmRvdyIsImdldEl0ZW0iLCJfdG9nZ2xlQW5pbWF0aW9ucyIsImFuaW1hdGlvbnNEaXNhYmxlZCIsImFuaW1hdGlvbnNFbmFibGVkIiwic2Nyb2xsQmVoYXZpb3IiLCJ0cmFuc2l0aW9uIiwidGV4dENvbnRlbnQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIml0ZW0iLCJhZGRHcm91cEJ0biIsImRlZmF1bHRHcm91cHMiLCJncm91cEJ1dHRvbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ3JvdXBPcHRpb25CdG4iLCJtb2RhbEJveCIsIm1vZGFsQ29udGFpbmVyIiwic2VsZWN0ZWRHcm91cCIsImdlbmVyYWxNb2RhbCIsIm9uQ2xvc2UiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJkaXNwbGF5IiwiZGF0YXNldCIsImluZGV4UmVmIiwiZ3JvdXBSZWYiLCJjcmVhdGVDbG9zZUJ0biIsImNsb3NlQnRuIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwib25PcGVuIiwiZm9jdXMiLCJ0YXNrTW9kYWwiLCJfc2VsZWN0T3B0aW9uIiwidGFyZ2V0IiwiY29udGFpbnMiLCJsZW5ndGgiLCJoZWFkaW5nIiwicGFyYTEiLCJwYXJhMiIsImRpc2FibGVCdXR0b24iLCJlbmFibGVCdXR0b24iLCJfcmVuZGVyIiwiZm9ybSIsImZpZWxkc2V0IiwibGVnZW5kIiwiZGl2IiwibmFtZUxhYmVsIiwibmFtZUlucHV0IiwibWFpbkJ0biIsImRlbGV0ZUdyb3VwIiwiZGVsZXRlQ29tcGxldGVkIiwiaW5kZXhPZiIsIm9wYWNpdHkiLCJyZW5kZXIiLCJncm91cE9wdGlvbnMiLCJncm91cExhYmVsIiwiZ3JvdXBTZWxlY3QiLCJwcmlvcml0eUxhYmVsIiwicHJpb3JpdHlTZWxlY3QiLCJwcmlvcml0eU9wdGlvbjEiLCJwcmlvcml0eU9wdGlvbjIiLCJkYXRlTGFiZWwiLCJkYXRlSW5wdXQiLCJub3Rlc0xhYmVsIiwibm90ZXNJbnB1dCIsImNsYXNzTmFtZSIsImkiLCJvcHRpb24iLCJpbmNsdWRlcyIsImFkZE9uZUJ0biIsImFkZE1hbnlCdG4iLCJlZGl0QnRuIiwibWVudSIsImN1c3RvbUdyb3VwcyIsInRhc2tzTGlzdCIsImdyb3VwQ29udGFpbmVyIiwic291cmNlIiwiY2xlYXIiLCJPYmplY3QiLCJrZXlzIiwiZ3JvdXAiLCJidXR0b24iLCJuYXYiLCJnZXRFbGVtZW50QnlJZCIsInRhc2tJdGVtcyIsInRvRG8iLCJsaXN0IiwiSlNPTiIsInBhcnNlIiwiRXhhbXBsZSIsInRhc2tOYW1lIiwiY29tcGxldGVkIiwicHJpb3JpdHkiLCJkdWVEYXRlIiwibm90ZXMiLCJzYXZlVG9Mb2NhbCIsInN0cmluZ2lmeSIsInRhc2tzIiwicmVtb3ZlU2luZ2xlIiwibm9kZSIsInNwbGljZSIsImluZGV4IiwicmVtb3ZlIiwiY29uc29sZSIsImxvZyIsIl9jaGFuZ2VTdGF0dXMiLCJncm91cERhdGEiLCJ0YXNrSW5kZXgiLCJjaGlsZHJlbiIsImJhY2tncm91bmRJbWFnZSIsInJlbW92ZUF0dHJpYnV0ZSIsImFsZXJ0IiwiY3VycmVudFRhcmdldCIsInRvZ2dsZSIsInZhbHVlIiwiX2dldEluZm8iLCJjb25maXJtIiwiY29uZmlybU1hc3NSZW1vdmUiLCJjcmVhdGUiLCJ1cGRhdGUiLCJ0YXNrUmVmIiwicmVtb3ZlQ29tcGxldGVkIiwia2V5QXJyYXkiLCJ2YWx1ZXMiLCJjaGVja05hbWUiLCJuYW1lIiwibWF0Y2giLCJncm91cHMiLCJvbGROYW1lIiwibmV3TmFtZSIsImFzc2lnbiIsIm5ld1Rhc2siLCJwdXNoIiwic2VsZWN0ZWRJbmRleCIsIm1lbnVDb250YWluZXIiLCJtZW51T3BlbkJ1dHRvbiIsIm1lbnVDbG9zZUJ1dHRvbiIsIl9vblNjcmVlblNpemUiLCJzY3JvbGxXaWR0aCIsInZpc2liaWxpdHkiLCJsZWZ0IiwiX3RvZ2dsZU1lbnUiLCJzZXRUaW1lb3V0Il0sIm1hcHBpbmdzIjoieUJBRUEsTUFBTUEsRUFRRyxDQUNMQyx1QkFQSUMsU0FBU0MsY0FBYyw0QkFRM0JDLGdCQU5JRixTQUFTQyxjQUFjLHFCQU8zQkUsV0FOaUJILFNBQVNDLGNBQWMsa0JBT3hDRyxZQU5rQkosU0FBU0MsY0FBYyxrQkFVdkNJLEVBQ2dCLEtBQ2xCQyxhQUFhQyxRQUNYLFFBQVNQLFNBQVNRLGdCQUFnQkMsYUFBYSxVQUVqREgsYUFBYUMsUUFBUSxxQkFDakJULEVBQUlJLGdCQUFnQk8sYUFBYSxrQkFxRG5DQyxHQTdDaUIsTUFDckIsTUFRTUMsRUFBZ0JDLElBQ21DLFVBQW5EWixTQUFTUSxnQkFBZ0JDLGFBQWEsU0FDeENJLElBRUFDLElBRUZULEtBR0lRLEVBQWEsS0FDakJmLEVBQUlNLFlBQVlXLGFBQWEsZUFBZ0IsU0FDN0NmLFNB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U0FBVWtKLEdBQ2xDL0ksT0FBT0gsaUJBQWlCLE9BQVFrSixHQUVoQyxNQUFNSSxFQUFjLEtBQ3lCLFdBQXZDLEVBQUlQLGNBQWNqSixNQUFNc0osWUFDMUIsRUFBSUwsY0FBY2pKLE1BQU1zSixXQUFhLFVBQ3JDLEVBQUlMLGNBQWNqSixNQUFNdUosS0FBTyxJQUMvQixFQUFJSixnQkFBZ0IxRyxVQUVwQixFQUFJd0csY0FBY2pKLE1BQU11SixLQUFPLFNBQy9CRSxZQUFXLEtBQ1QsRUFBSVIsY0FBY2pKLE1BQU1zSixXQUFhLFdBQ3BDLEtBQ0gsRUFBSUosZUFBZXpHLFVBSXZCLEVBQUl5RyxlQUFlaEosaUJBQWlCLFFBQVNzSixHQUM3QyxFQUFJTCxnQkFBZ0JqSixpQkFBaUIsUUFBU3NKLElBN0J6QixHIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBET00gPSAoKCkgPT4ge1xuICBjb25zdCBhY2Nlc3NpYmlsaXR5Q29udGFpbmVyID0gXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWNjZXNzaWJpbGl0eS1jb250YWluZXJcIik7XG4gIGNvbnN0IGFuaW1hdGlvblN3aXRjaCA9IFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FuaW1hdGlvbi1zd2l0Y2hcIik7XG4gIGNvbnN0IGdpdGh1YkxvZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xvd2VyLW5hdiBpbWdcIik7XG4gIGNvbnN0IHRoZW1lU3dpdGNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aGVtZS1zd2l0Y2hcIik7XG5cbiAgcmV0dXJuIHtcbiAgICBhY2Nlc3NpYmlsaXR5Q29udGFpbmVyLFxuICAgIGFuaW1hdGlvblN3aXRjaCxcbiAgICBnaXRodWJMb2dvLFxuICAgIHRoZW1lU3dpdGNoXG4gIH1cbn0pKCk7XG5cbmNvbnN0IHNldHRpbmdzID0gKCgpID0+IHtcbiAgY29uc3Qgc2F2ZVRvTG9jYWwgPSAoKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICBcInRoZW1lXCIsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0aGVtZVwiKSk7XG5cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImFuaW1hdGlvbnMtZW5hYmxlZFwiLCBcbiAgICAgICAgRE9NLmFuaW1hdGlvblN3aXRjaC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWNoZWNrZWRcIikpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2F2ZVRvTG9jYWxcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IGRpc3BsYXlPcHRpb25zID0gKCgpID0+IHtcbiAgY29uc3QgX29uTG9hZCA9ICgpID0+IHtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aGVtZVwiKSA9PT0gXCJsaWdodFwiKSB7XG4gICAgICBfbGlnaHRUaGVtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfZGFya1RoZW1lKCk7XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBfdG9nZ2xlVGhlbWUgPSAoZSkgPT4ge1xuICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGhlbWVcIikgPT09IFwibGlnaHRcIikge1xuICAgICAgX2RhcmtUaGVtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfbGlnaHRUaGVtZSgpO1xuICAgIH07XG4gICAgc2V0dGluZ3Muc2F2ZVRvTG9jYWwoKTtcbiAgfTtcblxuICBjb25zdCBfZGFya1RoZW1lID0gKCkgPT4ge1xuICAgIERPTS50aGVtZVN3aXRjaC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNoZWNrZWRcIiwgXCJmYWxzZVwiKTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidGhlbWVcIiwgXCJkYXJrXCIpO1xuICAgIERPTS50aGVtZVN3aXRjaC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcImNlbnRlciBib3R0b20gLTAuOHJlbVwiO1xuICAgIERPTS5naXRodWJMb2dvLnNldEF0dHJpYnV0ZShcInNyY1wiLFxuICAgICAgICBcImFzc2V0cy9pbWFnZXMvbG9nb3MvR2l0SHViLU1hcmstTGlnaHQtMzJweC5wbmdcIik7XG4gIH07XG5cbiAgY29uc3QgX2xpZ2h0VGhlbWUgPSAoKSA9PiB7XG4gICAgRE9NLnRoZW1lU3dpdGNoLnNldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiLCBcInRydWVcIik7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcInRoZW1lXCIsIFwibGlnaHRcIik7XG4gICAgRE9NLnRoZW1lU3dpdGNoLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwiY2VudGVyIHRvcCAycHhcIjtcbiAgICBET00uZ2l0aHViTG9nby5zZXRBdHRyaWJ1dGUoXCJzcmNcIixcbiAgICBcImFzc2V0cy9pbWFnZXMvbG9nb3MvR2l0SHViLU1hcmstMzJweC5wbmdcIik7XG4gIH07XG5cbiAgRE9NLnRoZW1lU3dpdGNoLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfdG9nZ2xlVGhlbWUpO1xuICBET00udGhlbWVTd2l0Y2guYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiIFwiKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBfdG9nZ2xlVGhlbWUoKTtcbiAgICB9O1xuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgX29uTG9hZCk7XG59KSgpO1xuXG5jb25zdCBhY2Nlc3NpYmlsaXR5T3B0aW9ucyA9ICgoKSA9PiB7XG4gIGNvbnN0IF9vbkxvYWQgPSAoKSA9PiB7XG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYW5pbWF0aW9ucy1lbmFibGVkXCIpID09PSBcImZhbHNlXCIpIHtcbiAgICAgIGFuaW1hdGlvbnNEaXNhYmxlZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbmltYXRpb25zRW5hYmxlZCgpO1xuICAgIH07XG4gIH07XG5cbiAgY29uc3QgX3RvZ2dsZUFuaW1hdGlvbnMgPSAoKSA9PiB7XG4gICAgaWYgKERPTS5hbmltYXRpb25Td2l0Y2guZ2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIpID09PSBcInRydWVcIikge1xuICAgICAgYW5pbWF0aW9uc0Rpc2FibGVkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFuaW1hdGlvbnNFbmFibGVkKCk7XG4gICAgfTtcbiAgICBzZXR0aW5ncy5zYXZlVG9Mb2NhbCgpO1xuICB9O1xuXG4gIGNvbnN0IGFuaW1hdGlvbnNFbmFibGVkID0gKCkgPT4ge1xuICAgIERPTS5hbmltYXRpb25Td2l0Y2guc2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIsIFwidHJ1ZVwiKTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2Nyb2xsQmVoYXZpb3IgPSBcInNtb290aFwiO1xuICAgIERPTS5hY2Nlc3NpYmlsaXR5Q29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSBcInRvcCAwLjc1cyBlYXNlLWluLW91dFwiO1xuICAgIERPTS5hbmltYXRpb25Td2l0Y2gudGV4dENvbnRlbnQgPSBcIkFuaW1hdGlvbnMgRW5hYmxlZFwiO1xuICAgIERPTS50aGVtZVN3aXRjaC5zdHlsZS50cmFuc2l0aW9uID0gXCJiYWNrZ3JvdW5kLXBvc2l0aW9uIDAuM3MgZWFzZS1pblwiO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpbi1uYXZcIikuc3R5bGUudHJhbnNpdGlvbiA9IFwibGVmdCAwLjVzXCI7XG4gICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxhYmVsLWFycm93XCIpKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaXRlbS5zdHlsZS50cmFuc2l0aW9uID0gXCJ0cmFuc2Zvcm0gMC43NXNcIjtcbiAgICB9KTtcbiAgfTtcbiAgICAgICAgXG4gIGNvbnN0IGFuaW1hdGlvbnNEaXNhYmxlZCA9ICgpID0+IHtcbiAgICBET00uYW5pbWF0aW9uU3dpdGNoLnNldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zY3JvbGxCZWhhdmlvciA9IFwiYXV0b1wiO1xuICAgIERPTS5hbmltYXRpb25Td2l0Y2guc2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIsIFwiZmFsc2VcIik7XG4gICAgRE9NLmFuaW1hdGlvblN3aXRjaC50ZXh0Q29udGVudCA9IFwiQW5pbWF0aW9ucyBEaXNhYmxlZFwiO1xuICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbmltYXRlZFwiKSkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uc3R5bGUudHJhbnNpdGlvbiA9IFwibm9uZVwiO1xuICAgIH0pO1xuICB9O1xuXG4gIERPTS5hbmltYXRpb25Td2l0Y2guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF90b2dnbGVBbmltYXRpb25zKTtcbiAgRE9NLmFuaW1hdGlvblN3aXRjaC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCIgXCIpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIF90b2dnbGVBbmltYXRpb25zKCk7XG4gICAgfTtcbiAgfSk7XG4gIFxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgX29uTG9hZCk7XG5cbiAgcmV0dXJuIHtcbiAgICBhbmltYXRpb25zRW5hYmxlZCxcbiAgICBhbmltYXRpb25zRGlzYWJsZWRcbiAgfVxufSkoKTtcblxuZXhwb3J0IHthY2Nlc3NpYmlsaXR5T3B0aW9ucywgZGlzcGxheU9wdGlvbnMsIHNldHRpbmdzfSIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBhY2Nlc3NpYmlsaXR5T3B0aW9ucywgc2V0dGluZ3MgfSBmcm9tIFwiLi9zaXRlLXNldHRpbmdzXCI7XG5cbmNvbnN0IERPTSA9ICgoKSA9PiB7XG4gIGNvbnN0IGFkZEdyb3VwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtZ3JvdXAtYnRuXCIpO1xuICBjb25zdCBkZWZhdWx0R3JvdXBzID0gW1wiSW1wb3J0YW50XCIsIFwiTmV4dCA3IERheXNcIiwgXCJMYXRlclwiLCBcIkV2ZW50dWFsbHlcIl07XG4gIGNvbnN0IGdyb3VwQnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJncm91cC1idG5cIik7XG4gIGNvbnN0IGdyb3VwT3B0aW9uQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncm91cC1vcHRpb24tYnRuXCIpO1xuICBjb25zdCBtb2RhbEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYm94XCIpO1xuICBjb25zdCBtb2RhbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtY29udGFpbmVyXCIpO1xuICBjb25zdCBzZWxlY3RlZEdyb3VwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZWxlY3RlZC1ncm91cFwiKTtcbiAgcmV0dXJuIHtcbiAgICBhZGRHcm91cEJ0bixcbiAgICBkZWZhdWx0R3JvdXBzLFxuICAgIGdyb3VwQnV0dG9ucyxcbiAgICBncm91cE9wdGlvbkJ0bixcbiAgICBtb2RhbEJveCxcbiAgICBtb2RhbENvbnRhaW5lcixcbiAgICBzZWxlY3RlZEdyb3VwXG4gIH1cbn0pKCk7XG5cbmNvbnN0IGdlbmVyYWxNb2RhbCA9ICgoKSA9PiB7XG4gIGNvbnN0IG9uQ2xvc2UgPSAoKSA9PiB7XG4gICAgd2hpbGUgKERPTS5tb2RhbEJveC5maXJzdENoaWxkKSB7XG4gICAgICBET00ubW9kYWxCb3gucmVtb3ZlQ2hpbGQoRE9NLm1vZGFsQm94LmZpcnN0Q2hpbGQpXG4gICAgfTtcbiAgICBET00ubW9kYWxDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICAgIERPTS5tb2RhbEJveC5kYXRhc2V0LmluZGV4UmVmID0gXCJcIjtcbiAgICBET00ubW9kYWxCb3guZGF0YXNldC5ncm91cFJlZiA9IFwiXCI7XG4gIH07XG5cbiAgY29uc3Qgb25PcGVuID0gKCkgPT4ge1xuICAgIERPTS5tb2RhbENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1jbG9zZS1idXR0b25cIikuZm9jdXMoKTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVDbG9zZUJ0biA9ICgpID0+IHtcbiAgICBjb25zdCBjbG9zZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY2xvc2VCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICBjbG9zZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiQ2xvc2UgbW9kYWxcIik7XG4gICAgY2xvc2VCdG4uY2xhc3NMaXN0LmFkZChcIm1vZGFsLWNsb3NlLWJ1dHRvblwiLCBcImNsb3NlLWJ0blwiLCBcImZvY3VzYWJsZVwiKTtcbiAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZ2VuZXJhbE1vZGFsLm9uQ2xvc2UpO1xuICAgIERPTS5tb2RhbEJveC5hcHBlbmRDaGlsZChjbG9zZUJ0bik7XG4gIH07XG5cbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICBvbkNsb3NlKCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGVDbG9zZUJ0bixcbiAgICBvbkNsb3NlLFxuICAgIG9uT3BlblxuICB9XG59KSgpO1xuXG5jb25zdCB3YXJuaW5nTW9kYWwgPSAoKCkgPT4ge1xuICBjb25zdCBfc2VsZWN0T3B0aW9uID0gKGUpID0+IHtcbiAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGlzYWJsZS1idXR0b25cIikpIHtcbiAgICAgIGFjY2Vzc2liaWxpdHlPcHRpb25zLmFuaW1hdGlvbnNEaXNhYmxlZCgpO1xuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZW5hYmxlLWJ1dHRvblwiKSkge1xuICAgICAgYWNjZXNzaWJpbGl0eU9wdGlvbnMuYW5pbWF0aW9uc0VuYWJsZWQoKTtcbiAgICB9O1xuICAgIHNldHRpbmdzLnNhdmVUb0xvY2FsKCk7XG4gICAgZ2VuZXJhbE1vZGFsLm9uQ2xvc2UoKTtcbiAgfTtcblxuICBjb25zdCBfcmVuZGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IGhlYWRpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDFcIik7XG4gICAgY29uc3QgcGFyYTEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicFwiKTtcbiAgICBjb25zdCBwYXJhMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGNvbnN0IGRpc2FibGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIGNvbnN0IGVuYWJsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG5cbiAgICBoZWFkaW5nLnRleHRDb250ZW50ID0gXCJUaGlzIHNpdGUgdXNlcyBtaW5pbWFsIGFuaW1hdGlvbiBlZmZlY3RzLlwiO1xuXG4gICAgcGFyYTEudGV4dENvbnRlbnQgPSBcIkVmZmVjdHMgaW5jbHVkZSBtb3ZpbmcgbWVudXMgYW5kIHNtb290aCBzY3JvbGxpbmcuIElmIHlvdSBzdWZmZXIgZnJvbSBhIHZlc3RpYnVsYXIgZGlzb3JkZXIgb3Igb3RoZXJ3aXNlIHByZWZlciBubyBhbmltYXRpb25zLCB5b3UgY2FuIHR1cm4gdGhlbSBvZmYgYnkgY2xpY2tpbmcgdGhlIGZpcnN0IGJ1dHRvbiBiZWxvdy5cIjtcbiAgXG4gICAgcGFyYTIudGV4dENvbnRlbnQ9IFwiWW91IGNhbiBsYXRlciBjaGFuZ2UgdGhpcyBzZXR0aW5nIGluIHRoZSBEaXNwbGF5ICYgQWNjZXNzaWJpbGl0eSB0YWIgYXQgdGhlIHRvcCBvZiB0aGUgcGFnZS5cIjtcbiAgXG4gICAgZGlzYWJsZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgIGRpc2FibGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImRpc2FibGUtYnV0dG9uXCIsIFwiZm9jdXNhYmxlXCIsIFwicHJpbWFyeS1idG5cIik7XG4gICAgZGlzYWJsZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRElTQUJMRSBBTklNQVRJT05TXCI7XG4gICAgZGlzYWJsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX3NlbGVjdE9wdGlvbik7XG4gICAgXG4gICAgZW5hYmxlQnV0dG9uLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XG4gICAgZW5hYmxlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJlbmFibGUtYnV0dG9uXCIsIFwiZm9jdXNhYmxlXCIsIFwic2Vjb25kYXJ5LWJ0blwiKTtcbiAgICBlbmFibGVCdXR0b24udGV4dENvbnRlbnQgPSBcIkVOQUJMRSBBTklNQVRJT05TXCI7XG4gICAgZW5hYmxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfc2VsZWN0T3B0aW9uKTtcblxuICAgIERPTS5tb2RhbEJveC5hcHBlbmRDaGlsZChoZWFkaW5nKTtcbiAgICBET00ubW9kYWxCb3guYXBwZW5kQ2hpbGQocGFyYTEpO1xuICAgIERPTS5tb2RhbEJveC5hcHBlbmRDaGlsZChwYXJhMik7XG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKGRpc2FibGVCdXR0b24pO1xuICAgIERPTS5tb2RhbEJveC5hcHBlbmRDaGlsZChlbmFibGVCdXR0b24pO1xuXG4gICAgRE9NLm1vZGFsQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgfTtcblxuICBjb25zdCBfb25Mb2FkID0gKCkgPT4ge1xuICAgIGlmIChsb2NhbFN0b3JhZ2UubGVuZ3RoID09PSAwKSB7XG4gICAgICBfcmVuZGVyKCk7XG4gICAgfTtcbiAgfTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgX29uTG9hZCk7XG59KSgpO1xuXG5jb25zdCBncm91cE1vZGFsID0gKCgpID0+IHtcbiAgY29uc3QgX3JlbmRlciA9IChlKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICAgIGNvbnN0IGZpZWxkc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpO1xuICAgIGNvbnN0IGxlZ2VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsZWdlbmRcIik7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGNvbnN0IG5hbWVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgY29uc3QgbWFpbkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgIGdlbmVyYWxNb2RhbC5jcmVhdGVDbG9zZUJ0bigpO1xuXG4gICAgbmFtZUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcIm5hbWUtaW5wdXRcIik7XG4gICAgbmFtZUxhYmVsLnRleHRDb250ZW50ID0gXCJHcm91cCBOYW1lXCI7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIG5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiLCBcInRydWVcIik7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwibmFtZS1pbnB1dFwiKTtcbiAgICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKFwiYXV0b2NvbXBsZXRlXCIsIFwib2ZmXCIpO1xuICAgIG5hbWVJbnB1dC5jbGFzc0xpc3QuYWRkKFwiZm9jdXNhYmxlXCIpO1xuXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFkZC1ncm91cC1idG5cIikpIHtcbiAgICAgIGxlZ2VuZC50ZXh0Q29udGVudCA9IFwiQWRkIGEgR3JvdXBcIjtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJBREQgR1JPVVBcIik7XG4gICAgICBtYWluQnRuLmNsYXNzTGlzdC5hZGQoXCJzdWJtaXQtZ3JvdXAtYnRuXCIsIFwicHJpbWFyeS1idG5cIiwgXCJmb2N1c2FibGVcIiwgXCJzdWJtaXRcIik7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQobWFpbkJ0bik7XG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJncm91cC1vcHRpb24tYnRuXCIpKSB7XG4gICAgICBjb25zdCBkZWxldGVHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBjb25zdCBkZWxldGVDb21wbGV0ZWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG4gICAgICBsZWdlbmQudGV4dENvbnRlbnQgPSBcIkdyb3VwIE9wdGlvbnNcIjtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJVUERBVEVcIik7XG4gICAgICBtYWluQnRuLmNsYXNzTGlzdC5hZGQoXCJ1cGRhdGUtZ3JvdXAtYnRuXCIsIFwic2Vjb25kYXJ5LWJ0blwiLCBcImZvY3VzYWJsZVwiLCBcInN1Ym1pdFwiKTtcblxuICAgICAgZGVsZXRlR3JvdXAuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgIGRlbGV0ZUdyb3VwLmNsYXNzTGlzdC5hZGQoXCJkZWxldGUtZ3JvdXAtYnRuXCIsIFwiZGVsZXRlLWJ0blwiLCBcImZvY3VzYWJsZVwiKTtcbiAgICAgIGRlbGV0ZUdyb3VwLnRleHRDb250ZW50ID0gXCJERUxFVEUgR1JPVVBcIjtcbiAgICAgIGRlbGV0ZUNvbXBsZXRlZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgICAgZGVsZXRlQ29tcGxldGVkLmNsYXNzTGlzdC5hZGQoXCJkZWxldGUtY29tcGxldGVkLWJ0blwiLCBcImRlbGV0ZS1idG5cIiwgXCJmb2N1c2FibGVcIik7XG4gICAgICBkZWxldGVDb21wbGV0ZWQudGV4dENvbnRlbnQgPSBcIkRFTEVURSBDT01QTEVURUQgVEFTS1NcIjtcblxuICAgICAgaWYgKERPTS5kZWZhdWx0R3JvdXBzLmluZGV4T2YoRE9NLnNlbGVjdGVkR3JvdXAudGV4dENvbnRlbnQpID49IDApIHtcbiAgICAgICAgbmFtZUxhYmVsLnN0eWxlLm9wYWNpdHkgPSBcIjAuMzhcIjtcbiAgICAgICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgbmFtZUlucHV0LnN0eWxlLm9wYWNpdHkgPSBcIjAuMzhcIjtcbiAgICAgICAgbWFpbkJ0bi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICAgIG1haW5CdG4uc3R5bGUub3BhY2l0eSA9IFwiMC4zOFwiO1xuICAgICAgICBkZWxldGVHcm91cC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICAgIGRlbGV0ZUdyb3VwLnN0eWxlLm9wYWNpdHkgPSBcIjAuMzhcIjtcbiAgICAgIH07XG5cbiAgICAgIGRpdi5hcHBlbmRDaGlsZChtYWluQnRuKTtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChkZWxldGVHcm91cCk7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZGVsZXRlQ29tcGxldGVkKTtcbiAgICB9O1xuXG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobGVnZW5kKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChuYW1lTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKG5hbWVJbnB1dCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICBmb3JtLmFwcGVuZENoaWxkKGZpZWxkc2V0KTtcbiAgICBET00ubW9kYWxCb3guYXBwZW5kQ2hpbGQoZm9ybSk7XG4gIH07XG5cbiAgRE9NLmdyb3VwT3B0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIF9yZW5kZXIoZSk7XG4gICAgZ2VuZXJhbE1vZGFsLm9uT3BlbigpO1xuICB9KTtcblxuICBET00uYWRkR3JvdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgX3JlbmRlcihlKTtcbiAgICBnZW5lcmFsTW9kYWwub25PcGVuKCk7XG4gIH0pO1xufSkoKTtcblxuY29uc3QgdGFza01vZGFsID0gKCgpID0+IHtcbiAgLy8gcGFzcyBncm91cCBsaXN0IGZyb20gdGFzayBtb2R1bGUgcGF0dGVybiBpbiBsb2dpYy5qcyBmaWxlIGFzIGFyZ3VtZW50XG4gIGNvbnN0IHJlbmRlciA9IChlLCBncm91cE9wdGlvbnMpID0+IHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgY29uc3QgZmllbGRzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIik7XG4gICAgY29uc3QgbGVnZW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxlZ2VuZFwiKTtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgY29uc3QgbmFtZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgIGNvbnN0IGdyb3VwTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgY29uc3QgZ3JvdXBTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuXG4gICAgY29uc3QgcHJpb3JpdHlMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBjb25zdCBwcmlvcml0eVNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7XG4gICAgY29uc3QgcHJpb3JpdHlPcHRpb24xID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcbiAgICBjb25zdCBwcmlvcml0eU9wdGlvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xuXG4gICAgY29uc3QgZGF0ZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGNvbnN0IGRhdGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBjb25zdCBub3Rlc0xhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGNvbnN0IG5vdGVzSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XG5cbiAgICBnZW5lcmFsTW9kYWwuY3JlYXRlQ2xvc2VCdG4oKTtcblxuICAgIG5hbWVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJuYW1lLWlucHV0XCIpO1xuICAgIG5hbWVMYWJlbC50ZXh0Q29udGVudCA9IFwiVGFzayBOYW1lIChyZXF1aXJlZClcIjtcbiAgICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwibmFtZS1pbnB1dFwiKTtcbiAgICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKFwicGxhY2Vob2xkZXJcIiwgXCJFbnRlciBhIHRhc2sgbmFtZVwiKTtcbiAgICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKFwicmVxdWlyZWRcIiwgXCJ0cnVlXCIpO1xuICAgIG5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJhdXRvY29tcGxldGVcIiwgXCJvZmZcIik7XG4gICAgbmFtZUlucHV0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG5cbiAgICBncm91cExhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcImdyb3VwLXNlbGVjdFwiKTtcbiAgICBncm91cExhYmVsLnRleHRDb250ZW50ID0gXCJHcm91cFwiO1xuICAgIGdyb3VwU2VsZWN0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZ3JvdXAtc2VsZWN0XCIpO1xuICAgIGdyb3VwU2VsZWN0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cE9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb24uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgZ3JvdXBPcHRpb25zW2ldKTtcbiAgICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGdyb3VwT3B0aW9uc1tpXTtcbiAgICAgIGdyb3VwU2VsZWN0LmFwcGVuZENoaWxkKG9wdGlvbik7XG4gICAgfTtcbiAgICBcbiAgICBwcmlvcml0eUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInByaW9yaXR5LXNlbGVjdFwiKTtcbiAgICBwcmlvcml0eUxhYmVsLnRleHRDb250ZW50ID0gXCJQcmlvcml0eVwiO1xuICAgIHByaW9yaXR5U2VsZWN0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJpb3JpdHktc2VsZWN0XCIpO1xuICAgIHByaW9yaXR5U2VsZWN0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG4gICAgcHJpb3JpdHlPcHRpb24xLnRleHRDb250ZW50ID0gXCJOb3JtYWxcIjtcbiAgICBwcmlvcml0eU9wdGlvbjIudGV4dENvbnRlbnQgPSBcIkltcG9ydGFudFwiO1xuICAgIHByaW9yaXR5U2VsZWN0LmFwcGVuZENoaWxkKHByaW9yaXR5T3B0aW9uMSk7XG4gICAgcHJpb3JpdHlTZWxlY3QuYXBwZW5kQ2hpbGQocHJpb3JpdHlPcHRpb24yKTtcblxuICAgIGRhdGVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkYXRlLXNlbGVjdFwiKTtcbiAgICBkYXRlTGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZSBEYXRlIChvcHRpb25hbClcIjtcbiAgICBkYXRlSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgZGF0ZUlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGF0ZS1zZWxlY3RcIik7XG4gICAgZGF0ZUlucHV0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG5cbiAgICBub3Rlc0xhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcIm5vdGVzLWlucHV0XCIpO1xuICAgIG5vdGVzTGFiZWwudGV4dENvbnRlbnQgPSBcIkFkZGl0aW9uYWwgTm90ZXNcIjtcbiAgICBub3Rlc0lucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwibm90ZXMtaW5wdXRcIik7XG4gICAgbm90ZXNJbnB1dC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcIkVudGVyIGFueSBhZGRpdGlvbmFsIG5vdGVzIGZvciB0aGUgdGFza1wiKTtcbiAgICBub3Rlc0lucHV0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG5cbiAgICBpZiAoZS50YXJnZXQudGV4dENvbnRlbnQuaW5jbHVkZXMoXCJBREQgVEFTS1wiKSkge1xuICAgICAgY29uc3QgYWRkT25lQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgY29uc3QgYWRkTWFueUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgbGVnZW5kLnRleHRDb250ZW50ID0gXCJBZGQgYSBUYXNrXCI7XG5cbiAgICAgIGFkZE9uZUJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICAgICAgYWRkT25lQnRuLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiQUREIE9ORVwiKTtcbiAgICAgIGFkZE9uZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiQWRkIHRhc2sgYW5kIGNsb3NlIG1vZGFsXCIpO1xuICAgICAgYWRkT25lQnRuLmNsYXNzTGlzdC5hZGQoXCJhZGQtc2luZ2xlLWJ0blwiLCBcInByaW1hcnktYnRuXCIsXCJzdWJtaXRcIiwgXCJmb2N1c2FibGVcIik7XG5cbiAgICAgIGFkZE1hbnlCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIGFkZE1hbnlCdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJBREQgTUFOWVwiKTtcbiAgICAgIGFkZE1hbnlCdG4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIkFkZCB0YXNrIGFuZCBrZWVwIG1vZGFsIG9wZW5cIik7XG4gICAgICBhZGRNYW55QnRuLmNsYXNzTGlzdC5hZGQoXCJhZGQtbWFueS1idG5cIiwgXCJzZWNvbmRhcnktYnRuXCIsIFwic3VibWl0XCIsIFwiZm9jdXNhYmxlXCIpO1xuXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoYWRkT25lQnRuKTtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChhZGRNYW55QnRuKTtcbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LnRleHRDb250ZW50ID09PSAoXCJFRElUXCIpKSB7XG4gICAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXG4gICAgICBsZWdlbmQudGV4dENvbnRlbnQgPSBcIkVkaXQgVGFza1wiO1xuICAgICAgZ3JvdXBTZWxlY3Quc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xuICAgICAgZ3JvdXBMYWJlbC5zdHlsZS5vcGFjaXR5ID0gXCIwLjM4XCI7XG4gICAgICBncm91cFNlbGVjdC5zdHlsZS5vcGFjaXR5ID0gXCIwLjM4XCI7XG5cbiAgICAgIGVkaXRCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIGVkaXRCdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJVUERBVEVcIik7XG4gICAgICBlZGl0QnRuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgXCJVcGRhdGUgdGFzayBhbmQgY2xvc2UgbW9kYWxcIik7XG4gICAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJ1cGRhdGUtdGFzay1idG5cIiwgXCJwcmltYXJ5LWJ0blwiLCBcImZvY3VzYWJsZVwiKTtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChlZGl0QnRuKTtcbiAgICB9O1xuXG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobGVnZW5kKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChuYW1lTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKG5hbWVJbnB1dCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZ3JvdXBMYWJlbCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChncm91cFNlbGVjdCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChwcmlvcml0eUxhYmVsKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKHByaW9yaXR5U2VsZWN0KTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRhdGVMYWJlbCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChkYXRlSW5wdXQpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobm90ZXNMYWJlbCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobm90ZXNJbnB1dCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICBmb3JtLmFwcGVuZENoaWxkKGZpZWxkc2V0KTtcbiAgICBET00ubW9kYWxCb3guYXBwZW5kQ2hpbGQoZm9ybSk7XG4gIH07XG5cbiAgcmV0dXJuIHtyZW5kZXJ9XG59KSgpO1xuXG5leHBvcnQgeyBnZW5lcmFsTW9kYWwsIGdyb3VwTW9kYWwsIHRhc2tNb2RhbCwgd2FybmluZ01vZGFsIH0iLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IGZvcm1hdERpc3RhbmNlVG9Ob3dTdHJpY3QgZnJvbSBcImRhdGUtZm5zL2Zvcm1hdERpc3RhbmNlVG9Ob3dTdHJpY3RcIjtcbmltcG9ydCBkaWZmZXJlbmNlSW5EYXlzIGZyb20gXCJkYXRlLWZucy9kaWZmZXJlbmNlSW5EYXlzXCI7XG5pbXBvcnQgaXNUb2RheSBmcm9tIFwiZGF0ZS1mbnMvaXNUb2RheVwiO1xuXG5jb25zdCBET00gPSAoKCkgPT4ge1xuICBjb25zdCBtZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ncm91cHMtY29udGFpbmVyXCIpO1xuICBjb25zdCBjdXN0b21Hcm91cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmN1c3RvbS1ncm91cHMtY29udGFpbmVyXCIpO1xuICBjb25zdCB0YXNrc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stY29udGFpbmVyXCIpO1xuXG4gIHJldHVybiB7XG4gICAgY3VzdG9tR3JvdXBzLFxuICAgIG1lbnUsXG4gICAgdGFza3NMaXN0XG4gIH1cbn0pKCk7XG5cbmNvbnN0IGdyb3VwQ29udGFpbmVyID0gKCgpID0+IHtcbiAgY29uc3QgcmVuZGVyID0gKHNvdXJjZSkgPT4ge1xuICAgIGNsZWFyKCk7XG4gICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKGdyb3VwID0+IHtcbiAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBidXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIGBHcm91cCBuYW1lOiAke2dyb3VwfWApO1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjdXN0b20tZ3JvdXBcIiwgXCJmb2N1c2FibGVcIiwgXCJncm91cC1idG5cIik7XG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBncm91cDtcbiAgICAgIERPTS5jdXN0b21Hcm91cHMuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBjbGVhciA9ICgpID0+IHtcbiAgICB3aGlsZSAoRE9NLmN1c3RvbUdyb3Vwcy5maXJzdENoaWxkKSB7XG4gICAgICBET00uY3VzdG9tR3JvdXBzLnJlbW92ZUNoaWxkKERPTS5jdXN0b21Hcm91cHMuZmlyc3RDaGlsZCk7XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4ge3JlbmRlcn1cbn0pKCk7XG5cbmV4cG9ydCB7Z3JvdXBDb250YWluZXJ9XG5cblxuLy8gbGV0IG5vdyA9IG5ldyBEYXRlKCk7XG5cbi8vIGxldCBkdWVEYXRlID0gbmV3IERhdGUoKFwiMjAyMS0wMi0wMVwiKS5zcGxpdChcIi1cIikuam9pbihcIiwgXCIpKTtcblxuLy8gaWYgKGlzVG9kYXkoZHVlRGF0ZSkpIHtcbi8vICAgY29uc29sZS5sb2coXCJUb2RheVwiKVxuLy8gfSBlbHNlIGlmIChkaWZmZXJlbmNlSW5EYXlzKGR1ZURhdGUsIG5vdykgPD0gNykge1xuLy8gICBjb25zb2xlLmxvZyhcInRoaXMgd2Vla1wiKTtcbi8vICAgY29uc29sZS5sb2coZGlmZmVyZW5jZUluRGF5cyhkdWVEYXRlLCBub3cpKTtcbi8vIH0gZWxzZSBpZiAoZGlmZmVyZW5jZUluRGF5cyhkdWVEYXRlLCBub3cpID4gNykge1xuLy8gICBjb25zb2xlLmxvZyhmb3JtYXREaXN0YW5jZVRvTm93U3RyaWN0KGR1ZURhdGUpKTtcbi8vIH0gZWxzZSBpZiAoZHVlRGF0ZSA9PT0gXCJcIikge1xuLy8gICBjb25zb2xlLmxvZyhcIk5vIGR1ZSBkYXRlXCIpXG4vLyB9IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGdlbmVyYWxNb2RhbCwgdGFza01vZGFsIH0gZnJvbSBcIi4vbW9kYWxzXCI7XG5pbXBvcnQgeyBncm91cENvbnRhaW5lciB9IGZyb20gXCIuL3JlbmRlci1jb250YWluZXJzXCI7XG5cbmNvbnN0IERPTSA9ICgoKSA9PiB7XG4gIGNvbnN0IGRlZmF1bHRHcm91cHMgPSBbXCJJbXBvcnRhbnRcIiwgXCJOZXh0IDcgRGF5c1wiLCBcIkxhdGVyXCIsIFwiRXZlbnR1YWxseVwiXTtcbiAgY29uc3QgbmF2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYWluLW5hdlwiKTtcbiAgY29uc3QgZ3JvdXBCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyb3VwLWJ0blwiKTtcbiAgY29uc3QgbW9kYWxCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWJveFwiKTtcbiAgY29uc3Qgc2VsZWN0ZWRHcm91cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VsZWN0ZWQtZ3JvdXBcIik7XG4gIGNvbnN0IHRhc2tJdGVtcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0YXNrLWl0ZW1cIik7XG5cbiAgcmV0dXJuIHtcbiAgICBkZWZhdWx0R3JvdXBzLFxuICAgIGdyb3VwQnV0dG9ucyxcbiAgICBuYXYsXG4gICAgbW9kYWxCb3gsXG4gICAgc2VsZWN0ZWRHcm91cCxcbiAgICB0YXNrSXRlbXNcbiAgfVxufSkoKTtcblxuY29uc3QgdG9EbyA9ICgoKSA9PiB7XG4gIGNvbnN0IGxpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9Eby1saXN0XCIpKSB8fCBcbiAgICB7XG4gICAgICBFeGFtcGxlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0YXNrTmFtZTogXCJEbyB0aGUgZGlzaGVzXCIsXG4gICAgICAgICAgY29tcGxldGVkOiBmYWxzZSxcbiAgICAgICAgICBwcmlvcml0eTogXCJOb3JtYWxcIixcbiAgICAgICAgICBkdWVEYXRlOiBcIlwiLFxuICAgICAgICAgIG5vdGVzOlxuICAgICAgICAgICAgXCJMZXQgdGhlIHBhbnMgc29haywgcHV0IHRoZSBwbGF0ZXMgaW4gdGhlIGRpc2h3YXNoZXIsIHdhc2ggdGhlIG11Z3MgYnkgaGFuZC5cXG5cXG5XYXNoIHBhbnMgYWZ0ZXIgMzAgbWludXRlcyBzb2FraW5nLlwiLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGFza05hbWU6IFwiQnJpbmcgTXVmZmluIHRvIHZldFwiLFxuICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgICAgcHJpb3JpdHk6IFwiSW1wb3J0YW50XCIsXG4gICAgICAgICAgZHVlRGF0ZTogXCIyMDIxLTAzLTA1XCIsXG4gICAgICAgICAgbm90ZXM6IFwiUGFjayBoZXIgZmF2b3JpdGUgdG95IHNvIHNoZSBzdGF5cyBjYWxtLlwiLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9O1xuXG4gIGNvbnN0IHNhdmVUb0xvY2FsID0gKCkgPT4ge1xuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwidG9Eby1saXN0XCIsIEpTT04uc3RyaW5naWZ5KGxpc3QpKTtcbiAgfTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKGUpID0+IHtcbiAgICAvLyB0YXNrQ29udGFpbmVyLnJlbmRlcihlKTtcbiAgICBncm91cENvbnRhaW5lci5yZW5kZXIobGlzdCk7XG4gIH0pO1xuXG4gIHJldHVybiB7IFxuICAgIGxpc3QsXG4gICAgc2F2ZVRvTG9jYWxcbiAgfVxufSkoKTtcblxuY29uc3QgdGFza3MgPSAoKCkgPT4ge1xuICBjb25zdCBjcmVhdGUgPSAodGFza05hbWUsIHByaW9yaXR5LCBkdWVEYXRlLCBub3RlcywgY29tcGxldGVkKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRhc2tOYW1lLFxuICAgICAgcHJpb3JpdHksXG4gICAgICBkdWVEYXRlLFxuICAgICAgbm90ZXMsXG4gICAgICBjb21wbGV0ZWRcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlID0gKCkgPT4ge1xuICAgIGNvbnN0IGdyb3VwUmVmID0gRE9NLm1vZGFsQm94LmdldEF0dHJpYnV0ZShcImRhdGEtZ3JvdXAtcmVmXCIpO1xuICAgIGNvbnN0IHRhc2tSZWYgPSBET00ubW9kYWxCb3guZ2V0QXR0cmlidXRlKFwiZGF0YS1pbmRleC1yZWZcIik7XG5cbiAgICB0b0RvLmxpc3RbZ3JvdXBSZWZdW3Rhc2tSZWZdLnRhc2tOYW1lID0gXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKS52YWx1ZTtcbiAgICB0b0RvLmxpc3RbZ3JvdXBSZWZdW3Rhc2tSZWZdLnByaW9yaXR5ID0gXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHktc2VsZWN0XCIpLnZhbHVlO1xuICAgIHRvRG8ubGlzdFtncm91cFJlZl1bdGFza1JlZl0uZHVlRGF0ZSA9IFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RhdGUtc2VsZWN0XCIpLnZhbHVlO1xuICAgIHRvRG8ubGlzdFtncm91cFJlZl1bdGFza1JlZl0ubm90ZXMgPSBcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNub3Rlcy1pbnB1dFwiKS52YWx1ZTtcbiAgfTtcblxuICBjb25zdCBjaGVja05hbWUgPSAobmFtZSkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICBuYW1lLm1hdGNoKC9eXFxzezEsfSQvKSB8fFxuICAgICAgbmFtZSA9PT0gXCJcIlxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlU2luZ2xlID0gKG5vZGUpID0+IHtcbiAgICB0b0RvLmxpc3Rbbm9kZS5kYXRhc2V0Lmdyb3VwXS5zcGxpY2Uobm9kZS5kYXRhc2V0LmluZGV4LCAxKTtcbiAgICBub2RlLnJlbW92ZSgpO1xuICAgIGNvbnNvbGUubG9nKHRvRG8ubGlzdCk7XG4gIH07XG5cbiAgY29uc3QgcmVtb3ZlQ29tcGxldGVkID0gKGdyb3VwKSA9PiB7XG4gICAgaWYgKERPTS5kZWZhdWx0R3JvdXBzLmluZGV4T2YoZ3JvdXApID49IDApIHtcbiAgICAgIGNvbnN0IGtleUFycmF5ID0gT2JqZWN0LmtleXModG9Eby5saXN0KTtcbiAgICAgIE9iamVjdC52YWx1ZXModG9Eby5saXN0KS5mb3JFYWNoKChpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gKGl0ZW0ubGVuZ3RoIC0gMSk7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGl0ZW1baV0uY29tcGxldGVkID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0b0RvLmxpc3Rba2V5QXJyYXlbaW5kZXhdXS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b0RvLmxpc3RbZ3JvdXBdLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9ICh0b0RvLmxpc3RbZ3JvdXBdLmxlbmd0aCAtIDEpOyBpID49IDAgOyBpLS0pIHtcbiAgICAgICAgICBpZiAoaXRlbS5jb21wbGV0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRvRG8ubGlzdFtncm91cF0uc3BsaWNlKGksIDEpXG4gICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH07XG5cbiAgY29uc3QgY29uZmlybU1hc3NSZW1vdmUgPSAoKSA9PiB7XG4gICAgaWYgKERPTS5kZWZhdWx0R3JvdXBzLmluZGV4T2YoRE9NLnNlbGVjdGVkR3JvdXAudGV4dENvbnRlbnQpID49IDApIHtcbiAgICAgIHJldHVybiBjb25maXJtKGBUaGlzIHdpbGwgZGVsZXRlIGFsbCBjb21wbGV0ZWQgdGFza3MgaW4gZXZlcnkgZ3JvdXAuXFxuXFxuUGxlYXNlIGNsaWNrIFwiT0tcIiB0byBjb25maXJtIGRlbGV0aW9uLmApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gY29uZmlybShgVGhpcyB3aWxsIGRlbGV0ZSBhbGwgY29tcGxldGVkIHRhc2tzIGluIHRoZSAke0RPTS5zZWxlY3RlZEdyb3VwLnRleHRDb250ZW50fSBncm91cC5cXG5cXG5QbGVhc2UgY2xpY2sgXCJPS1wiIHRvIGNvbmZpcm0gZGVsZXRpb24uYCk7XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBfY2hhbmdlU3RhdHVzID0gKG5vZGUpID0+IHtcbiAgICBjb25zdCBncm91cERhdGEgPSBub2RlLmRhdGFzZXQuZ3JvdXA7XG4gICAgY29uc3QgdGFza0luZGV4ID0gbm9kZS5kYXRhc2V0LmluZGV4O1xuXG4gICAgaWYgKG5vZGUuY2hpbGRyZW5bMV0uZ2V0QXR0cmlidXRlKFwic3R5bGVcIikgPT09IG51bGwpIHtcbiAgICAgIHRvRG8ubGlzdFtncm91cERhdGFdW3Rhc2tJbmRleF0uY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgIG5vZGUuY2hpbGRyZW5bMV0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXG4gICAgICAgICAgXCJ1cmwoYXNzZXRzL2ltYWdlcy9pY29ucy9kb25lLWJsYWNrLTI0ZHAuc3ZnKVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b0RvLmxpc3RbZ3JvdXBEYXRhXVt0YXNrSW5kZXhdLmNvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgbm9kZS5jaGlsZHJlblsxXS5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICB9O1xuICAgIGNvbnNvbGUubG9nKHRvRG8ubGlzdCk7XG4gIH07XG5cbiAgY29uc3QgX2dldEluZm8gPSAobm9kZSkgPT4ge1xuICAgIGNvbnN0IGdyb3VwRGF0YSA9IG5vZGUuZGF0YXNldC5ncm91cDtcbiAgICBjb25zdCB0YXNrSW5kZXggPSBub2RlLmRhdGFzZXQuaW5kZXg7XG4gICAgLy8gc3RvcmUgcmVmZXJlbmNlIHRvIGdyb3VwIGFuZCBpbmRleCBvZiB0YXNrIGJlaW5nIHVwZGF0ZWRcbiAgICBET00ubW9kYWxCb3guZGF0YXNldC5pbmRleFJlZiA9IHRhc2tJbmRleDtcbiAgICBET00ubW9kYWxCb3guZGF0YXNldC5ncm91cFJlZiA9IGdyb3VwRGF0YTtcblxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKS52YWx1ZSA9IFxuICAgICAgICB0b0RvLmxpc3RbZ3JvdXBEYXRhXVt0YXNrSW5kZXhdLnRhc2tOYW1lO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZ3JvdXAtc2VsZWN0XCIpLnZhbHVlID0gZ3JvdXBEYXRhO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJpb3JpdHktc2VsZWN0XCIpLnZhbHVlID0gXG4gICAgICAgIHRvRG8ubGlzdFtncm91cERhdGFdW3Rhc2tJbmRleF0ucHJpb3JpdHk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNkYXRlLXNlbGVjdFwiKS52YWx1ZSA9IFxuICAgICAgICB0b0RvLmxpc3RbZ3JvdXBEYXRhXVt0YXNrSW5kZXhdLmR1ZURhdGU7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNub3Rlcy1pbnB1dFwiKS52YWx1ZSA9IFxuICAgICAgICB0b0RvLmxpc3RbZ3JvdXBEYXRhXVt0YXNrSW5kZXhdLm5vdGVzO1xuICB9O1xuXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXRhc2stYnRuXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGlmIChPYmplY3Qua2V5cyh0b0RvLmxpc3QpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgYWxlcnQoXCJObyBncm91cCBleGlzdHMgdG8gYWRkIHRhc2tzIHRvLlxcblxcblBsZWFzZSBjcmVhdGUgYSBncm91cCBiZWZvcmUgYWRkaW5nIGEgdGFzay5cIik7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhc2tNb2RhbC5yZW5kZXIoZSwgT2JqZWN0LmtleXModG9Eby5saXN0KSk7XG4gICAgICBnZW5lcmFsTW9kYWwub25PcGVuKCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgQXJyYXkuZnJvbShET00udGFza0l0ZW1zKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICBzd2l0Y2ggKGUudGFyZ2V0KSB7XG4gICAgICAgIC8vIHRhcmdldCBpcyBpdGVtJ3MgY2hlY2tib3hcbiAgICAgICAgY2FzZSBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bMV06XG4gICAgICAgICAgX2NoYW5nZVN0YXR1cyhlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgIC8vIHRvRG8uc2F2ZVRvTG9jYWwoKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgLy8gdGFyZ2V0IGlzIGl0ZW0ncyBuYW1lXG4gICAgICAgIGNhc2UgZS5jdXJyZW50VGFyZ2V0LmNoaWxkcmVuWzJdOlxuICAgICAgICAgIGUuY3VycmVudFRhcmdldC5jaGlsZHJlbls0XS5jbGFzc0xpc3QudG9nZ2xlKFwiZXhwYW5kZWRcIik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIC8vIHRhcmdldCBpcyBpdGVtJ3MgZWRpdCBidXR0b25cbiAgICAgICAgY2FzZSBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bNF0uY2hpbGRyZW5bMV06XG4gICAgICAgICAgdGFza01vZGFsLnJlbmRlcihlLCBPYmplY3Qua2V5cyh0b0RvLmxpc3QpKTtcbiAgICAgICAgICBfZ2V0SW5mbyhlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgIGdlbmVyYWxNb2RhbC5vbk9wZW4oKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgLy8gdGFyZ2V0IGlzIGl0ZW0ncyBkZWxldGUgYnV0dG9uXG4gICAgICAgIGNhc2UgZS5jdXJyZW50VGFyZ2V0LmNoaWxkcmVuWzRdLmNoaWxkcmVuWzJdOlxuICAgICAgICAgIGlmIChjb25maXJtKGBQbGVhc2UgY2xpY2sgXCJPS1wiIHRvIGNvbmZpcm0gZGVsZXRpb24gb2YgdGFzayBcIiR7ZS5jdXJyZW50VGFyZ2V0LmNoaWxkcmVuWzJdLnRleHRDb250ZW50fVwiLmApKSB7XG4gICAgICAgICAgICByZW1vdmVTaW5nbGUoZS5jdXJyZW50VGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIHRvRG8uc2F2ZVRvTG9jYWwoKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybjtcbiAgICAgIH07XG4gICAgfSk7XG4gIH0pO1xuXG4gIEFycmF5LmZyb20oRE9NLnRhc2tJdGVtcykuZm9yRWFjaChpdGVtID0+IHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIChlKSA9PiB7XG4gICAgICBpZiAoZS5rZXkgPT09IFwiIFwiKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bMV0pIHtcbiAgICAgICAgICBfY2hhbmdlU3RhdHVzKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgICAgLy8gdG9Eby5zYXZlVG9Mb2NhbCgpO1xuICAgICAgICB9IGVsc2UgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bMl0pIHtcbiAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bNF0uY2xhc3NMaXN0LnRvZ2dsZShcImV4cGFuZGVkXCIpO1xuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb25maXJtTWFzc1JlbW92ZSxcbiAgICBjcmVhdGUsXG4gICAgdXBkYXRlLFxuICAgIHJlbW92ZUNvbXBsZXRlZCxcbiAgICByZW1vdmVTaW5nbGUsXG4gICAgY2hlY2tOYW1lXG4gIH1cbn0pKCk7XG5cbmNvbnN0IGdyb3VwcyA9ICgoKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZSA9IChuYW1lKSA9PiB7XG4gICAgdG9Eby5saXN0W25hbWVdID0gW107XG4gICAgY29uc29sZS5sb2codG9Eby5saXN0KTtcbiAgfTtcblxuICBjb25zdCB1cGRhdGUgPSAob2xkTmFtZSwgbmV3TmFtZSkgPT4ge1xuICAgIGRlbGV0ZSBPYmplY3QuYXNzaWduKHRvRG8ubGlzdCwge1tuZXdOYW1lXTogdG9Eby5saXN0W29sZE5hbWVdfSlbb2xkTmFtZV07XG4gICAgY29uc29sZS5sb2codG9Eby5saXN0KTtcbiAgfTtcblxuICBjb25zdCByZW1vdmUgPSAobmFtZSkgPT4ge1xuICAgIGRlbGV0ZSB0b0RvLmxpc3RbbmFtZV07XG4gICAgY29uc29sZS5sb2codG9Eby5saXN0KTtcbiAgfTtcblxuICBjb25zdCBjaGVja05hbWUgPSAobmFtZSkgPT4ge1xuICAgIHJldHVybiAoXG4gICAgICBET00uZGVmYXVsdEdyb3Vwcy5pbmRleE9mKG5hbWUpID49IDAgfHxcbiAgICAgIE9iamVjdC5rZXlzKHRvRG8ubGlzdCkuaW5kZXhPZihuYW1lKSA+PSAwIHx8XG4gICAgICBuYW1lLm1hdGNoKC9eXFxzezEsfSQvKSB8fFxuICAgICAgbmFtZSA9PT0gXCJcIlxuICAgICk7XG4gIH07XG5cbiAgY29uc3QgX3NldEluYWN0aXZlID0gKCkgPT4ge1xuICAgIEFycmF5LmZyb20oRE9NLmdyb3VwQnV0dG9ucykuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgX3NldEFjdGl2ZSA9ICh0YXJnZXQpID0+IHtcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgfTtcblxuICBET00ubmF2LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJncm91cC1idG5cIikpIHtcbiAgICAgIF9zZXRJbmFjdGl2ZSgpO1xuICAgICAgX3NldEFjdGl2ZShlLnRhcmdldCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjcmVhdGUsXG4gICAgdXBkYXRlLFxuICAgIHJlbW92ZSxcbiAgICBjaGVja05hbWVcbiAgfVxufSkoKTtcblxuY29uc3QgbW9kYWxFdmVudHMgPSAoKCkgPT4ge1xuICBET00ubW9kYWxCb3guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgY29uc3QgbmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lLWlucHV0XCIpO1xuXG4gICAgc3dpdGNoIChlLnRhcmdldCkge1xuICAgICAgY2FzZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnN1Ym1pdC1ncm91cC1idG5cIik6XG4gICAgICBjYXNlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXBkYXRlLWdyb3VwLWJ0blwiKTpcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoZ3JvdXBzLmNoZWNrTmFtZShuYW1lSW5wdXQudmFsdWUpKSB7XG4gICAgICAgICAgYWxlcnQoXCJHcm91cCBuYW1lIGNhbm5vdCBiZSBibGFuayBhbmQgY2Fubm90IGFscmVhZHkgYmUgdGFrZW4uXFxuXFxuUGxlYXNlIGVudGVyIGEgbmV3IG5hbWUuXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwic3VibWl0LWdyb3VwLWJ0blwiKSkge1xuICAgICAgICAgICAgZ3JvdXBzLmNyZWF0ZShuYW1lSW5wdXQudmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBncm91cHMudXBkYXRlKERPTS5zZWxlY3RlZEdyb3VwLnRleHRDb250ZW50LCBuYW1lSW5wdXQudmFsdWUpO1xuICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgICAgLy8gdG9Eby5zYXZlVG9Mb2NhbCgpO1xuICAgICAgICAgIGdlbmVyYWxNb2RhbC5vbkNsb3NlKCk7XG4gICAgICAgICAgZ3JvdXBDb250YWluZXIucmVuZGVyKHRvRG8ubGlzdCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgLy8gY2FzZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnVwZGF0ZS1ncm91cC1idG5cIik6XG4gICAgICAvLyAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIC8vICAgaWYgKGdyb3Vwcy5jaGVja05hbWUobmFtZUlucHV0LnZhbHVlKSkge1xuICAgICAgLy8gICAgIGFsZXJ0KFwiR3JvdXAgbmFtZSBjYW5ub3QgYmUgYmxhbmsgYW5kIGNhbm5vdCBhbHJlYWR5IGJlIHRha2VuLlxcblxcblBsZWFzZSBlbnRlciBhIG5ldyBuYW1lLlwiKTtcbiAgICAgIC8vICAgICByZXR1cm47XG4gICAgICAvLyAgIH0gZWxzZSB7XG4gICAgICAvLyAgICAgZ3JvdXBzLnVwZGF0ZShET00uc2VsZWN0ZWRHcm91cC50ZXh0Q29udGVudCwgbmFtZUlucHV0LnZhbHVlKTtcbiAgICAgIC8vICAgICAvLyB0b0RvLnNhdmVUb0xvY2FsKCk7XG4gICAgICAvLyAgICAgZ2VuZXJhbE1vZGFsLm9uQ2xvc2UoKTtcbiAgICAgIC8vICAgICBncm91cENvbnRhaW5lci5yZW5kZXIodG9Eby5saXN0KTtcbiAgICAgIC8vICAgfTtcbiAgICAgIC8vICAgYnJlYWs7XG4gICAgICBjYXNlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVsZXRlLWdyb3VwLWJ0blwiKTpcbiAgICAgICAgaWYgKGNvbmZpcm0oYFRoaXMgd2lsbCBkZWxldGUgdGhlICR7RE9NLnNlbGVjdGVkR3JvdXAudGV4dENvbnRlbnR9IGdyb3VwLCBhbG9uZyB3aXRoIGFueSB0YXNrcyB3aXRoaW4gaXQuXFxuXFxuUGxlYXNlIGNsaWNrIFwiT0tcIiB0byBjb25maXJtIGRlbGV0aW9uLmApKSB7XG4gICAgICAgICAgZ3JvdXBzLnJlbW92ZShET00uc2VsZWN0ZWRHcm91cC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgLy8gdG9Eby5zYXZlVG9Mb2NhbCgpO1xuICAgICAgICAgIGdlbmVyYWxNb2RhbC5vbkNsb3NlKCk7XG4gICAgICAgICAgZ3JvdXBDb250YWluZXIucmVuZGVyKHRvRG8ubGlzdCk7XG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlbGV0ZS1jb21wbGV0ZWQtYnRuXCIpOlxuICAgICAgICBpZiAodGFza3MuY29uZmlybU1hc3NSZW1vdmUoKSkge1xuICAgICAgICAgIHRhc2tzLnJlbW92ZUNvbXBsZXRlZChET00uc2VsZWN0ZWRHcm91cC50ZXh0Q29udGVudCk7XG4gICAgICAgICAgLy8gdG9Eby5zYXZlVG9Mb2NhbCgpO1xuICAgICAgICAgIGdlbmVyYWxNb2RhbC5vbkNsb3NlKCk7XG4gICAgICAgICAgY29uc29sZS5sb2codG9Eby5saXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLXNpbmdsZS1idG5cIik6XG4gICAgICBjYXNlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYWRkLW1hbnktYnRuXCIpOlxuICAgICAgICBjb25zdCBncm91cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZ3JvdXAtc2VsZWN0XCIpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0YXNrcy5jaGVja05hbWUobmFtZUlucHV0LnZhbHVlKSkge1xuICAgICAgICAgIGFsZXJ0KFwiVGFzayBuYW1lIGNhbm5vdCBiZSBibGFuay5cXG5cXG5QbGVhc2UgZW50ZXIgYSBuZXcgbmFtZS5cIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG5ld1Rhc2sgPSB0YXNrcy5jcmVhdGUoXG4gICAgICAgICAgICBuYW1lSW5wdXQudmFsdWUsXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5LXNlbGVjdFwiKS52YWx1ZSxcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGF0ZS1zZWxlY3RcIikudmFsdWUsXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25vdGVzLWlucHV0XCIpLnZhbHVlLFxuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICApO1xuICAgICAgICAgIHRvRG8ubGlzdFtncm91cC52YWx1ZV0ucHVzaChuZXdUYXNrKTtcbiAgICAgICAgICAvLyB0b0RvLnNhdmVUb0xvY2FsKCk7XG4gICAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFkZC1tYW55LWJ0blwiKSkge1xuICAgICAgICAgICAgbmFtZUlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICBuYW1lSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgZ3JvdXAuc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByaW9yaXR5LXNlbGVjdFwiKS52YWx1ZSA9IFwiTm9ybWFsXCI7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RhdGUtc2VsZWN0XCIpLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbm90ZXMtaW5wdXRcIikudmFsdWUgPSBcIlwiO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZW5lcmFsTW9kYWwub25DbG9zZSgpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgY29uc29sZS5sb2codG9Eby5saXN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudXBkYXRlLXRhc2stYnRuXCIpOlxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0YXNrcy5jaGVja05hbWUobmFtZUlucHV0LnZhbHVlKSkge1xuICAgICAgICAgIGFsZXJ0KFwiVGFzayBuYW1lIGNhbm5vdCBiZSBibGFuay5cXG5cXG5QbGVhc2UgZW50ZXIgYSBuZXcgbmFtZS5cIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhc2tzLnVwZGF0ZSgpO1xuICAgICAgICAgIC8vIHRvRG8uc2F2ZVRvTG9jYWwoKTtcbiAgICAgICAgICBnZW5lcmFsTW9kYWwub25DbG9zZSgpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHRvRG8ubGlzdCk7XG4gICAgICAgIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuO1xuICAgIH07XG4gIH0pO1xufSkoKTtcblxuZXhwb3J0IHsgZ3JvdXBzLCBtb2RhbEV2ZW50cywgdGFza3MsIHRvRG8gfTtcbiIsIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgJy4vc3R5bGUuY3NzJztcbmltcG9ydCB7IGFjY2Vzc2liaWxpdHlPcHRpb25zLCBkaXNwbGF5T3B0aW9ucyB9IGZyb20gXCIuL3NpdGUtc2V0dGluZ3NcIjtcbmltcG9ydCB7IGdyb3VwTW9kYWwsIHdhcm5pbmdNb2RhbCB9IGZyb20gXCIuL21vZGFsc1wiO1xuaW1wb3J0IHsgZ3JvdXBzLCBtb2RhbEV2ZW50cywgdGFza3MsIHRvRG8gfSBmcm9tIFwiLi9sb2dpY1wiO1xuaW1wb3J0IGZvcm1hdCBmcm9tICdkYXRlLWZucy9mb3JtYXQnO1xuXG5jb25zb2xlLmxvZyh0b0RvLmxpc3QpO1xuXG5jb25zdCBET00gPSAoKCkgPT4ge1xuICBjb25zdCBtZW51Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtYWluLW5hdlwiKTtcbiAgY29uc3QgbWVudU9wZW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtYnV0dG9uXCIpO1xuICBjb25zdCBtZW51Q2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1lbnUtY2xvc2UtYnV0dG9uXCIpO1xuICBcbiAgcmV0dXJuIHtcbiAgICBtZW51Q29udGFpbmVyLFxuICAgIG1lbnVPcGVuQnV0dG9uLFxuICAgIG1lbnVDbG9zZUJ1dHRvblxuICB9XG59KSgpO1xuXG5jb25zdCBtZW51VmlzaWJpbGl0eSA9ICgoKSA9PiB7XG4gIGNvbnN0IF9vblNjcmVlblNpemUgPSAoKSA9PiB7XG4gICAgaWYgKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCA+IDc2Mykge1xuICAgICAgRE9NLm1lbnVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwidmlzaWJsZVwiO1xuICAgICAgRE9NLm1lbnVDb250YWluZXIuc3R5bGUubGVmdCA9IFwiMFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBET00ubWVudUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJoaWRkZW5cIjtcbiAgICAgIERPTS5tZW51Q29udGFpbmVyLnN0eWxlLmxlZnQgPSBcIi04MDBweFwiO1xuICAgIH07XG4gIH07XG4gIFxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBfb25TY3JlZW5TaXplKTtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIF9vblNjcmVlblNpemUpO1xuXG4gIGNvbnN0IF90b2dnbGVNZW51ID0gKCkgPT4ge1xuICAgIGlmIChET00ubWVudUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID09PSBcImhpZGRlblwiKSB7XG4gICAgICBET00ubWVudUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICBET00ubWVudUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gXCIwXCI7XG4gICAgICBET00ubWVudUNsb3NlQnV0dG9uLmZvY3VzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIERPTS5tZW51Q29udGFpbmVyLnN0eWxlLmxlZnQgPSBcIi04MDBweFwiO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIERPTS5tZW51Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiXG4gICAgICB9LCA2MDApO1xuICAgICAgRE9NLm1lbnVPcGVuQnV0dG9uLmZvY3VzKCk7XG4gICAgfTtcbiAgfTtcblxuICBET00ubWVudU9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF90b2dnbGVNZW51KTtcbiAgRE9NLm1lbnVDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX3RvZ2dsZU1lbnUpO1xufSkoKTsiXSwic291cmNlUm9vdCI6IiJ9