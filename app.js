!function(){"use strict";const e={accessibilityContainer:document.querySelector("#accessibility-container"),animationSwitch:document.querySelector("#animation-switch"),githubLogo:document.querySelector("#lower-nav img"),themeSwitch:document.querySelector("#theme-switch")},t=()=>{localStorage.setItem("theme",document.documentElement.getAttribute("theme")),localStorage.setItem("animations-enabled",e.animationSwitch.getAttribute("aria-checked"))},n=((()=>{const n=e=>{"light"===document.documentElement.getAttribute("theme")?a():o(),t()},a=()=>{e.themeSwitch.setAttribute("aria-checked","false"),document.documentElement.setAttribute("theme","dark"),e.themeSwitch.style.backgroundPosition="center bottom -0.8rem",e.githubLogo.setAttribute("src","assets/images/logos/GitHub-Mark-Light-32px.png")},o=()=>{e.themeSwitch.setAttribute("aria-checked","true"),document.documentElement.setAttribute("theme","light"),e.themeSwitch.style.backgroundPosition="center top 2px",e.githubLogo.setAttribute("src","assets/images/logos/GitHub-Mark-32px.png")};e.themeSwitch.addEventListener("click",n),e.themeSwitch.addEventListener("keydown",(e=>{" "===e.key&&(e.preventDefault(),n())})),window.addEventListener("load",(()=>{"light"===localStorage.getItem("theme")?o():a()}))})(),(()=>{const n=()=>{"true"===e.animationSwitch.getAttribute("aria-checked")?o():a(),t()},a=()=>{e.animationSwitch.setAttribute("aria-checked","true"),document.documentElement.style.scrollBehavior="smooth",e.accessibilityContainer.style.transition="top 0.75s ease-in-out",e.animationSwitch.textContent="Animations Enabled",e.themeSwitch.style.transition="background-position 0.3s ease-in",document.querySelector("#main-nav").style.transition="left 0.5s",Array.from(document.querySelectorAll(".label-arrow")).forEach((e=>{e.style.transition="transform 0.75s"}))},o=()=>{e.animationSwitch.setAttribute("aria-checked","false"),document.documentElement.style.scrollBehavior="auto",e.animationSwitch.setAttribute("aria-checked","false"),e.animationSwitch.textContent="Animations Disabled",Array.from(document.querySelectorAll(".animated")).forEach((e=>{e.style.transition="none"}))};return e.animationSwitch.addEventListener("click",n),e.animationSwitch.addEventListener("keydown",(e=>{" "===e.key&&(e.preventDefault(),n())})),window.addEventListener("load",(()=>{"false"===localStorage.getItem("animations-enabled")?o():a()})),{animationsEnabled:a,animationsDisabled:o}})()),a={addGroupBtn:document.querySelector(".add-group-btn"),addTaskBtn:document.querySelector(".add-task-btn"),defaultGroups:["Important","Next 7 Days","Later","Eventually"],groupButtons:document.getElementsByClassName("group-btn"),groupOptionBtn:document.querySelector(".group-option-btn"),modalBox:document.querySelector(".modal-box"),modalContainer:document.querySelector(".modal-container"),selectedGroup:document.querySelector(".selected-group")},o=(()=>{const e=()=>{for(;a.modalBox.firstChild;)a.modalBox.removeChild(a.modalBox.firstChild);a.modalContainer.style.display="none"};return window.addEventListener("keydown",(t=>{"Escape"===t.key&&e()})),{createCloseBtn:()=>{const e=document.createElement("button");e.setAttribute("type","button"),e.setAttribute("aria-label","Close modal"),e.classList.add("modal-close-button","close-btn","focusable"),e.addEventListener("click",o.onClose),a.modalBox.appendChild(e)},onClose:e,onOpen:()=>{a.modalContainer.style.display="flex",document.querySelector(".modal-close-button").focus()}}})(),i=((()=>{const e=e=>{e.target.classList.contains("disable-button")?n.animationsDisabled():e.target.classList.contains("enable-button")&&n.animationsEnabled(),t(),o.onClose()};window.addEventListener("load",(()=>{0===localStorage.length&&(()=>{const t=document.createElement("h1"),n=document.createElement("p"),o=document.createElement("p"),i=document.createElement("button"),s=document.createElement("button");t.textContent="This site uses minimal animation effects.",n.textContent="Effects include moving menus and smooth scrolling. If you suffer from a vestibular disorder or otherwise prefer no animations, you can turn them off by clicking the first button below.",o.textContent="You can later change this setting in the Display & Accessibility tab at the top of the page.",i.setAttribute("type","button"),i.classList.add("disable-button","focusable","primary-btn"),i.textContent="DISABLE ANIMATIONS",i.addEventListener("click",e),s.setAttribute("type","button"),s.classList.add("enable-button","focusable","secondary-btn"),s.textContent="ENABLE ANIMATIONS",s.addEventListener("click",e),a.modalBox.appendChild(t),a.modalBox.appendChild(n),a.modalBox.appendChild(o),a.modalBox.appendChild(i),a.modalBox.appendChild(s),a.modalContainer.style.display="flex"})()}))})(),(()=>{const e=e=>{const t=document.createElement("form"),n=document.createElement("fieldset"),i=document.createElement("legend"),s=document.createElement("div"),l=document.createElement("label"),r=document.createElement("input"),d=document.createElement("input");if(o.createCloseBtn(),l.setAttribute("for","name-input"),l.textContent="Group Name",r.setAttribute("type","text"),r.setAttribute("required","true"),r.setAttribute("id","name-input"),r.classList.add("focusable"),e.target.classList.contains("add-group-btn"))i.textContent="Add a Group",d.setAttribute("type","submit"),d.setAttribute("value","ADD GROUP"),d.classList.add("submit-group-btn","primary-btn","focusable","submit"),s.appendChild(d);else if(e.target.classList.contains("group-option-btn")){const e=document.createElement("button"),t=document.createElement("button");i.textContent="Group Options",d.setAttribute("type","submit"),d.setAttribute("value","UPDATE"),d.classList.add("update-group-btn","secondary-btn","focusable","submit"),e.setAttribute("type","button"),e.classList.add("delete-group-btn","delete-btn","focusable"),e.textContent="DELETE GROUP",t.setAttribute("type","button"),t.classList.add("delete-completed-btn","delete-btn","focusable"),t.textContent="DELETE COMPLETED TASKS",a.defaultGroups.indexOf(a.selectedGroup.textContent)>=0&&(l.style.opacity="0.38",r.setAttribute("disabled","true"),r.style.opacity="0.38",d.setAttribute("disabled","true"),d.style.opacity="0.38",e.setAttribute("disabled","true"),e.style.opacity="0.38"),s.appendChild(d),s.appendChild(e),s.appendChild(t)}n.appendChild(i),n.appendChild(l),n.appendChild(r),n.appendChild(s),t.appendChild(n),a.modalBox.appendChild(t)};a.groupOptionBtn.addEventListener("click",(t=>{e(t),o.onOpen()})),a.addGroupBtn.addEventListener("click",(t=>{e(t),o.onOpen()}))})(),a.addTaskBtn.addEventListener("click",(e=>{(e=>{const t=document.createElement("form"),n=document.createElement("fieldset"),i=document.createElement("legend"),s=document.createElement("div"),l=document.createElement("label"),r=document.createElement("input"),d=document.createElement("label"),c=document.createElement("select"),u=document.createElement("label"),m=document.createElement("select"),p=document.createElement("option"),b=document.createElement("option"),h=document.createElement("label"),y=document.createElement("input"),E=document.createElement("label"),C=document.createElement("textarea");if(o.createCloseBtn(),l.setAttribute("for","name-input"),l.textContent="Task Name (required)",r.setAttribute("type","text"),r.setAttribute("id","name-input"),r.setAttribute("placeholder","Enter a task name"),r.setAttribute("required","true"),r.className="focusable",d.setAttribute("for","group-select"),d.textContent="Group",c.setAttribute("id","group-select"),c.className="focusable",u.setAttribute("for","priority-select"),u.textContent="Priority",m.setAttribute("id","priority-select"),m.className="focusable",p.textContent="Normal",b.textContent="Important",m.appendChild(p),m.appendChild(b),h.setAttribute("for","date-select"),h.textContent="Due Date (optional)",y.setAttribute("type","date"),y.setAttribute("id","date-select"),y.className="focusable",E.setAttribute("for","notes-input"),E.textContent="Additional Notes",C.setAttribute("id","notes-input"),C.setAttribute("placeholder","Enter any additional notes for the task"),C.className="focusable",e.target.textContent.includes("ADD TASK")){const e=document.createElement("input"),t=document.createElement("input");i.textContent="Add a Task",e.setAttribute("type","submit"),e.setAttribute("value","ADD ONE"),e.setAttribute("aria-label","Add task and close modal"),e.classList.add("add-single-btn","primary-btn","submit","focusable"),t.setAttribute("type","submit"),t.setAttribute("value","ADD MANY"),t.setAttribute("aria-label","Add task and keep modal open"),t.classList.add("add-many-btn","secondary-btn","submit","focusable"),s.appendChild(e),s.appendChild(t)}else if("EDIT"===e.target.textContent){const e=document.createElement("input");i.textContent="Edit Task",e.setAttribute("type","submit"),e.setAttribute("value","UPDATE"),e.setAttribute("aria-label","Update task and close modal"),e.classList.add("update-task-btn","primary-btn","focusable"),s.appendChild(e)}n.appendChild(i),n.appendChild(l),n.appendChild(r),n.appendChild(d),n.appendChild(document.createElement("br")),n.appendChild(c),n.appendChild(document.createElement("br")),n.appendChild(u),n.appendChild(document.createElement("br")),n.appendChild(m),n.appendChild(document.createElement("br")),n.appendChild(h),n.appendChild(document.createElement("br")),n.appendChild(y),n.appendChild(document.createElement("br")),n.appendChild(E),n.appendChild(C),n.appendChild(s),t.appendChild(n),a.modalBox.appendChild(t)})(e),o.onOpen()})),{defaultGroups:["Important","Next 7 Days","Later","Eventually"],groupButtons:document.getElementsByClassName("group-btn"),modalBox:document.querySelector(".modal-box"),taskItems:document.getElementsByClassName("task-item")}),s=(()=>{const e=JSON.parse(localStorage.getItem("toDo-list"))||{Example:[{taskName:"Do the dishes",priority:"Normal",due:"",notes:"Let the pans soak, put the plates in the dishwasher, wash the mugs by hand.\n\nWash pans after 30 minutes soaking."},{taskName:"Bring Muffin to vet",priority:"Important",due:"2021-03-05",notes:"Pack her favorite toy so she stays calm."}]};return{list:e,saveToLocal:()=>{localStorage.setItem("toDo-list",JSON.stringify(e))}}})();Array.from(i.taskItems).forEach((e=>{e.addEventListener("click",(e=>{switch(e.target){case e.currentTarget.children[1]:null===(t=e.currentTarget.children[1]).getAttribute("style")?t.style.backgroundImage="url(assets/images/icons/done-black-24dp.svg)":t.removeAttribute("style");break;case e.currentTarget.children[2]:e.currentTarget.children[4].classList.toggle("expanded");break;default:return}var t}))})),Array.from(i.groupButtons).forEach((e=>{e.addEventListener("click",(()=>{Array.from(i.groupButtons).forEach((e=>{e.classList.remove("active")})),e.classList.add("active")}))})),i.modalBox.addEventListener("click",(e=>{switch(e.target){case document.querySelector(".submit-group-btn"):if(e.preventDefault(),t=document.querySelector("#name-input").value,i.defaultGroups.indexOf(t)>=0||Object.keys(s.list).indexOf(t)>=0||""===t)return void alert("Please  a new name.");(e=>{s.list[e]=[],s.saveToLocal(),console.log(s.list)})(document.querySelector("#name-input").value),s.saveToLocal(),o.onClose();break;default:return}var t})),console.log(s.list);const l={menuContainer:document.querySelector("#main-nav"),menuOpenButton:document.querySelector(".menu-button"),menuCloseButton:document.querySelector(".menu-close-button")};(()=>{const e=()=>{document.documentElement.scrollWidth>763?(l.menuContainer.style.visibility="visible",l.menuContainer.style.left="0"):(l.menuContainer.style.visibility="hidden",l.menuContainer.style.left="-800px")};window.addEventListener("resize",e),window.addEventListener("load",e);const t=()=>{"hidden"===l.menuContainer.style.visibility?(l.menuContainer.style.visibility="visible",l.menuContainer.style.left="0",l.menuCloseButton.focus()):(l.menuContainer.style.left="-800px",setTimeout((()=>{l.menuContainer.style.visibility="hidden"}),600),l.menuOpenButton.focus())};l.menuOpenButton.addEventListener("click",t),l.menuCloseButton.addEventListener("click",t)})()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc2l0ZS1zZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvbW9kYWxzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9sb2dpYy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsiRE9NIiwiYWNjZXNzaWJpbGl0eUNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFuaW1hdGlvblN3aXRjaCIsImdpdGh1YkxvZ28iLCJ0aGVtZVN3aXRjaCIsInNldHRpbmdzIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsImRvY3VtZW50RWxlbWVudCIsImdldEF0dHJpYnV0ZSIsImFjY2Vzc2liaWxpdHlPcHRpb25zIiwiX3RvZ2dsZVRoZW1lIiwiZSIsIl9kYXJrVGhlbWUiLCJfbGlnaHRUaGVtZSIsInNldEF0dHJpYnV0ZSIsInN0eWxlIiwiYmFja2dyb3VuZFBvc2l0aW9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImtleSIsInByZXZlbnREZWZhdWx0Iiwid2luZG93IiwiZ2V0SXRlbSIsIl90b2dnbGVBbmltYXRpb25zIiwiYW5pbWF0aW9uc0Rpc2FibGVkIiwiYW5pbWF0aW9uc0VuYWJsZWQiLCJzY3JvbGxCZWhhdmlvciIsInRyYW5zaXRpb24iLCJ0ZXh0Q29udGVudCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaXRlbSIsImFkZEdyb3VwQnRuIiwiYWRkVGFza0J0biIsImRlZmF1bHRHcm91cHMiLCJncm91cEJ1dHRvbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiZ3JvdXBPcHRpb25CdG4iLCJtb2RhbEJveCIsIm1vZGFsQ29udGFpbmVyIiwic2VsZWN0ZWRHcm91cCIsImdlbmVyYWxNb2RhbCIsIm9uQ2xvc2UiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJkaXNwbGF5IiwiY3JlYXRlQ2xvc2VCdG4iLCJjbG9zZUJ0biIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJhZGQiLCJhcHBlbmRDaGlsZCIsIm9uT3BlbiIsImZvY3VzIiwiX3NlbGVjdE9wdGlvbiIsInRhcmdldCIsImNvbnRhaW5zIiwibGVuZ3RoIiwiaGVhZGluZyIsInBhcmExIiwicGFyYTIiLCJkaXNhYmxlQnV0dG9uIiwiZW5hYmxlQnV0dG9uIiwiX3JlbmRlciIsImZvcm0iLCJmaWVsZHNldCIsImxlZ2VuZCIsImRpdiIsIm5hbWVMYWJlbCIsIm5hbWVJbnB1dCIsIm1haW5CdG4iLCJkZWxldGVHcm91cCIsImRlbGV0ZUNvbXBsZXRlZCIsImluZGV4T2YiLCJvcGFjaXR5IiwiZ3JvdXBMYWJlbCIsImdyb3VwU2VsZWN0IiwicHJpb3JpdHlMYWJlbCIsInByaW9yaXR5U2VsZWN0IiwicHJpb3JpdHlPcHRpb24xIiwicHJpb3JpdHlPcHRpb24yIiwiZGF0ZUxhYmVsIiwiZGF0ZUlucHV0Iiwibm90ZXNMYWJlbCIsIm5vdGVzSW5wdXQiLCJjbGFzc05hbWUiLCJpbmNsdWRlcyIsImFkZE9uZUJ0biIsImFkZE1hbnlCdG4iLCJlZGl0QnRuIiwidGFza0l0ZW1zIiwidG9EbyIsImxpc3QiLCJKU09OIiwicGFyc2UiLCJFeGFtcGxlIiwidGFza05hbWUiLCJwcmlvcml0eSIsImR1ZSIsIm5vdGVzIiwic2F2ZVRvTG9jYWwiLCJzdHJpbmdpZnkiLCJjdXJyZW50VGFyZ2V0IiwiY2hpbGRyZW4iLCJub2RlIiwiYmFja2dyb3VuZEltYWdlIiwicmVtb3ZlQXR0cmlidXRlIiwidG9nZ2xlIiwiYnV0dG9uIiwicmVtb3ZlIiwibmFtZSIsInZhbHVlIiwiT2JqZWN0Iiwia2V5cyIsImFsZXJ0IiwiY29uc29sZSIsImxvZyIsImNyZWF0ZSIsIm1lbnVDb250YWluZXIiLCJtZW51T3BlbkJ1dHRvbiIsIm1lbnVDbG9zZUJ1dHRvbiIsIl9vblNjcmVlblNpemUiLCJzY3JvbGxXaWR0aCIsInZpc2liaWxpdHkiLCJsZWZ0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RUFBS0MsTUFFakIsTUFBTSxFQUtHLENBQ0wwQixjQUxvQnhILFNBQVNDLGNBQWMsYUFNM0N3SCxlQUxxQnpILFNBQVNDLGNBQWMsZ0JBTTVDeUgsZ0JBTHNCMUgsU0FBU0MsY0FBYyx1QkFTMUIsTUFDckIsTUFBTTBILEVBQWdCLEtBQ2hCM0gsU0FBU1EsZ0JBQWdCb0gsWUFBYyxLQUN6QyxFQUFJSixjQUFjeEcsTUFBTTZHLFdBQWEsVUFDckMsRUFBSUwsY0FBY3hHLE1BQU04RyxLQUFPLE1BRS9CLEVBQUlOLGNBQWN4RyxNQUFNNkcsV0FBYSxTQUNyQyxFQUFJTCxjQUFjeEcsTUFBTThHLEtBQU8sV0FJbkN6RyxPQUFPSCxpQkFBaUIsU0FBVXlHLEdBQ2xDdEcsT0FBT0gsaUJBQWlCLE9BQVF5RyxHQUVoQyxNQUFNSSxFQUFjLEtBQ3lCLFdBQXZDLEVBQUlQLGNBQWN4RyxNQUFNNkcsWUFDMUIsRUFBSUwsY0FBY3hHLE1BQU02RyxXQUFhLFVBQ3JDLEVBQUlMLGNBQWN4RyxNQUFNOEcsS0FBTyxJQUMvQixFQUFJSixnQkFBZ0JuRSxVQUVwQixFQUFJaUUsY0FBY3hHLE1BQU04RyxLQUFPLFNBQy9CRSxZQUFXLEtBQ1QsRUFBSVIsY0FBY3hHLE1BQU02RyxXQUFhLFdBQ3BDLEtBQ0gsRUFBSUosZUFBZWxFLFVBSXZCLEVBQUlrRSxlQUFldkcsaUJBQWlCLFFBQVM2RyxHQUM3QyxFQUFJTCxnQkFBZ0J4RyxpQkFBaUIsUUFBUzZHLElBN0J6QixHIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5jb25zdCBET00gPSAoKCkgPT4ge1xuICBjb25zdCBhY2Nlc3NpYmlsaXR5Q29udGFpbmVyID0gXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWNjZXNzaWJpbGl0eS1jb250YWluZXJcIik7XG4gIGNvbnN0IGFuaW1hdGlvblN3aXRjaCA9IFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FuaW1hdGlvbi1zd2l0Y2hcIik7XG4gIGNvbnN0IGdpdGh1YkxvZ28gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2xvd2VyLW5hdiBpbWdcIik7XG4gIGNvbnN0IHRoZW1lU3dpdGNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0aGVtZS1zd2l0Y2hcIik7XG5cbiAgcmV0dXJuIHtcbiAgICBhY2Nlc3NpYmlsaXR5Q29udGFpbmVyLFxuICAgIGFuaW1hdGlvblN3aXRjaCxcbiAgICBnaXRodWJMb2dvLFxuICAgIHRoZW1lU3dpdGNoXG4gIH1cbn0pKCk7XG5cbmNvbnN0IHNldHRpbmdzID0gKCgpID0+IHtcbiAgY29uc3Qgc2F2ZVRvTG9jYWwgPSAoKSA9PiB7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICBcInRoZW1lXCIsIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJ0aGVtZVwiKSk7XG5cbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImFuaW1hdGlvbnMtZW5hYmxlZFwiLCBcbiAgICAgICAgRE9NLmFuaW1hdGlvblN3aXRjaC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWNoZWNrZWRcIikpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgc2F2ZVRvTG9jYWxcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IGRpc3BsYXlPcHRpb25zID0gKCgpID0+IHtcbiAgY29uc3QgX29uTG9hZCA9ICgpID0+IHtcbiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0aGVtZVwiKSA9PT0gXCJsaWdodFwiKSB7XG4gICAgICBfbGlnaHRUaGVtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfZGFya1RoZW1lKCk7XG4gICAgfTtcbiAgfTtcblxuICBjb25zdCBfdG9nZ2xlVGhlbWUgPSAoZSkgPT4ge1xuICAgIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwidGhlbWVcIikgPT09IFwibGlnaHRcIikge1xuICAgICAgX2RhcmtUaGVtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBfbGlnaHRUaGVtZSgpO1xuICAgIH07XG4gICAgc2V0dGluZ3Muc2F2ZVRvTG9jYWwoKTtcbiAgfTtcblxuICBjb25zdCBfZGFya1RoZW1lID0gKCkgPT4ge1xuICAgIERPTS50aGVtZVN3aXRjaC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWNoZWNrZWRcIiwgXCJmYWxzZVwiKTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2V0QXR0cmlidXRlKFwidGhlbWVcIiwgXCJkYXJrXCIpO1xuICAgIERPTS50aGVtZVN3aXRjaC5zdHlsZS5iYWNrZ3JvdW5kUG9zaXRpb24gPSBcImNlbnRlciBib3R0b20gLTAuOHJlbVwiO1xuICAgIERPTS5naXRodWJMb2dvLnNldEF0dHJpYnV0ZShcInNyY1wiLFxuICAgICAgICBcImFzc2V0cy9pbWFnZXMvbG9nb3MvR2l0SHViLU1hcmstTGlnaHQtMzJweC5wbmdcIik7XG4gIH07XG5cbiAgY29uc3QgX2xpZ2h0VGhlbWUgPSAoKSA9PiB7XG4gICAgRE9NLnRoZW1lU3dpdGNoLnNldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiLCBcInRydWVcIik7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNldEF0dHJpYnV0ZShcInRoZW1lXCIsIFwibGlnaHRcIik7XG4gICAgRE9NLnRoZW1lU3dpdGNoLnN0eWxlLmJhY2tncm91bmRQb3NpdGlvbiA9IFwiY2VudGVyIHRvcCAycHhcIjtcbiAgICBET00uZ2l0aHViTG9nby5zZXRBdHRyaWJ1dGUoXCJzcmNcIixcbiAgICBcImFzc2V0cy9pbWFnZXMvbG9nb3MvR2l0SHViLU1hcmstMzJweC5wbmdcIik7XG4gIH07XG5cbiAgRE9NLnRoZW1lU3dpdGNoLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfdG9nZ2xlVGhlbWUpO1xuICBET00udGhlbWVTd2l0Y2guYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiIFwiKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBfdG9nZ2xlVGhlbWUoKTtcbiAgICB9O1xuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgX29uTG9hZCk7XG59KSgpO1xuXG5jb25zdCBhY2Nlc3NpYmlsaXR5T3B0aW9ucyA9ICgoKSA9PiB7XG4gIGNvbnN0IF9vbkxvYWQgPSAoKSA9PiB7XG4gICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYW5pbWF0aW9ucy1lbmFibGVkXCIpID09PSBcImZhbHNlXCIpIHtcbiAgICAgIGFuaW1hdGlvbnNEaXNhYmxlZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhbmltYXRpb25zRW5hYmxlZCgpO1xuICAgIH07XG4gIH07XG5cbiAgY29uc3QgX3RvZ2dsZUFuaW1hdGlvbnMgPSAoKSA9PiB7XG4gICAgaWYgKERPTS5hbmltYXRpb25Td2l0Y2guZ2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIpID09PSBcInRydWVcIikge1xuICAgICAgYW5pbWF0aW9uc0Rpc2FibGVkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGFuaW1hdGlvbnNFbmFibGVkKCk7XG4gICAgfTtcbiAgICBzZXR0aW5ncy5zYXZlVG9Mb2NhbCgpO1xuICB9O1xuXG4gIGNvbnN0IGFuaW1hdGlvbnNFbmFibGVkID0gKCkgPT4ge1xuICAgIERPTS5hbmltYXRpb25Td2l0Y2guc2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIsIFwidHJ1ZVwiKTtcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuc2Nyb2xsQmVoYXZpb3IgPSBcInNtb290aFwiO1xuICAgIERPTS5hY2Nlc3NpYmlsaXR5Q29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSBcInRvcCAwLjc1cyBlYXNlLWluLW91dFwiO1xuICAgIERPTS5hbmltYXRpb25Td2l0Y2gudGV4dENvbnRlbnQgPSBcIkFuaW1hdGlvbnMgRW5hYmxlZFwiO1xuICAgIERPTS50aGVtZVN3aXRjaC5zdHlsZS50cmFuc2l0aW9uID0gXCJiYWNrZ3JvdW5kLXBvc2l0aW9uIDAuM3MgZWFzZS1pblwiO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpbi1uYXZcIikuc3R5bGUudHJhbnNpdGlvbiA9IFwibGVmdCAwLjVzXCI7XG4gICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmxhYmVsLWFycm93XCIpKS5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgaXRlbS5zdHlsZS50cmFuc2l0aW9uID0gXCJ0cmFuc2Zvcm0gMC43NXNcIjtcbiAgICB9KTtcbiAgfTtcbiAgICAgICAgXG4gIGNvbnN0IGFuaW1hdGlvbnNEaXNhYmxlZCA9ICgpID0+IHtcbiAgICBET00uYW5pbWF0aW9uU3dpdGNoLnNldEF0dHJpYnV0ZShcImFyaWEtY2hlY2tlZFwiLCBcImZhbHNlXCIpO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zY3JvbGxCZWhhdmlvciA9IFwiYXV0b1wiO1xuICAgIERPTS5hbmltYXRpb25Td2l0Y2guc2V0QXR0cmlidXRlKFwiYXJpYS1jaGVja2VkXCIsIFwiZmFsc2VcIik7XG4gICAgRE9NLmFuaW1hdGlvblN3aXRjaC50ZXh0Q29udGVudCA9IFwiQW5pbWF0aW9ucyBEaXNhYmxlZFwiO1xuICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5hbmltYXRlZFwiKSkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uc3R5bGUudHJhbnNpdGlvbiA9IFwibm9uZVwiO1xuICAgIH0pO1xuICB9O1xuXG4gIERPTS5hbmltYXRpb25Td2l0Y2guYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF90b2dnbGVBbmltYXRpb25zKTtcbiAgRE9NLmFuaW1hdGlvblN3aXRjaC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCAoZSkgPT4ge1xuICAgIGlmIChlLmtleSA9PT0gXCIgXCIpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIF90b2dnbGVBbmltYXRpb25zKCk7XG4gICAgfTtcbiAgfSk7XG4gIFxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgX29uTG9hZCk7XG5cbiAgcmV0dXJuIHtcbiAgICBhbmltYXRpb25zRW5hYmxlZCxcbiAgICBhbmltYXRpb25zRGlzYWJsZWRcbiAgfVxufSkoKTtcblxuZXhwb3J0IHthY2Nlc3NpYmlsaXR5T3B0aW9ucywgZGlzcGxheU9wdGlvbnMsIHNldHRpbmdzfSIsImltcG9ydCB7YWNjZXNzaWJpbGl0eU9wdGlvbnMsIHNldHRpbmdzfSBmcm9tIFwiLi9zaXRlLXNldHRpbmdzXCI7XG5cbmNvbnN0IERPTSA9ICgoKSA9PiB7XG4gIGNvbnN0IGFkZEdyb3VwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtZ3JvdXAtYnRuXCIpO1xuICBjb25zdCBhZGRUYXNrQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hZGQtdGFzay1idG5cIik7XG4gIGNvbnN0IGRlZmF1bHRHcm91cHMgPSBbXCJJbXBvcnRhbnRcIiwgXCJOZXh0IDcgRGF5c1wiLCBcIkxhdGVyXCIsIFwiRXZlbnR1YWxseVwiXTtcbiAgY29uc3QgZ3JvdXBCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImdyb3VwLWJ0blwiKTtcbiAgY29uc3QgZ3JvdXBPcHRpb25CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmdyb3VwLW9wdGlvbi1idG5cIik7XG4gIGNvbnN0IG1vZGFsQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1ib3hcIik7XG4gIGNvbnN0IG1vZGFsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1jb250YWluZXJcIik7XG4gIGNvbnN0IHNlbGVjdGVkR3JvdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNlbGVjdGVkLWdyb3VwXCIpO1xuICByZXR1cm4ge1xuICAgIGFkZEdyb3VwQnRuLFxuICAgIGFkZFRhc2tCdG4sXG4gICAgZGVmYXVsdEdyb3VwcyxcbiAgICBncm91cEJ1dHRvbnMsXG4gICAgZ3JvdXBPcHRpb25CdG4sXG4gICAgbW9kYWxCb3gsXG4gICAgbW9kYWxDb250YWluZXIsXG4gICAgc2VsZWN0ZWRHcm91cFxuICB9XG59KSgpO1xuXG5jb25zdCBnZW5lcmFsTW9kYWwgPSAoKCkgPT4ge1xuICBjb25zdCBvbkNsb3NlID0gKCkgPT4ge1xuICAgIHdoaWxlIChET00ubW9kYWxCb3guZmlyc3RDaGlsZCkge1xuICAgICAgRE9NLm1vZGFsQm94LnJlbW92ZUNoaWxkKERPTS5tb2RhbEJveC5maXJzdENoaWxkKVxuICAgIH07XG4gICAgRE9NLm1vZGFsQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfTtcblxuICBjb25zdCBvbk9wZW4gPSAoKSA9PiB7XG4gICAgRE9NLm1vZGFsQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBcImZsZXhcIjtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsLWNsb3NlLWJ1dHRvblwiKS5mb2N1cygpO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZUNsb3NlQnRuID0gKCkgPT4ge1xuICAgIGNvbnN0IGNsb3NlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBjbG9zZUJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgIGNsb3NlQnRuLnNldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIiwgXCJDbG9zZSBtb2RhbFwiKTtcbiAgICBjbG9zZUJ0bi5jbGFzc0xpc3QuYWRkKFwibW9kYWwtY2xvc2UtYnV0dG9uXCIsIFwiY2xvc2UtYnRuXCIsIFwiZm9jdXNhYmxlXCIpO1xuICAgIGNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZW5lcmFsTW9kYWwub25DbG9zZSk7XG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKGNsb3NlQnRuKTtcbiAgfTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIG9uQ2xvc2UoKTtcbiAgICB9O1xuICB9KTtcblxuICByZXR1cm4ge1xuICAgIGNyZWF0ZUNsb3NlQnRuLFxuICAgIG9uQ2xvc2UsXG4gICAgb25PcGVuXG4gIH1cbn0pKCk7XG5cbmNvbnN0IHdhcm5pbmdNb2RhbCA9ICgoKSA9PiB7XG4gIGNvbnN0IF9zZWxlY3RPcHRpb24gPSAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkaXNhYmxlLWJ1dHRvblwiKSkge1xuICAgICAgYWNjZXNzaWJpbGl0eU9wdGlvbnMuYW5pbWF0aW9uc0Rpc2FibGVkKCk7XG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJlbmFibGUtYnV0dG9uXCIpKSB7XG4gICAgICBhY2Nlc3NpYmlsaXR5T3B0aW9ucy5hbmltYXRpb25zRW5hYmxlZCgpO1xuICAgIH07XG4gICAgc2V0dGluZ3Muc2F2ZVRvTG9jYWwoKTtcbiAgICBnZW5lcmFsTW9kYWwub25DbG9zZSgpO1xuICB9O1xuXG4gIGNvbnN0IF9yZW5kZXIgPSAoKSA9PiB7XG4gICAgY29uc3QgaGVhZGluZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoMVwiKTtcbiAgICBjb25zdCBwYXJhMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xuICAgIGNvbnN0IHBhcmEyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIik7XG4gICAgY29uc3QgZGlzYWJsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgY29uc3QgZW5hYmxlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcblxuICAgIGhlYWRpbmcudGV4dENvbnRlbnQgPSBcIlRoaXMgc2l0ZSB1c2VzIG1pbmltYWwgYW5pbWF0aW9uIGVmZmVjdHMuXCI7XG5cbiAgICBwYXJhMS50ZXh0Q29udGVudCA9IFwiRWZmZWN0cyBpbmNsdWRlIG1vdmluZyBtZW51cyBhbmQgc21vb3RoIHNjcm9sbGluZy4gSWYgeW91IHN1ZmZlciBmcm9tIGEgdmVzdGlidWxhciBkaXNvcmRlciBvciBvdGhlcndpc2UgcHJlZmVyIG5vIGFuaW1hdGlvbnMsIHlvdSBjYW4gdHVybiB0aGVtIG9mZiBieSBjbGlja2luZyB0aGUgZmlyc3QgYnV0dG9uIGJlbG93LlwiO1xuICBcbiAgICBwYXJhMi50ZXh0Q29udGVudD0gXCJZb3UgY2FuIGxhdGVyIGNoYW5nZSB0aGlzIHNldHRpbmcgaW4gdGhlIERpc3BsYXkgJiBBY2Nlc3NpYmlsaXR5IHRhYiBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlLlwiO1xuICBcbiAgICBkaXNhYmxlQnV0dG9uLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XG4gICAgZGlzYWJsZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZGlzYWJsZS1idXR0b25cIiwgXCJmb2N1c2FibGVcIiwgXCJwcmltYXJ5LWJ0blwiKTtcbiAgICBkaXNhYmxlQnV0dG9uLnRleHRDb250ZW50ID0gXCJESVNBQkxFIEFOSU1BVElPTlNcIjtcbiAgICBkaXNhYmxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfc2VsZWN0T3B0aW9uKTtcbiAgICBcbiAgICBlbmFibGVCdXR0b24uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICBlbmFibGVCdXR0b24uY2xhc3NMaXN0LmFkZChcImVuYWJsZS1idXR0b25cIiwgXCJmb2N1c2FibGVcIiwgXCJzZWNvbmRhcnktYnRuXCIpO1xuICAgIGVuYWJsZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRU5BQkxFIEFOSU1BVElPTlNcIjtcbiAgICBlbmFibGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF9zZWxlY3RPcHRpb24pO1xuXG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKGhlYWRpbmcpO1xuICAgIERPTS5tb2RhbEJveC5hcHBlbmRDaGlsZChwYXJhMSk7XG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKHBhcmEyKTtcbiAgICBET00ubW9kYWxCb3guYXBwZW5kQ2hpbGQoZGlzYWJsZUJ1dHRvbik7XG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKGVuYWJsZUJ1dHRvbik7XG5cbiAgICBET00ubW9kYWxDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IFwiZmxleFwiO1xuICB9O1xuXG4gIGNvbnN0IF9vbkxvYWQgPSAoKSA9PiB7XG4gICAgaWYgKGxvY2FsU3RvcmFnZS5sZW5ndGggPT09IDApIHtcbiAgICAgIF9yZW5kZXIoKTtcbiAgICB9O1xuICB9O1xuXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBfb25Mb2FkKTtcbn0pKCk7XG5cbmNvbnN0IGdyb3VwTW9kYWwgPSAoKCkgPT4ge1xuICBjb25zdCBfcmVuZGVyID0gKGUpID0+IHtcbiAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIik7XG4gICAgY29uc3QgZmllbGRzZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIik7XG4gICAgY29uc3QgbGVnZW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxlZ2VuZFwiKTtcbiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgY29uc3QgbmFtZUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICBjb25zdCBtYWluQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXG4gICAgZ2VuZXJhbE1vZGFsLmNyZWF0ZUNsb3NlQnRuKCk7XG5cbiAgICBuYW1lTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibmFtZS1pbnB1dFwiKTtcbiAgICBuYW1lTGFiZWwudGV4dENvbnRlbnQgPSBcIkdyb3VwIE5hbWVcIjtcbiAgICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsIFwidHJ1ZVwiKTtcbiAgICBuYW1lSW5wdXQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJuYW1lLWlucHV0XCIpO1xuICAgIG5hbWVJbnB1dC5jbGFzc0xpc3QuYWRkKFwiZm9jdXNhYmxlXCIpO1xuXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImFkZC1ncm91cC1idG5cIikpIHtcbiAgICAgIGxlZ2VuZC50ZXh0Q29udGVudCA9IFwiQWRkIGEgR3JvdXBcIjtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJBREQgR1JPVVBcIik7XG4gICAgICBtYWluQnRuLmNsYXNzTGlzdC5hZGQoXCJzdWJtaXQtZ3JvdXAtYnRuXCIsIFwicHJpbWFyeS1idG5cIiwgXCJmb2N1c2FibGVcIiwgXCJzdWJtaXRcIik7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQobWFpbkJ0bik7XG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJncm91cC1vcHRpb24tYnRuXCIpKSB7XG4gICAgICBjb25zdCBkZWxldGVHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgICBjb25zdCBkZWxldGVDb21wbGV0ZWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuXG4gICAgICBsZWdlbmQudGV4dENvbnRlbnQgPSBcIkdyb3VwIE9wdGlvbnNcIjtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIG1haW5CdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJVUERBVEVcIik7XG4gICAgICBtYWluQnRuLmNsYXNzTGlzdC5hZGQoXCJ1cGRhdGUtZ3JvdXAtYnRuXCIsIFwic2Vjb25kYXJ5LWJ0blwiLCBcImZvY3VzYWJsZVwiLCBcInN1Ym1pdFwiKTtcblxuICAgICAgZGVsZXRlR3JvdXAuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcbiAgICAgIGRlbGV0ZUdyb3VwLmNsYXNzTGlzdC5hZGQoXCJkZWxldGUtZ3JvdXAtYnRuXCIsIFwiZGVsZXRlLWJ0blwiLCBcImZvY3VzYWJsZVwiKTtcbiAgICAgIGRlbGV0ZUdyb3VwLnRleHRDb250ZW50ID0gXCJERUxFVEUgR1JPVVBcIjtcbiAgICAgIGRlbGV0ZUNvbXBsZXRlZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgICAgZGVsZXRlQ29tcGxldGVkLmNsYXNzTGlzdC5hZGQoXCJkZWxldGUtY29tcGxldGVkLWJ0blwiLCBcImRlbGV0ZS1idG5cIiwgXCJmb2N1c2FibGVcIik7XG4gICAgICBkZWxldGVDb21wbGV0ZWQudGV4dENvbnRlbnQgPSBcIkRFTEVURSBDT01QTEVURUQgVEFTS1NcIjtcblxuICAgICAgaWYgKERPTS5kZWZhdWx0R3JvdXBzLmluZGV4T2YoRE9NLnNlbGVjdGVkR3JvdXAudGV4dENvbnRlbnQpID49IDApIHtcbiAgICAgICAgbmFtZUxhYmVsLnN0eWxlLm9wYWNpdHkgPSBcIjAuMzhcIjtcbiAgICAgICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgbmFtZUlucHV0LnN0eWxlLm9wYWNpdHkgPSBcIjAuMzhcIjtcbiAgICAgICAgbWFpbkJ0bi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICAgIG1haW5CdG4uc3R5bGUub3BhY2l0eSA9IFwiMC4zOFwiO1xuICAgICAgICBkZWxldGVHcm91cC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XG4gICAgICAgIGRlbGV0ZUdyb3VwLnN0eWxlLm9wYWNpdHkgPSBcIjAuMzhcIjtcbiAgICAgIH07XG5cbiAgICAgIGRpdi5hcHBlbmRDaGlsZChtYWluQnRuKTtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChkZWxldGVHcm91cCk7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZGVsZXRlQ29tcGxldGVkKTtcbiAgICB9O1xuXG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobGVnZW5kKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChuYW1lTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKG5hbWVJbnB1dCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZGl2KTtcbiAgICBmb3JtLmFwcGVuZENoaWxkKGZpZWxkc2V0KTtcbiAgICBET00ubW9kYWxCb3guYXBwZW5kQ2hpbGQoZm9ybSk7XG4gIH07XG5cbiAgRE9NLmdyb3VwT3B0aW9uQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIF9yZW5kZXIoZSk7XG4gICAgZ2VuZXJhbE1vZGFsLm9uT3BlbigpO1xuICB9KTtcblxuICBET00uYWRkR3JvdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgX3JlbmRlcihlKTtcbiAgICBnZW5lcmFsTW9kYWwub25PcGVuKCk7XG4gIH0pO1xufSkoKTtcblxuY29uc3QgdGFza01vZGFsID0gKCgpID0+IHtcbiAgY29uc3QgX3JlbmRlciA9IChlKSA9PiB7XG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpO1xuICAgIGNvbnN0IGZpZWxkc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIpO1xuICAgIGNvbnN0IGxlZ2VuZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsZWdlbmRcIik7XG4gICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGNvbnN0IG5hbWVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cbiAgICBjb25zdCBncm91cExhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIpO1xuICAgIGNvbnN0IGdyb3VwU2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcblxuICAgIGNvbnN0IHByaW9yaXR5TGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGFiZWxcIik7XG4gICAgY29uc3QgcHJpb3JpdHlTZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO1xuICAgIGNvbnN0IHByaW9yaXR5T3B0aW9uMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgY29uc3QgcHJpb3JpdHlPcHRpb24yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcblxuICAgIGNvbnN0IGRhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBjb25zdCBkYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgY29uc3Qgbm90ZXNMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsYWJlbFwiKTtcbiAgICBjb25zdCBub3Rlc0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuXG4gICAgZ2VuZXJhbE1vZGFsLmNyZWF0ZUNsb3NlQnRuKCk7XG5cbiAgICBuYW1lTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwibmFtZS1pbnB1dFwiKTtcbiAgICBuYW1lTGFiZWwudGV4dENvbnRlbnQgPSBcIlRhc2sgTmFtZSAocmVxdWlyZWQpXCI7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgIG5hbWVJbnB1dC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm5hbWUtaW5wdXRcIik7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInBsYWNlaG9sZGVyXCIsIFwiRW50ZXIgYSB0YXNrIG5hbWVcIik7XG4gICAgbmFtZUlucHV0LnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsIFwidHJ1ZVwiKTtcbiAgICBuYW1lSW5wdXQuY2xhc3NOYW1lID0gXCJmb2N1c2FibGVcIjtcblxuICAgIGdyb3VwTGFiZWwuc2V0QXR0cmlidXRlKFwiZm9yXCIsIFwiZ3JvdXAtc2VsZWN0XCIpO1xuICAgIGdyb3VwTGFiZWwudGV4dENvbnRlbnQgPSBcIkdyb3VwXCI7XG4gICAgZ3JvdXBTZWxlY3Quc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJncm91cC1zZWxlY3RcIik7XG4gICAgZ3JvdXBTZWxlY3QuY2xhc3NOYW1lID0gXCJmb2N1c2FibGVcIjtcbiAgICBcbiAgICBwcmlvcml0eUxhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcInByaW9yaXR5LXNlbGVjdFwiKTtcbiAgICBwcmlvcml0eUxhYmVsLnRleHRDb250ZW50ID0gXCJQcmlvcml0eVwiO1xuICAgIHByaW9yaXR5U2VsZWN0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwicHJpb3JpdHktc2VsZWN0XCIpO1xuICAgIHByaW9yaXR5U2VsZWN0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG4gICAgcHJpb3JpdHlPcHRpb24xLnRleHRDb250ZW50ID0gXCJOb3JtYWxcIjtcbiAgICBwcmlvcml0eU9wdGlvbjIudGV4dENvbnRlbnQgPSBcIkltcG9ydGFudFwiO1xuICAgIHByaW9yaXR5U2VsZWN0LmFwcGVuZENoaWxkKHByaW9yaXR5T3B0aW9uMSk7XG4gICAgcHJpb3JpdHlTZWxlY3QuYXBwZW5kQ2hpbGQocHJpb3JpdHlPcHRpb24yKTtcblxuICAgIGRhdGVMYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb3JcIiwgXCJkYXRlLXNlbGVjdFwiKTtcbiAgICBkYXRlTGFiZWwudGV4dENvbnRlbnQgPSBcIkR1ZSBEYXRlIChvcHRpb25hbClcIjtcbiAgICBkYXRlSW5wdXQuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImRhdGVcIik7XG4gICAgZGF0ZUlucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZGF0ZS1zZWxlY3RcIik7XG4gICAgZGF0ZUlucHV0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG5cbiAgICBub3Rlc0xhYmVsLnNldEF0dHJpYnV0ZShcImZvclwiLCBcIm5vdGVzLWlucHV0XCIpO1xuICAgIG5vdGVzTGFiZWwudGV4dENvbnRlbnQgPSBcIkFkZGl0aW9uYWwgTm90ZXNcIjtcbiAgICBub3Rlc0lucHV0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwibm90ZXMtaW5wdXRcIik7XG4gICAgbm90ZXNJbnB1dC5zZXRBdHRyaWJ1dGUoXCJwbGFjZWhvbGRlclwiLCBcIkVudGVyIGFueSBhZGRpdGlvbmFsIG5vdGVzIGZvciB0aGUgdGFza1wiKTtcbiAgICBub3Rlc0lucHV0LmNsYXNzTmFtZSA9IFwiZm9jdXNhYmxlXCI7XG5cbiAgICBpZiAoZS50YXJnZXQudGV4dENvbnRlbnQuaW5jbHVkZXMoXCJBREQgVEFTS1wiKSkge1xuICAgICAgY29uc3QgYWRkT25lQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgY29uc3QgYWRkTWFueUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblxuICAgICAgbGVnZW5kLnRleHRDb250ZW50ID0gXCJBZGQgYSBUYXNrXCI7XG5cbiAgICAgIGFkZE9uZUJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic3VibWl0XCIpO1xuICAgICAgYWRkT25lQnRuLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiQUREIE9ORVwiKTtcbiAgICAgIGFkZE9uZUJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiQWRkIHRhc2sgYW5kIGNsb3NlIG1vZGFsXCIpO1xuICAgICAgYWRkT25lQnRuLmNsYXNzTGlzdC5hZGQoXCJhZGQtc2luZ2xlLWJ0blwiLCBcInByaW1hcnktYnRuXCIsXCJzdWJtaXRcIiwgXCJmb2N1c2FibGVcIik7XG5cbiAgICAgIGFkZE1hbnlCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInN1Ym1pdFwiKTtcbiAgICAgIGFkZE1hbnlCdG4uc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgXCJBREQgTUFOWVwiKTtcbiAgICAgIGFkZE1hbnlCdG4uc2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiLCBcIkFkZCB0YXNrIGFuZCBrZWVwIG1vZGFsIG9wZW5cIik7XG4gICAgICBhZGRNYW55QnRuLmNsYXNzTGlzdC5hZGQoXCJhZGQtbWFueS1idG5cIiwgXCJzZWNvbmRhcnktYnRuXCIsIFwic3VibWl0XCIsIFwiZm9jdXNhYmxlXCIpO1xuXG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoYWRkT25lQnRuKTtcbiAgICAgIGRpdi5hcHBlbmRDaGlsZChhZGRNYW55QnRuKTtcbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0LnRleHRDb250ZW50ID09PSAoXCJFRElUXCIpKSB7XG4gICAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXG4gICAgICBsZWdlbmQudGV4dENvbnRlbnQgPSBcIkVkaXQgVGFza1wiO1xuXG4gICAgICBlZGl0QnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJzdWJtaXRcIik7XG4gICAgICBlZGl0QnRuLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIFwiVVBEQVRFXCIpO1xuICAgICAgZWRpdEJ0bi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIsIFwiVXBkYXRlIHRhc2sgYW5kIGNsb3NlIG1vZGFsXCIpO1xuICAgICAgZWRpdEJ0bi5jbGFzc0xpc3QuYWRkKFwidXBkYXRlLXRhc2stYnRuXCIsIFwicHJpbWFyeS1idG5cIiwgXCJmb2N1c2FibGVcIik7XG4gICAgICBkaXYuYXBwZW5kQ2hpbGQoZWRpdEJ0bik7XG4gICAgfTtcblxuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGxlZ2VuZCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQobmFtZUxhYmVsKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChuYW1lSW5wdXQpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGdyb3VwTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZ3JvdXBTZWxlY3QpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQocHJpb3JpdHlMYWJlbCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChwcmlvcml0eVNlbGVjdCk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJyXCIpKTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChkYXRlTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiclwiKSk7XG4gICAgZmllbGRzZXQuYXBwZW5kQ2hpbGQoZGF0ZUlucHV0KTtcbiAgICBmaWVsZHNldC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnJcIikpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKG5vdGVzTGFiZWwpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKG5vdGVzSW5wdXQpO1xuICAgIGZpZWxkc2V0LmFwcGVuZENoaWxkKGRpdik7XG4gICAgZm9ybS5hcHBlbmRDaGlsZChmaWVsZHNldCk7XG4gICAgRE9NLm1vZGFsQm94LmFwcGVuZENoaWxkKGZvcm0pO1xuICB9O1xuXG4gIERPTS5hZGRUYXNrQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIF9yZW5kZXIoZSk7XG4gICAgZ2VuZXJhbE1vZGFsLm9uT3BlbigpO1xuICB9KTtcbn0pKCk7XG5cbmV4cG9ydCB7Z2VuZXJhbE1vZGFsLCB3YXJuaW5nTW9kYWwsIGdyb3VwTW9kYWwsIHRhc2tNb2RhbH0iLCJcInVzZSBzdHJpY3RcIjtcbmltcG9ydCBmb3JtYXREaXN0YW5jZVRvTm93U3RyaWN0IGZyb20gXCJkYXRlLWZucy9mb3JtYXREaXN0YW5jZVRvTm93U3RyaWN0XCI7XG5pbXBvcnQgZGlmZmVyZW5jZUluRGF5cyBmcm9tIFwiZGF0ZS1mbnMvZGlmZmVyZW5jZUluRGF5c1wiO1xuaW1wb3J0IGlzVG9kYXkgZnJvbSBcImRhdGUtZm5zL2lzVG9kYXlcIjtcbmltcG9ydCB7Z2VuZXJhbE1vZGFsfSBmcm9tIFwiLi9tb2RhbHNcIjtcblxuY29uc3QgRE9NID0gKCgpID0+IHtcbiAgY29uc3QgZGVmYXVsdEdyb3VwcyA9IFtcIkltcG9ydGFudFwiLCBcIk5leHQgNyBEYXlzXCIsIFwiTGF0ZXJcIiwgXCJFdmVudHVhbGx5XCJdO1xuICBjb25zdCBncm91cEJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZ3JvdXAtYnRuXCIpO1xuICBjb25zdCBtb2RhbEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYm94XCIpO1xuICBjb25zdCB0YXNrSXRlbXMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGFzay1pdGVtXCIpO1xuXG4gIHJldHVybiB7XG4gICAgZGVmYXVsdEdyb3VwcyxcbiAgICBncm91cEJ1dHRvbnMsXG4gICAgbW9kYWxCb3gsXG4gICAgdGFza0l0ZW1zXG4gIH1cbn0pKCk7XG5cbmNvbnN0IHRvRG8gPSAoKCkgPT4ge1xuICBjb25zdCBsaXN0ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvRG8tbGlzdFwiKSkgfHwgXG4gICAge1xuICAgICAgRXhhbXBsZTogW1xuICAgICAgICB7XG4gICAgICAgICAgdGFza05hbWU6IFwiRG8gdGhlIGRpc2hlc1wiLFxuICAgICAgICAgIHByaW9yaXR5OiBcIk5vcm1hbFwiLFxuICAgICAgICAgIGR1ZTogXCJcIixcbiAgICAgICAgICBub3RlczpcbiAgICAgICAgICAgIFwiTGV0IHRoZSBwYW5zIHNvYWssIHB1dCB0aGUgcGxhdGVzIGluIHRoZSBkaXNod2FzaGVyLCB3YXNoIHRoZSBtdWdzIGJ5IGhhbmQuXFxuXFxuV2FzaCBwYW5zIGFmdGVyIDMwIG1pbnV0ZXMgc29ha2luZy5cIixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRhc2tOYW1lOiBcIkJyaW5nIE11ZmZpbiB0byB2ZXRcIixcbiAgICAgICAgICBwcmlvcml0eTogXCJJbXBvcnRhbnRcIixcbiAgICAgICAgICBkdWU6IFwiMjAyMS0wMy0wNVwiLFxuICAgICAgICAgIG5vdGVzOiBcIlBhY2sgaGVyIGZhdm9yaXRlIHRveSBzbyBzaGUgc3RheXMgY2FsbS5cIixcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfTtcblxuICBjb25zdCBzYXZlVG9Mb2NhbCA9ICgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvRG8tbGlzdFwiLCBKU09OLnN0cmluZ2lmeShsaXN0KSk7XG4gIH07XG5cbiAgcmV0dXJuIHsgXG4gICAgbGlzdCxcbiAgICBzYXZlVG9Mb2NhbFxuICB9XG59KSgpO1xuXG5jb25zdCB0YXNrcyA9ICgoKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZSA9ICgpID0+IHtcbiAgICBhbGVydChcIm9rXCIpO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZUNvbXBsZXRlID0gKG5vZGUpID0+IHtcbiAgICBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSA9PT0gbnVsbCkge1xuICAgICAgbm9kZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcbiAgICAgICAgICBcInVybChhc3NldHMvaW1hZ2VzL2ljb25zL2RvbmUtYmxhY2stMjRkcC5zdmcpXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgfTtcbiAgfTtcblxuICBBcnJheS5mcm9tKERPTS50YXNrSXRlbXMpLmZvckVhY2goaXRlbSA9PiB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIHN3aXRjaCAoZS50YXJnZXQpIHtcbiAgICAgICAgY2FzZSBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bMV06XG4gICAgICAgICAgdG9nZ2xlQ29tcGxldGUoZS5jdXJyZW50VGFyZ2V0LmNoaWxkcmVuWzFdKTtcbiAgICAgICAgICAvLyBpZiAoZS5jdXJyZW50VGFyZ2V0LmNoaWxkcmVuWzFdLmdldEF0dHJpYnV0ZShcInN0eWxlXCIpID09PSBudWxsKSB7XG4gICAgICAgICAgLy8gICBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bMV0uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXG4gICAgICAgICAgLy8gICAgICAgXCJ1cmwoYXNzZXRzL2ltYWdlcy9pY29ucy9kb25lLWJsYWNrLTI0ZHAuc3ZnKVwiO1xuICAgICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgICAgLy8gICBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bMV0ucmVtb3ZlQXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgICAgICAgLy8gfTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBlLmN1cnJlbnRUYXJnZXQuY2hpbGRyZW5bMl06XG4gICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LmNoaWxkcmVuWzRdLmNsYXNzTGlzdC50b2dnbGUoXCJleHBhbmRlZFwiKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm47XG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcbn0pKCk7XG5cbmNvbnN0IGdyb3VwcyA9ICgoKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZSA9IChuYW1lKSA9PiB7XG4gICAgdG9Eby5saXN0W25hbWVdID0gW107XG4gICAgdG9Eby5zYXZlVG9Mb2NhbCgpO1xuICAgIGNvbnNvbGUubG9nKHRvRG8ubGlzdCk7XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlID0gKG5hbWUsIG5ld05hbWUpID0+IHtcbiAgICBkZWxldGUgT2JqZWN0LmFzc2lnbih0b0RvLmxpc3QsIHsgW25ld05hbWVdOiB0b0RvLmxpc3RbbmFtZV0gfSlbbmFtZV07XG4gICAgY29uc29sZS5sb2codG9Eby5saXN0KTtcbiAgfTtcblxuICBjb25zdCByZW1vdmUgPSAobmFtZSkgPT4ge1xuICAgIGRlbGV0ZSB0b0RvLmxpc3RbbmFtZV07XG4gIH07XG5cbiAgY29uc3QgY2hlY2tOYW1lID0gKG5hbWUpID0+IHtcbiAgICByZXR1cm4gKFxuICAgICAgRE9NLmRlZmF1bHRHcm91cHMuaW5kZXhPZihuYW1lKSA+PSAwIHx8XG4gICAgICBPYmplY3Qua2V5cyh0b0RvLmxpc3QpLmluZGV4T2YobmFtZSkgPj0gMCB8fFxuICAgICAgbmFtZSA9PT0gXCJcIlxuICAgICk7XG4gIH07XG5cbiAgY29uc3Qgc2V0SW5hY3RpdmUgPSAoKSA9PiB7XG4gICAgQXJyYXkuZnJvbShET00uZ3JvdXBCdXR0b25zKS5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBzZXRBY3RpdmUgPSAodGFyZ2V0KSA9PiB7XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gIH07XG5cbiAgQXJyYXkuZnJvbShET00uZ3JvdXBCdXR0b25zKS5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBzZXRJbmFjdGl2ZSgpO1xuICAgICAgc2V0QWN0aXZlKGJ1dHRvbik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIERPTS5tb2RhbEJveC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICBzd2l0Y2ggKGUudGFyZ2V0KSB7XG4gICAgICBjYXNlIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3VibWl0LWdyb3VwLWJ0blwiKTpcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoY2hlY2tOYW1lKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbmFtZS1pbnB1dFwiKS52YWx1ZSkpIHtcbiAgICAgICAgICBhbGVydChcIlBsZWFzZSAgYSBuZXcgbmFtZS5cIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNyZWF0ZShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWUtaW5wdXRcIikudmFsdWUpO1xuICAgICAgICAgIHRvRG8uc2F2ZVRvTG9jYWwoKTtcbiAgICAgICAgICBnZW5lcmFsTW9kYWwub25DbG9zZSgpO1xuICAgICAgICB9O1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybjtcbiAgICB9O1xuICB9KTtcbn0pKCk7XG5cbi8vIGNvbnN0IGJ1dHRvbkxpc3RlbmVycyA9ICgoKSA9PiB7XG5cbi8vIH0pKCk7XG5cbi8vIGxldCBub3cgPSBuZXcgRGF0ZSgpO1xuXG4vLyBsZXQgZHVlRGF0ZSA9IG5ldyBEYXRlKChcIjIwMjEtMDItMDFcIikuc3BsaXQoXCItXCIpLmpvaW4oXCIsIFwiKSk7XG5cbi8vIGlmIChpc1RvZGF5KGR1ZURhdGUpKSB7XG4vLyAgIGNvbnNvbGUubG9nKFwiVG9kYXlcIilcbi8vIH0gZWxzZSBpZiAoZGlmZmVyZW5jZUluRGF5cyhkdWVEYXRlLCBub3cpIDw9IDcpIHtcbi8vICAgY29uc29sZS5sb2coXCJ0aGlzIHdlZWtcIik7XG4vLyAgIGNvbnNvbGUubG9nKGRpZmZlcmVuY2VJbkRheXMoZHVlRGF0ZSwgbm93KSk7XG4vLyB9IGVsc2UgaWYgKGRpZmZlcmVuY2VJbkRheXMoZHVlRGF0ZSwgbm93KSA+IDcpIHtcbi8vICAgY29uc29sZS5sb2coZm9ybWF0RGlzdGFuY2VUb05vd1N0cmljdChkdWVEYXRlKSk7XG4vLyB9IGVsc2UgaWYgKGR1ZURhdGUgPT09IFwiXCIpIHtcbi8vICAgY29uc29sZS5sb2coXCJObyBkdWUgZGF0ZVwiKVxuLy8gfVxuXG5leHBvcnQgeyBncm91cHMsIHRhc2tzLCB0b0RvIH07XG4iLCJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0ICcuL3N0eWxlLmNzcyc7XG5pbXBvcnQge2Rpc3BsYXlPcHRpb25zLCBhY2Nlc3NpYmlsaXR5T3B0aW9uc30gZnJvbSBcIi4vc2l0ZS1zZXR0aW5nc1wiO1xuaW1wb3J0IHtncm91cE1vZGFsLCB0YXNrTW9kYWwsIHdhcm5pbmdNb2RhbH0gZnJvbSBcIi4vbW9kYWxzXCI7XG5pbXBvcnQge2dyb3VwcywgdGFza3MsIHRvRG99IGZyb20gXCIuL2xvZ2ljXCI7XG5pbXBvcnQgZm9ybWF0IGZyb20gJ2RhdGUtZm5zL2Zvcm1hdCc7XG5cbmNvbnNvbGUubG9nKHRvRG8ubGlzdCk7XG5cbmNvbnN0IERPTSA9ICgoKSA9PiB7XG4gIGNvbnN0IG1lbnVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21haW4tbmF2XCIpO1xuICBjb25zdCBtZW51T3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1idXR0b25cIik7XG4gIGNvbnN0IG1lbnVDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWVudS1jbG9zZS1idXR0b25cIik7XG4gIFxuICByZXR1cm4ge1xuICAgIG1lbnVDb250YWluZXIsXG4gICAgbWVudU9wZW5CdXR0b24sXG4gICAgbWVudUNsb3NlQnV0dG9uXG4gIH1cbn0pKCk7XG5cbmNvbnN0IG1lbnVWaXNpYmlsaXR5ID0gKCgpID0+IHtcbiAgY29uc3QgX29uU2NyZWVuU2l6ZSA9ICgpID0+IHtcbiAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFdpZHRoID4gNzYzKSB7XG4gICAgICBET00ubWVudUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XG4gICAgICBET00ubWVudUNvbnRhaW5lci5zdHlsZS5sZWZ0ID0gXCIwXCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIERPTS5tZW51Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xuICAgICAgRE9NLm1lbnVDb250YWluZXIuc3R5bGUubGVmdCA9IFwiLTgwMHB4XCI7XG4gICAgfTtcbiAgfTtcbiAgXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIF9vblNjcmVlblNpemUpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgX29uU2NyZWVuU2l6ZSk7XG5cbiAgY29uc3QgX3RvZ2dsZU1lbnUgPSAoKSA9PiB7XG4gICAgaWYgKERPTS5tZW51Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPT09IFwiaGlkZGVuXCIpIHtcbiAgICAgIERPTS5tZW51Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcbiAgICAgIERPTS5tZW51Q29udGFpbmVyLnN0eWxlLmxlZnQgPSBcIjBcIjtcbiAgICAgIERPTS5tZW51Q2xvc2VCdXR0b24uZm9jdXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgRE9NLm1lbnVDb250YWluZXIuc3R5bGUubGVmdCA9IFwiLTgwMHB4XCI7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgRE9NLm1lbnVDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCJcbiAgICAgIH0sIDYwMCk7XG4gICAgICBET00ubWVudU9wZW5CdXR0b24uZm9jdXMoKTtcbiAgICB9O1xuICB9O1xuXG4gIERPTS5tZW51T3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX3RvZ2dsZU1lbnUpO1xuICBET00ubWVudUNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfdG9nZ2xlTWVudSk7XG59KSgpOyJdLCJzb3VyY2VSb290IjoiIn0=